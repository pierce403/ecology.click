var Mt=Object.defineProperty;var Rt=(ft,pt,Z)=>pt in ft?Mt(ft,pt,{enumerable:!0,configurable:!0,writable:!0,value:Z}):ft[pt]=Z;var xt=(ft,pt,Z)=>Rt(ft,typeof pt!="symbol"?pt+"":pt,Z);(function(){const pt=document.createElement("link").relList;if(pt&&pt.supports&&pt.supports("modulepreload"))return;for(const q of document.querySelectorAll('link[rel="modulepreload"]'))k(q);new MutationObserver(q=>{for(const et of q)if(et.type==="childList")for(const p of et.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&k(p)}).observe(document,{childList:!0,subtree:!0});function Z(q){const et={};return q.integrity&&(et.integrity=q.integrity),q.referrerPolicy&&(et.referrerPolicy=q.referrerPolicy),q.crossOrigin==="use-credentials"?et.credentials="include":q.crossOrigin==="anonymous"?et.credentials="omit":et.credentials="same-origin",et}function k(q){if(q.ep)return;q.ep=!0;const et=Z(q);fetch(q.href,et)}})();var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lt(ft){return ft&&ft.__esModule&&Object.prototype.hasOwnProperty.call(ft,"default")?ft.default:ft}var At={exports:{}};(function(ft,pt){(function(k,q){ft.exports=q()})(Ft,()=>(()=>{var Z={50792:p=>{var S=Object.prototype.hasOwnProperty,t="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(t=!1));function c(e,s,o){this.fn=e,this.context=s,this.once=o||!1}function h(e,s,o,i,a){if(typeof o!="function")throw new TypeError("The listener must be a function");var l=new c(o,i||e,a),f=t?t+s:s;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],l]:e._events[f].push(l):(e._events[f]=l,e._eventsCount++),e}function r(e,s){--e._eventsCount===0?e._events=new d:delete e._events[s]}function n(){this._events=new d,this._eventsCount=0}n.prototype.eventNames=function(){var s=[],o,i;if(this._eventsCount===0)return s;for(i in o=this._events)S.call(o,i)&&s.push(t?i.slice(1):i);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(o)):s},n.prototype.listeners=function(s){var o=t?t+s:s,i=this._events[o];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,l=i.length,f=new Array(l);a<l;a++)f[a]=i[a].fn;return f},n.prototype.listenerCount=function(s){var o=t?t+s:s,i=this._events[o];return i?i.fn?1:i.length:0},n.prototype.emit=function(s,o,i,a,l,f){var u=t?t+s:s;if(!this._events[u])return!1;var v=this._events[u],m=arguments.length,x,g;if(v.fn){switch(v.once&&this.removeListener(s,v.fn,void 0,!0),m){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,o),!0;case 3:return v.fn.call(v.context,o,i),!0;case 4:return v.fn.call(v.context,o,i,a),!0;case 5:return v.fn.call(v.context,o,i,a,l),!0;case 6:return v.fn.call(v.context,o,i,a,l,f),!0}for(g=1,x=new Array(m-1);g<m;g++)x[g-1]=arguments[g];v.fn.apply(v.context,x)}else{var y=v.length,T;for(g=0;g<y;g++)switch(v[g].once&&this.removeListener(s,v[g].fn,void 0,!0),m){case 1:v[g].fn.call(v[g].context);break;case 2:v[g].fn.call(v[g].context,o);break;case 3:v[g].fn.call(v[g].context,o,i);break;case 4:v[g].fn.call(v[g].context,o,i,a);break;default:if(!x)for(T=1,x=new Array(m-1);T<m;T++)x[T-1]=arguments[T];v[g].fn.apply(v[g].context,x)}}return!0},n.prototype.on=function(s,o,i){return h(this,s,o,i,!1)},n.prototype.once=function(s,o,i){return h(this,s,o,i,!0)},n.prototype.removeListener=function(s,o,i,a){var l=t?t+s:s;if(!this._events[l])return this;if(!o)return r(this,l),this;var f=this._events[l];if(f.fn)f.fn===o&&(!a||f.once)&&(!i||f.context===i)&&r(this,l);else{for(var u=0,v=[],m=f.length;u<m;u++)(f[u].fn!==o||a&&!f[u].once||i&&f[u].context!==i)&&v.push(f[u]);v.length?this._events[l]=v.length===1?v[0]:v:r(this,l)}return this},n.prototype.removeAllListeners=function(s){var o;return s?(o=t?t+s:s,this._events[o]&&r(this,o)):(this._events=new d,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=t,n.EventEmitter=n,p.exports=n},11517:(p,S,t)=>{/**
`);var W=[];for(L=0;L<O.length;L++){var H=O[L],K="",b="",Q="",j="";for(G=0;G<H.length;G++)if(y=H.charCodeAt(G),K+=H[G],y===s||G===H.length-1){j=Q+K;var J=Y(j,t.fontData);J<=e?Q=j:(b=b.slice(0,-1),b+=(b?`
`:"")+Q,Q=K),K=""}b=b.slice(0,-1),b+=(b?`
`:"")+Q,W.push(b)}r=W.join(`
`),h.wrappedText=r,n=r.length}var it=0;for(L=0;L<n;L++){if(y=r.charCodeAt(L),y===10){V!==null&&(z.push({word:V.word,i:V.i,x:V.x*A,y:V.y*R,w:V.w*A,h:V.h*R}),V=null),F=null,I[D]=B,B>N&&(N=B),B<U&&(U=B),D++,B=0,x=0,g=(u+m)*D;continue}if(T=f[y],!!T){if(E=x,M=g,F!==null){var st=T.kerning[w];E+=st!==void 0?st:0}o>E&&(o=E),i>M&&(i=M);var nt=E+T.xAdvance,$=M+u;a<nt&&(a=nt),l<$&&(l=$);var _=T.xOffset+T.xAdvance+(st!==void 0?st:0);y===s?V!==null&&(z.push({word:V.word,i:V.i,x:V.x*A,y:V.y*R,w:V.w*A,h:V.h*R}),V=null):(V===null&&(V={word:"",i:it,x,y:g,w:0,h:u}),V.word=V.word.concat(r[L]),V.w+=_),X.push({i:it,idx:L,char:r[L],code:y,x:(T.xOffset+E)*P,y:(T.yOffset+g)*P,w:T.width*P,h:T.height*P,t:g*P,r:nt*P,b:u*P,line:D,glyph:T}),x+=T.xAdvance+v+(st!==void 0?st:0),F=T,w=y,B=nt*P,it++}}if(V!==null&&z.push({word:V.word,i:V.i,x:V.x*A,y:V.y*R,w:V.w*A,h:V.h*R}),I[D]=B,B>N&&(N=B),B<U&&(U=B),C>0)for(var tt=0;tt<X.length;tt++){var rt=X[tt];if(C===1){var ht=(N-I[rt.line])/2;rt.x+=ht,rt.r+=ht}else if(C===2){var ut=N-I[rt.line];rt.x+=ut,rt.r+=ut}}var at=h.local,ot=h.global;return O=h.lines,at.x=o*P,at.y=i*P,at.width=a*P,at.height=l*P,ot.x=t.x-t._displayOriginX+o*A,ot.y=t.y-t._displayOriginY+i*R,ot.width=a*A,ot.height=l*R,O.shortest=U,O.longest=N,O.lengths=I,d&&(at.x=Math.ceil(at.x),at.y=Math.ceil(at.y),at.width=Math.ceil(at.width),at.height=Math.ceil(at.height),ot.x=Math.ceil(ot.x),ot.y=Math.ceil(ot.y),ot.width=Math.ceil(ot.width),ot.height=Math.ceil(ot.height),O.shortest=Math.ceil(U),O.longest=Math.ceil(N)),c&&(t._displayOriginX=t.originX*at.width,t._displayOriginY=t.originY*at.height,ot.x=t.x-t._displayOriginX*t.scaleX,ot.y=t.y-t._displayOriginY*t.scaleY,d&&(ot.x=Math.ceil(ot.x),ot.y=Math.ceil(ot.y))),h.words=z,h.characters=X,h.lines.height=u,h.scale=P,h.scaleX=t.scaleX,h.scaleY=t.scaleY,h};p.exports=S},61327:(p,S,t)=>{/**
 */var d=t(91296),c=t(61340),h=t(70554),r=new c,n=function(e,s,o,i){var a=s.text,l=a.length;if(l!==0){o.addToRenderList(s);var f=e.pipelines.set(s.pipeline,s),u=d(s,o,i);e.pipelines.preBatch(s);var v=u.sprite,m=u.calc,x=r,g=s.cropWidth>0||s.cropHeight>0;g&&(f.flush(),e.pushScissor(m.tx,m.ty,s.cropWidth*m.scaleX,s.cropHeight*m.scaleY));var y=s.frame,T=y.glTexture,C=s.tintFill,E=h.getTintAppendFloatAlpha(s.tintTopLeft,o.alpha*s._alphaTL),M=h.getTintAppendFloatAlpha(s.tintTopRight,o.alpha*s._alphaTR),P=h.getTintAppendFloatAlpha(s.tintBottomLeft,o.alpha*s._alphaBL),A=h.getTintAppendFloatAlpha(s.tintBottomRight,o.alpha*s._alphaBR),R=f.setGameObject(s),F=0,w=0,I=0,U=0,N=s.letterSpacing,D,B=0,L=0,G,O=s.scrollX,z=s.scrollY,X=s.fontData,V=X.chars,Y=X.lineHeight,W=s.fontSize/X.size,H=0,K=s._align,b=0,Q=0,j=s.getTextBounds(!1);s.maxWidth>0&&(a=j.wrappedText,l=a.length);var J=s._bounds.lines;K===1?Q=(J.longest-J.lengths[0])/2:K===2&&(Q=J.longest-J.lengths[0]);for(var it=o.roundPixels,st=s.displayCallback,nt=s.callbackData,$=0;$<l;$++){if(I=a.charCodeAt($),I===10){b++,K===1?Q=(J.longest-J.lengths[b])/2:K===2&&(Q=J.longest-J.lengths[b]),F=0,w+=Y,G=null;continue}if(D=V[I],!!D){B=D.width,L=D.height;var _=D.xOffset+F-O,tt=D.yOffset+w-z;if(G!==null){var rt=D.kerning[U]||0;_+=rt,F+=rt}if(F+=D.xAdvance+N,G=D,U=I,!(B===0||L===0||I===32)){if(W=s.fontSize/s.fontData.size,H=0,st){nt.color=0,nt.tint.topLeft=E,nt.tint.topRight=M,nt.tint.bottomLeft=P,nt.tint.bottomRight=A,nt.index=$,nt.charCode=I,nt.x=_,nt.y=tt,nt.scale=W,nt.rotation=H,nt.data=D.data;var ht=st(nt);_=ht.x,tt=ht.y,W=ht.scale,H=ht.rotation,ht.color?(E=ht.color,M=ht.color,P=ht.color,A=ht.color):(E=ht.tint.topLeft,M=ht.tint.topRight,P=ht.tint.bottomLeft,A=ht.tint.bottomRight),E=h.getTintAppendFloatAlpha(E,o.alpha*s._alphaTL),M=h.getTintAppendFloatAlpha(M,o.alpha*s._alphaTR),P=h.getTintAppendFloatAlpha(P,o.alpha*s._alphaBL),A=h.getTintAppendFloatAlpha(A,o.alpha*s._alphaBR)}_*=W,tt*=W,_-=s.displayOriginX,tt-=s.displayOriginY,_+=Q,x.applyITRS(_,tt,H,W,W),m.multiply(x,v);var ut=D.u0,at=D.v0,ot=D.u1,dt=D.v1,mt=B,lt=L,vt=v.e,ct=v.f,gt=lt*v.c+v.e,yt=lt*v.d+v.f,Tt=mt*v.a+lt*v.c+v.e,St=mt*v.b+lt*v.d+v.f,Ct=mt*v.a+v.e,Et=mt*v.b+v.f;it&&(vt=Math.round(vt),ct=Math.round(ct),gt=Math.round(gt),yt=Math.round(yt),Tt=Math.round(Tt),St=Math.round(St),Ct=Math.round(Ct),Et=Math.round(Et)),f.shouldFlush(6)&&(f.flush(),R=f.setGameObject(s)),f.batchQuad(s,vt,ct,gt,yt,Tt,St,Ct,Et,ut,at,ot,dt,E,M,P,A,C,T,R)}}}g&&(f.flush(),e.popScissor()),e.pipelines.postBatch(s)}};p.exports=n},22186:(p,S,t)=>{/**
 */var d=t(85592),c=t(91296),h=t(61340),r=t(70554),n=function(a,l,f){this.x=a,this.y=l,this.width=f},e=function(a,l,f){this.points=[],this.pointsLength=1,this.points[0]=new n(a,l,f)},s=[],o=new h,i=function(a,l,f,u){if(l.commandBuffer.length!==0){f.addToRenderList(l);var v=a.pipelines.set(l.pipeline,l);a.pipelines.preBatch(l);for(var m=c(l,f,u).calc,x=o.loadIdentity(),g=l.commandBuffer,y=f.alpha*l.alpha,T=1,C=v.fillTint,E=v.strokeTint,M=0,P=0,A=0,R=.01,F=Math.PI*2,w,I=[],U=0,N=!0,D=null,B=r.getTintAppendFloatAlpha,L=0;L<g.length;L++)switch(w=g[L],w){case d.BEGIN_PATH:{I.length=0,D=null,N=!0;break}case d.CLOSE_PATH:{N=!1,D&&D.points.length&&D.points.push(D.points[0]);break}case d.FILL_PATH:{for(U=0;U<I.length;U++)v.batchFillPath(I[U].points,x,m);break}case d.STROKE_PATH:{for(U=0;U<I.length;U++)v.batchStrokePath(I[U].points,T,N,x,m);break}case d.LINE_STYLE:{T=g[++L];var G=g[++L],O=g[++L]*y,z=B(G,O);E.TL=z,E.TR=z,E.BL=z,E.BR=z;break}case d.FILL_STYLE:{var X=g[++L],V=g[++L]*y,Y=B(X,V);C.TL=Y,C.TR=Y,C.BL=Y,C.BR=Y;break}case d.GRADIENT_FILL_STYLE:{var W=g[++L]*y,H=g[++L]*y,K=g[++L]*y,b=g[++L]*y;C.TL=B(g[++L],W),C.TR=B(g[++L],H),C.BL=B(g[++L],K),C.BR=B(g[++L],b);break}case d.GRADIENT_LINE_STYLE:{T=g[++L];var Q=g[++L]*y;E.TL=B(g[++L],Q),E.TR=B(g[++L],Q),E.BL=B(g[++L],Q),E.BR=B(g[++L],Q);break}case d.ARC:{var j=0,J=g[++L],it=g[++L],st=g[++L],nt=g[++L],$=g[++L],_=g[++L],tt=g[++L];for($-=nt,_?$<-F?$=-F:$>0&&($=-F+$%F):$>F?$=F:$<0&&($=F+$%F),D===null&&(D=new e(J+Math.cos(nt)*st,it+Math.sin(nt)*st,T),I.push(D),j+=R);j<1+tt;)A=$*j+nt,M=J+Math.cos(A)*st,P=it+Math.sin(A)*st,D.points.push(new n(M,P,T)),j+=R;A=$+nt,M=J+Math.cos(A)*st,P=it+Math.sin(A)*st,D.points.push(new n(M,P,T));break}case d.FILL_RECT:{v.batchFillRect(g[++L],g[++L],g[++L],g[++L],x,m);break}case d.FILL_TRIANGLE:{v.batchFillTriangle(g[++L],g[++L],g[++L],g[++L],g[++L],g[++L],x,m);break}case d.STROKE_TRIANGLE:{v.batchStrokeTriangle(g[++L],g[++L],g[++L],g[++L],g[++L],g[++L],T,x,m);break}case d.LINE_TO:{D!==null?D.points.push(new n(g[++L],g[++L],T)):(D=new e(g[++L],g[++L],T),I.push(D));break}case d.MOVE_TO:{D=new e(g[++L],g[++L],T),I.push(D);break}case d.SAVE:{s.push(x.copyToArray());break}case d.RESTORE:{x.copyFromArray(s.pop());break}case d.TRANSLATE:{J=g[++L],it=g[++L],x.translate(J,it);break}case d.SCALE:{J=g[++L],it=g[++L],x.scale(J,it);break}case d.ROTATE:{x.rotate(g[++L]);break}}a.pipelines.postBatch(l)}};p.exports=i},26479:(p,S,t)=>{/**
 */var d=t(61061),c=t(83419),h=t(51708),r=t(50792),n=t(46710),e=t(95540),s=t(35154),o=t(97022),i=t(41212),a=t(88492),l=t(35072),f=t(68287),u=new c({Extends:r,initialize:function(m,x,g){r.call(this),g?x&&!Array.isArray(x)&&(x=[x]):Array.isArray(x)?i(x[0])&&(g=x,x=null):i(x)&&(g=x,x=null),this.scene=m,this.children=new l,this.isParent=!0,this.type="Group",this.classType=e(g,"classType",f),this.name=e(g,"name",""),this.active=e(g,"active",!0),this.maxSize=e(g,"maxSize",-1),this.defaultKey=e(g,"defaultKey",null),this.defaultFrame=e(g,"defaultFrame",null),this.runChildUpdate=e(g,"runChildUpdate",!1),this.createCallback=e(g,"createCallback",null),this.removeCallback=e(g,"removeCallback",null),this.createMultipleCallback=e(g,"createMultipleCallback",null),this.internalCreateCallback=e(g,"internalCreateCallback",null),this.internalRemoveCallback=e(g,"internalRemoveCallback",null),x&&this.addMultiple(x),g&&this.createMultiple(g),this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(v,m,x,g,y,T){if(v===void 0&&(v=0),m===void 0&&(m=0),x===void 0&&(x=this.defaultKey),g===void 0&&(g=this.defaultFrame),y===void 0&&(y=!0),T===void 0&&(T=!0),this.isFull())return null;var C=new this.classType(this.scene,v,m,x,g);return C.addToDisplayList(this.scene.sys.displayList),C.addToUpdateList(),C.visible=y,C.setActive(T),this.add(C),C},createMultiple:function(v){if(this.isFull())return[];Array.isArray(v)||(v=[v]);var m=[];if(v[0].key)for(var x=0;x<v.length;x++){var g=this.createFromConfig(v[x]);m=m.concat(g)}return m},createFromConfig:function(v){if(this.isFull())return[];this.classType=e(v,"classType",this.classType);var m=e(v,"key",void 0),x=e(v,"frame",null),g=e(v,"visible",!0),y=e(v,"active",!0),T=[];if(m===void 0)return T;Array.isArray(m)||(m=[m]),Array.isArray(x)||(x=[x]);var C=e(v,"repeat",0),E=e(v,"randomKey",!1),M=e(v,"randomFrame",!1),P=e(v,"yoyo",!1),A=e(v,"quantity",!1),R=e(v,"frameQuantity",1),F=e(v,"max",0),w=a(m,x,{max:F,qty:A||R,random:E,randomB:M,repeat:C,yoyo:P});v.createCallback&&(this.createCallback=v.createCallback),v.removeCallback&&(this.removeCallback=v.removeCallback),v.internalCreateCallback&&(this.internalCreateCallback=v.internalCreateCallback),v.internalRemoveCallback&&(this.internalRemoveCallback=v.internalRemoveCallback);for(var I=0;I<w.length;I++){var U=this.create(0,0,w[I].a,w[I].b,g,y);if(!U)break;T.push(U)}if(o(v,"setXY")){var N=s(v,"setXY.x",0),D=s(v,"setXY.y",0),B=s(v,"setXY.stepX",0),L=s(v,"setXY.stepY",0);d.SetXY(T,N,D,B,L)}if(o(v,"setRotation")){var G=s(v,"setRotation.value",0),O=s(v,"setRotation.step",0);d.SetRotation(T,G,O)}if(o(v,"setScale")){var z=s(v,"setScale.x",1),X=s(v,"setScale.y",z),V=s(v,"setScale.stepX",0),Y=s(v,"setScale.stepY",0);d.SetScale(T,z,X,V,Y)}if(o(v,"setOrigin")){var W=s(v,"setOrigin.x",.5),H=s(v,"setOrigin.y",W),K=s(v,"setOrigin.stepX",0),b=s(v,"setOrigin.stepY",0);d.SetOrigin(T,W,H,K,b)}if(o(v,"setAlpha")){var Q=s(v,"setAlpha.value",1),j=s(v,"setAlpha.step",0);d.SetAlpha(T,Q,j)}if(o(v,"setDepth")){var J=s(v,"setDepth.value",0),it=s(v,"setDepth.step",0);d.SetDepth(T,J,it)}if(o(v,"setScrollFactor")){var st=s(v,"setScrollFactor.x",1),nt=s(v,"setScrollFactor.y",st),$=s(v,"setScrollFactor.stepX",0),_=s(v,"setScrollFactor.stepY",0);d.SetScrollFactor(T,st,nt,$,_)}var tt=e(v,"hitArea",null),rt=e(v,"hitAreaCallback",null);tt&&d.SetHitArea(T,tt,rt);var ht=e(v,"gridAlign",!1);return ht&&d.GridAlign(T,ht),this.createMultipleCallback&&this.createMultipleCallback.call(this,T),T},preUpdate:function(v,m){if(!(!this.runChildUpdate||this.children.size===0))for(var x=this.children.entries.slice(),g=0;g<x.length;g++){var y=x[g];y.active&&y.update(v,m)}},add:function(v,m){return m===void 0&&(m=!1),this.isFull()?this:(this.children.set(v),this.internalCreateCallback&&this.internalCreateCallback.call(this,v),this.createCallback&&this.createCallback.call(this,v),m&&(v.addToDisplayList(this.scene.sys.displayList),v.addToUpdateList()),v.on(h.DESTROY,this.remove,this),this)},addMultiple:function(v,m){if(m===void 0&&(m=!1),Array.isArray(v))for(var x=0;x<v.length;x++)this.add(v[x],m);return this},remove:function(v,m,x){return m===void 0&&(m=!1),x===void 0&&(x=!1),this.children.contains(v)?(this.children.delete(v),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,v),this.removeCallback&&this.removeCallback.call(this,v),v.off(h.DESTROY,this.remove,this),x?v.destroy():m&&(v.removeFromDisplayList(),v.removeFromUpdateList()),this):this},clear:function(v,m){v===void 0&&(v=!1),m===void 0&&(m=!1);for(var x=this.children,g=0;g<x.size;g++){var y=x.entries[g];y.off(h.DESTROY,this.remove,this),m?y.destroy():v&&(y.removeFromDisplayList(),y.removeFromUpdateList())}return this.children.clear(),this},contains:function(v){return this.children.contains(v)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(v,m,x,g){return n(this.children.entries,v,m,x,g)},getFirst:function(v,m,x,g,y,T,C){return this.getHandler(!0,1,v,m,x,g,y,T,C)},getFirstNth:function(v,m,x,g,y,T,C,E){return this.getHandler(!0,v,m,x,g,y,T,C,E)},getLast:function(v,m,x,g,y,T,C){return this.getHandler(!1,1,v,m,x,g,y,T,C)},getLastNth:function(v,m,x,g,y,T,C,E){return this.getHandler(!1,v,m,x,g,y,T,C,E)},getHandler:function(v,m,x,g,y,T,C,E,M){x===void 0&&(x=!1),g===void 0&&(g=!1);var P,A,R=0,F=this.children.entries;if(v)for(A=0;A<F.length;A++)if(P=F[A],P.active===x){if(R++,R===m)break}else P=null;else for(A=F.length-1;A>=0;A--)if(P=F[A],P.active===x){if(R++,R===m)break}else P=null;return P?(typeof y=="number"&&(P.x=y),typeof T=="number"&&(P.y=T),P):g?this.create(y,T,C,E,M):null},get:function(v,m,x,g,y){return this.getFirst(!1,!0,v,m,x,g,y)},getFirstAlive:function(v,m,x,g,y,T){return this.getFirst(!0,v,m,x,g,y,T)},getFirstDead:function(v,m,x,g,y,T){return this.getFirst(!1,v,m,x,g,y,T)},playAnimation:function(v,m){return d.PlayAnimation(this.children.entries,v,m),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(v){v===void 0&&(v=!0);for(var m=0,x=0;x<this.children.size;x++)this.children.entries[x].active===v&&m++;return m},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var v=this.getTotalUsed(),m=this.maxSize===-1?999999999999:this.maxSize;return m-v},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},propertyValueSet:function(v,m,x,g,y){return d.PropertyValueSet(this.children.entries,v,m,x,g,y),this},propertyValueInc:function(v,m,x,g,y){return d.PropertyValueInc(this.children.entries,v,m,x,g,y),this},setX:function(v,m){return d.SetX(this.children.entries,v,m),this},setY:function(v,m){return d.SetY(this.children.entries,v,m),this},setXY:function(v,m,x,g){return d.SetXY(this.children.entries,v,m,x,g),this},incX:function(v,m){return d.IncX(this.children.entries,v,m),this},incY:function(v,m){return d.IncY(this.children.entries,v,m),this},incXY:function(v,m,x,g){return d.IncXY(this.children.entries,v,m,x,g),this},shiftPosition:function(v,m,x){return d.ShiftPosition(this.children.entries,v,m,x),this},angle:function(v,m){return d.Angle(this.children.entries,v,m),this},rotate:function(v,m){return d.Rotate(this.children.entries,v,m),this},rotateAround:function(v,m){return d.RotateAround(this.children.entries,v,m),this},rotateAroundDistance:function(v,m,x){return d.RotateAroundDistance(this.children.entries,v,m,x),this},setAlpha:function(v,m){return d.SetAlpha(this.children.entries,v,m),this},setTint:function(v,m,x,g){return d.SetTint(this.children.entries,v,m,x,g),this},setOrigin:function(v,m,x,g){return d.SetOrigin(this.children.entries,v,m,x,g),this},scaleX:function(v,m){return d.ScaleX(this.children.entries,v,m),this},scaleY:function(v,m){return d.ScaleY(this.children.entries,v,m),this},scaleXY:function(v,m,x,g){return d.ScaleXY(this.children.entries,v,m,x,g),this},setDepth:function(v,m){return d.SetDepth(this.children.entries,v,m),this},setBlendMode:function(v){return d.SetBlendMode(this.children.entries,v),this},setHitArea:function(v,m){return d.SetHitArea(this.children.entries,v,m),this},shuffle:function(){return d.Shuffle(this.children.entries),this},kill:function(v){this.children.contains(v)&&v.setActive(!1)},killAndHide:function(v){this.children.contains(v)&&(v.setActive(!1),v.setVisible(!1))},setVisible:function(v,m,x){return d.SetVisible(this.children.entries,v,m,x),this},toggleVisible:function(){return d.ToggleVisible(this.children.entries),this},destroy:function(v,m){v===void 0&&(v=!1),m===void 0&&(m=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(h.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(m,v),this.scene=void 0,this.children=void 0)}});p.exports=u},94975:(p,S,t)=>{/**
 */var d=t(83419),c=t(31401),h=t(53774),r=t(43459),n=t(26388),e=t(19909),s=t(76472),o=t(44777),i=t(20696),a=t(95643),l=t(95540),f=t(26546),u=t(24502),v=t(69036),m=t(1985),x=t(97022),g=t(86091),y=t(73162),T=t(20074),C=t(269),E=t(56480),M=t(69601),P=t(68875),A=t(87841),R=t(59996),F=t(72905),w=t(90668),I=t(19186),U=t(61340),N=t(26099),D=t(15994),B=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],L=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],G=new d({Extends:a,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Mask,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Texture,c.Transform,c.Visible,w],initialize:function(z,X,V,Y,W){a.call(this,z,"ParticleEmitter"),this.particleClass=E,this.config=null,this.ops={accelerationX:new o("accelerationX",0),accelerationY:new o("accelerationY",0),alpha:new o("alpha",1),angle:new o("angle",{min:0,max:360},!0),bounce:new o("bounce",0),color:new s("color"),delay:new o("delay",0,!0),hold:new o("hold",0,!0),lifespan:new o("lifespan",1e3,!0),maxVelocityX:new o("maxVelocityX",1e4),maxVelocityY:new o("maxVelocityY",1e4),moveToX:new o("moveToX",0),moveToY:new o("moveToY",0),quantity:new o("quantity",1,!0),rotate:new o("rotate",0),scaleX:new o("scaleX",1),scaleY:new o("scaleY",1),speedX:new o("speedX",0,!0),speedY:new o("speedY",0,!0),tint:new o("tint",16777215),x:new o("x",0),y:new o("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new N,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new U,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new y(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(X,V),this.setTexture(Y),W&&this.setConfig(W)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(O){if(!O)return this;this.config=O;var z=0,X="",V=this.ops;for(z=0;z<L.length;z++)X=L[z],V[X].loadConfig(O);for(z=0;z<B.length;z++)X=B[z],x(O,X)&&(this[X]=l(O,X));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=v(O,["moveToX","moveToY"]),x(O,"speed")&&(V.speedX.loadConfig(O,"speed"),V.speedY.active=!1),(m(O,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),x(O,"scale")&&(V.scaleX.loadConfig(O,"scale"),V.scaleY.active=!1),x(O,"callbackScope")){var Y=l(O,"callbackScope",null);this.emitCallbackScope=Y,this.deathCallbackScope=Y}if(x(O,"emitZone")&&this.addEmitZone(O.emitZone),x(O,"deathZone")&&this.addDeathZone(O.deathZone),x(O,"bounds")){var W=this.addParticleBounds(O.bounds);W.collideLeft=l(O,"collideLeft",!0),W.collideRight=l(O,"collideRight",!0),W.collideTop=l(O,"collideTop",!0),W.collideBottom=l(O,"collideBottom",!0)}return x(O,"followOffset")&&this.followOffset.setFromObject(l(O,"followOffset",0)),x(O,"texture")&&this.setTexture(O.texture),x(O,"frame")?this.setEmitterFrame(O.frame):x(O,"anim")&&this.setAnim(O.anim),x(O,"reserve")&&this.reserve(O.reserve),x(O,"advance")&&this.fastForward(O.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(i.START,this),this},updateConfig:function(O){return O&&(this.config?this.setConfig(C(this.config,O)):this.setConfig(O)),this},toJSON:function(){var O=h(this),z=0,X="";for(z=0;z<B.length;z++)X=B[z],O[X]=this[X];var V=this.ops;for(z=0;z<L.length;z++)X=L[z],V[X]&&(O[X]=V[X].toJSON());return V.speedY.active||(delete O.speedX,O.speed=V.speedX.toJSON()),this.scaleX===this.scaleY&&(delete O.scaleX,delete O.scaleY,O.scale=V.scaleX.toJSON()),O},resetCounters:function(O,z){var X=this.counters;X.fill(0),X[0]=O,z&&(X[5]=1)},startFollow:function(O,z,X,V){return z===void 0&&(z=0),X===void 0&&(X=0),V===void 0&&(V=!1),this.follow=O,this.followOffset.set(z,X),this.trackVisible=V,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var O=this.frames,z=O.length,X;return z===1?X=O[0]:this.randomFrame?X=f(O):(X=O[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===z&&(this.currentFrame=0))),this.texture.get(X)},setEmitterFrame:function(O,z,X){z===void 0&&(z=!0),X===void 0&&(X=1),this.randomFrame=z,this.frameQuantity=X,this.currentFrame=0;var V=typeof O;if(this.frames.length=0,Array.isArray(O))this.frames=this.frames.concat(O);else if(V==="string"||V==="number")this.frames.push(O);else if(V==="object"){var Y=O;O=l(Y,"frames",null),O&&(this.frames=this.frames.concat(O));var W=l(Y,"cycle",!1);this.randomFrame=!W,this.frameQuantity=l(Y,"quantity",X)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var O=this.anims,z=O.length;if(z===0)return null;if(z===1)return O[0];if(this.randomAnim)return f(O);var X=O[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=D(this.currentAnim+1,0,z)),X},setAnim:function(O,z,X){z===void 0&&(z=!0),X===void 0&&(X=1),this.randomAnim=z,this.animQuantity=X,this.currentAnim=0;var V=typeof O;if(this.anims.length=0,Array.isArray(O))this.anims=this.anims.concat(O);else if(V==="string")this.anims.push(O);else if(V==="object"){var Y=O;O=l(Y,"anims",null),O&&(this.anims=this.anims.concat(O));var W=l(Y,"cycle",!1);this.randomAnim=!W,this.animQuantity=l(Y,"quantity",X)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(O){return O===void 0&&(O=!0),this.radial=O,this},addParticleBounds:function(O,z,X,V,Y,W,H,K){if(typeof O=="object"){var b=O;O=b.x,z=b.y,X=x(b,"w")?b.w:b.width,V=x(b,"h")?b.h:b.height}return this.addParticleProcessor(new M(O,z,X,V,Y,W,H,K))},setParticleSpeed:function(O,z){return z===void 0&&(z=O),this.ops.speedX.onChange(O),O===z?this.ops.speedY.active=!1:this.ops.speedY.onChange(z),this.radial=!0,this},setParticleScale:function(O,z){return O===void 0&&(O=1),z===void 0&&(z=O),this.ops.scaleX.onChange(O),this.ops.scaleY.onChange(z),this},setParticleGravity:function(O,z){return this.gravityX=O,this.gravityY=z,this},setParticleAlpha:function(O){return this.ops.alpha.onChange(O),this},setParticleTint:function(O){return this.ops.tint.onChange(O),this},setEmitterAngle:function(O){return this.ops.angle.onChange(O),this},setParticleLifespan:function(O){return this.ops.lifespan.onChange(O),this},setQuantity:function(O){return this.quantity=O,this},setFrequency:function(O,z){return this.frequency=O,this.flowCounter=O>0?O:0,z&&(this.quantity=z),this},addDeathZone:function(O){Array.isArray(O)||(O=[O]);for(var z,X=[],V=0;V<O.length;V++)if(z=O[V],z instanceof n)X.push(z);else if(typeof z.contains=="function")z=new n(z,!0),X.push(z);else{var Y=l(z,"type","onEnter"),W=l(z,"source",null);if(W&&typeof W.contains=="function"){var H=Y==="onEnter";z=new n(W,H),X.push(z)}}return this.deathZones=this.deathZones.concat(X),X},removeDeathZone:function(O){return F(this.deathZones,O),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(O){Array.isArray(O)||(O=[O]);for(var z,X=[],V=0;V<O.length;V++)if(z=O[V],z instanceof P||z instanceof e)X.push(z);else{var Y=l(z,"source",null);if(Y){var W=l(z,"type","random");if(W==="random"&&typeof Y.getRandomPoint=="function")z=new P(Y),X.push(z);else if(W==="edge"&&typeof Y.getPoints=="function"){var H=l(z,"quantity",1),K=l(z,"stepRate",0),b=l(z,"yoyo",!1),Q=l(z,"seamless",!0),j=l(z,"total",-1);z=new e(Y,H,K,b,Q,j),X.push(z)}}}return this.emitZones=this.emitZones.concat(X),X},removeEmitZone:function(O){return F(this.emitZones,O),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(O){var z=this.emitZones,X=z.length;if(X!==0){var V=z[this.zoneIndex];V.getPoint(O),V.total>-1&&(this.zoneTotal++,this.zoneTotal===V.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===X&&(this.zoneIndex=0)))}},getDeathZone:function(O){for(var z=this.deathZones,X=0;X<z.length;X++){var V=z[X];if(V.willKill(O))return this.emit(i.DEATH_ZONE,this,O,V),!0}return!1},setEmitZone:function(O){var z;return isFinite(O)?z=O:z=this.emitZones.indexOf(O),z>=0&&(this.zoneIndex=z),this},addParticleProcessor:function(O){return this.processors.exists(O)||(O.emitter&&O.emitter.removeParticleProcessor(O),this.processors.add(O),O.emitter=this),O},removeParticleProcessor:function(O){return this.processors.exists(O)&&(this.processors.remove(O,!0),O.emitter=null),O},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(O){return this.addParticleProcessor(new u(O))},reserve:function(O){var z=this.dead;if(this.maxParticles>0){var X=this.getParticleCount();X+O>this.maxParticles&&(O=this.maxParticles-(X+O))}for(var V=0;V<O;V++)z.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(O,z){return O===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof O=="function"&&(this.emitCallback=O,z&&(this.emitCallbackScope=z)),this},onParticleDeath:function(O,z){return O===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof O=="function"&&(this.deathCallback=O,z&&(this.deathCallbackScope=z)),this},killAll:function(){for(var O=this.dead,z=this.alive;z.length>0;)O.push(z.pop());return this},forEachAlive:function(O,z){for(var X=this.alive,V=X.length,Y=0;Y<V;Y++)O.call(z,X[Y],this);return this},forEachDead:function(O,z){for(var X=this.dead,V=X.length,Y=0;Y<V;Y++)O.call(z,X[Y],this);return this},start:function(O,z){return O===void 0&&(O=0),this.emitting||(O>0&&this.fastForward(O),this.emitting=!0,this.resetCounters(this.frequency,!0),z!==void 0&&(this.duration=Math.abs(z)),this.emit(i.START,this)),this},stop:function(O){return O===void 0&&(O=!1),this.emitting&&(this.emitting=!1,O&&this.killAll(),this.emit(i.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(O,z){return O===void 0&&(O=""),z===void 0&&(z=this.true),this.sortProperty=O,this.sortOrderAsc=z,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(O){return this.sortProperty!==""?O=this.depthSortCallback:O=null,this.sortCallback=O,this},depthSort:function(){return I(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(O,z){var X=this.sortProperty;return this.sortOrderAsc?O[X]-z[X]:z[X]-O[X]},flow:function(O,z,X){return z===void 0&&(z=1),this.emitting=!1,this.frequency=O,this.quantity=z,X!==void 0&&(this.stopAfter=X),this.start()},explode:function(O,z,X){this.frequency=-1,this.resetCounters(-1,!0);var V=this.emitParticle(O,z,X);return this.emit(i.EXPLODE,this,V),V},emitParticleAt:function(O,z,X){return this.emitParticle(X,O,z)},emitParticle:function(O,z,X){if(!this.atLimit()){O===void 0&&(O=this.ops.quantity.onEmit());for(var V=this.dead,Y=this.stopAfter,W=this.follow?this.follow.x+this.followOffset.x:z,H=this.follow?this.follow.y+this.followOffset.y:X,K=0;K<O;K++){var b=V.pop();if(b||(b=new this.particleClass(this)),b.fire(W,H)?(this.particleBringToTop?this.alive.push(b):this.alive.unshift(b),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,b,this)):this.dead.push(b),Y>0&&(this.stopCounter++,this.stopCounter>=Y)||this.atLimit())break}return b}},fastForward:function(O,z){z===void 0&&(z=1e3/60);var X=0;for(this.skipping=!0;X<Math.abs(O);)this.preUpdate(0,z),X+=z;return this.skipping=!1,this},preUpdate:function(O,z){z*=this.timeScale;var X=z/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var V=this.getProcessors(),Y=this.alive,W=this.dead,H=0,K=[],b=Y.length;for(H=0;H<b;H++){var Q=Y[H];Q.update(z,X,V)&&K.push({index:H,particle:Q})}if(b=K.length,b>0){var j=this.deathCallback,J=this.deathCallbackScope;for(H=b-1;H>=0;H--){var it=K[H];Y.splice(it.index,1),W.push(it.particle),j&&j.call(J,it.particle),it.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&Y.length===0&&(this.completeFlag=0,this.emit(i.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=z;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=z,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(O){for(var z=this.getWorldTransformMatrix(),X=this.alive,V=X.length,Y=[],W=0;W<V;W++){var H=X[W];R(O,H.getBounds(z))&&Y.push(H)}return Y},getBounds:function(O,z,X,V){O===void 0&&(O=0),z===void 0&&(z=0),X===void 0&&(X=1e3/60),V===void 0&&(V=new A);var Y=this.getWorldTransformMatrix(),W,H,K=this.alive,b=!1;if(V.setTo(0,0,0,0),z>0){var Q=0;for(this.skipping=!0;Q<Math.abs(z);){for(this.preUpdate(0,X),W=0;W<K.length;W++)H=K[W].getBounds(Y),b?T(V,H):(b=!0,r(H,V));Q+=X}this.skipping=!1}else for(W=0;W<K.length;W++)H=K[W].getBounds(Y),b?T(V,H):(b=!0,r(H,V));return O>0&&g(V,O,O),V},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(O){this.ops.x.onChange(O)}},particleY:{get:function(){return this.ops.y.current},set:function(O){this.ops.y.onChange(O)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(O){this.ops.accelerationX.onChange(O)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(O){this.ops.accelerationY.onChange(O)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(O){this.ops.maxVelocityX.onChange(O)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(O){this.ops.maxVelocityY.onChange(O)}},speed:{get:function(){return this.ops.speedX.current},set:function(O){this.ops.speedX.onChange(O),this.ops.speedY.onChange(O)}},speedX:{get:function(){return this.ops.speedX.current},set:function(O){this.ops.speedX.onChange(O)}},speedY:{get:function(){return this.ops.speedY.current},set:function(O){this.ops.speedY.onChange(O)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(O){this.ops.moveToX.onChange(O)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(O){this.ops.moveToY.onChange(O)}},bounce:{get:function(){return this.ops.bounce.current},set:function(O){this.ops.bounce.onChange(O)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(O){this.ops.scaleX.onChange(O)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(O){this.ops.scaleY.onChange(O)}},particleColor:{get:function(){return this.ops.color.current},set:function(O){this.ops.color.onChange(O)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(O){this.ops.color.setEase(O)}},particleTint:{get:function(){return this.ops.tint.current},set:function(O){this.ops.tint.onChange(O)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(O){this.ops.alpha.onChange(O)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(O){this.ops.lifespan.onChange(O)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(O){this.ops.angle.onChange(O)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(O){this.ops.rotate.onChange(O)}},quantity:{get:function(){return this.ops.quantity.current},set:function(O){this.ops.quantity.onChange(O)}},delay:{get:function(){return this.ops.delay.current},set:function(O){this.ops.delay.onChange(O)}},hold:{get:function(){return this.ops.hold.current},set:function(O){this.ops.hold.onChange(O)}},flowCounter:{get:function(){return this.counters[0]},set:function(O){this.counters[0]=O}},frameCounter:{get:function(){return this.counters[1]},set:function(O){this.counters[1]=O}},animCounter:{get:function(){return this.counters[2]},set:function(O){this.counters[2]=O}},elapsed:{get:function(){return this.counters[3]},set:function(O){this.counters[3]=O}},stopCounter:{get:function(){return this.counters[4]},set:function(O){this.counters[4]=O}},completeFlag:{get:function(){return this.counters[5]},set:function(O){this.counters[5]=O}},zoneIndex:{get:function(){return this.counters[6]},set:function(O){this.counters[6]=O}},zoneTotal:{get:function(){return this.counters[7]},set:function(O){this.counters[7]=O}},currentFrame:{get:function(){return this.counters[8]},set:function(O){this.counters[8]=O}},currentAnim:{get:function(){return this.counters[9]},set:function(O){this.counters[9]=O}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var O,z=this.ops;for(O=0;O<L.length;O++){var X=L[O];z[X].destroy()}for(O=0;O<this.alive.length;O++)this.alive[O].destroy();for(O=0;O<this.dead.length;O++)this.dead[O].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});p.exports=G},9871:(p,S,t)=>{/**
 */var d=t(83997),c=t(95540),h=t(37867),r=t(25836),n=t(39318),e=new r,s=new r,o=new h,i=function(a){var l=c(a,"mesh"),f=c(a,"texture",null),u=c(a,"frame"),v=c(a,"width",1),m=c(a,"height",v),x=c(a,"widthSegments",1),g=c(a,"heightSegments",x),y=c(a,"x",0),T=c(a,"y",0),C=c(a,"z",0),E=c(a,"rotateX",0),M=c(a,"rotateY",0),P=c(a,"rotateZ",0),A=c(a,"zIsUp",!0),R=c(a,"isOrtho",l?l.dirtyCache[11]:!1),F=c(a,"colors",[16777215]),w=c(a,"alphas",[1]),I=c(a,"tile",!1),U=c(a,"flipY",!1),N=c(a,"width",null),D={faces:[],verts:[]};e.set(y,T,C),s.set(E,M,P),o.fromRotationXYTranslation(s,e,A);var B;if(!f&&l)f=l.texture,u||(B=l.frame);else if(l&&typeof f=="string")f=l.scene.sys.textures.get(f);else if(!f)return D;B||(B=f.get(u)),!N&&R&&f&&l&&(v=B.width/l.height,m=B.height/l.height);var L=v/2,G=m/2,O=Math.floor(x),z=Math.floor(g),X=O+1,V=z+1,Y=v/O,W=m/z,H=[],K=[],b,Q,j=0,J=1,it=0,st=1;B&&(j=B.u0,J=B.u1,U?(it=B.v1,st=B.v0):(it=B.v0,st=B.v1));var nt=J-j,$=st-it;for(Q=0;Q<V;Q++){var _=Q*W-G;for(b=0;b<X;b++){var tt=b*Y-L;K.push(tt,-_);var rt=j+nt*(b/O),ht=it+$*(Q/z);H.push(rt,ht)}}Array.isArray(F)||(F=[F]),Array.isArray(w)||(w=[w]);var ut=0,at=0;for(Q=0;Q<z;Q++)for(b=0;b<O;b++){var ot=(b+X*Q)*2,dt=(b+X*(Q+1))*2,mt=(b+1+X*(Q+1))*2,lt=(b+1+X*Q)*2,vt=F[at],ct=w[ut],gt=new n(K[ot],K[ot+1],0,H[ot],H[ot+1],vt,ct).transformMat4(o),yt=new n(K[dt],K[dt+1],0,H[dt],H[dt+1],vt,ct).transformMat4(o),Tt=new n(K[lt],K[lt+1],0,H[lt],H[lt+1],vt,ct).transformMat4(o),St=new n(K[dt],K[dt+1],0,H[dt],H[dt+1],vt,ct).transformMat4(o),Ct=new n(K[mt],K[mt+1],0,H[mt],H[mt+1],vt,ct).transformMat4(o),Et=new n(K[lt],K[lt+1],0,H[lt],H[lt+1],vt,ct).transformMat4(o);I&&(gt.setUVs(j,st),yt.setUVs(j,it),Tt.setUVs(J,st),St.setUVs(j,it),Ct.setUVs(J,it),Et.setUVs(J,st)),at++,at===F.length&&(at=0),ut++,ut===w.length&&(ut=0),D.verts.push(gt,yt,Tt,St,Ct,Et),D.faces.push(new d(gt,yt,Tt),new d(St,Ct,Et))}return l&&(l.faces=l.faces.concat(D.faces),l.vertices=l.vertices.concat(D.verts)),D};p.exports=i},34684:(p,S,t)=>{/**
 */function S(D,B,L){L=L||2;var G=B&&B.length,O=G?B[0]*L:D.length,z=t(D,0,O,L,!0),X=[];if(!z||z.next===z.prev)return X;var V,Y,W,H,K,b,Q;if(G&&(z=s(D,B,z,L)),D.length>80*L){V=W=D[0],Y=H=D[1];for(var j=L;j<O;j+=L)K=D[j],b=D[j+1],K<V&&(V=K),b<Y&&(Y=b),K>W&&(W=K),b>H&&(H=b);Q=Math.max(W-V,H-Y),Q=Q!==0?32767/Q:0}return c(z,X,L,V,Y,Q,0),X}function t(D,B,L,G,O){var z,X;if(O===N(D,B,L,G)>0)for(z=B;z<L;z+=G)X=w(z,D[z],D[z+1],X);else for(z=L-G;z>=B;z-=G)X=w(z,D[z],D[z+1],X);return X&&T(X,X.next)&&(I(X),X=X.next),X}function d(D,B){if(!D)return D;B||(B=D);var L=D,G;do if(G=!1,!L.steiner&&(T(L,L.next)||y(L.prev,L,L.next)===0)){if(I(L),L=B=L.prev,L===L.next)break;G=!0}else L=L.next;while(G||L!==B);return B}function c(D,B,L,G,O,z,X){if(D){!X&&z&&f(D,G,O,z);for(var V=D,Y,W;D.prev!==D.next;){if(Y=D.prev,W=D.next,z?r(D,G,O,z):h(D)){B.push(Y.i/L|0),B.push(D.i/L|0),B.push(W.i/L|0),I(D),D=W.next,V=W.next;continue}if(D=W,D===V){X?X===1?(D=n(d(D),B,L),c(D,B,L,G,O,z,2)):X===2&&e(D,B,L,G,O,z):c(d(D),B,L,G,O,z,1);break}}}}function h(D){var B=D.prev,L=D,G=D.next;if(y(B,L,G)>=0)return!1;for(var O=B.x,z=L.x,X=G.x,V=B.y,Y=L.y,W=G.y,H=O<z?O<X?O:X:z<X?z:X,K=V<Y?V<W?V:W:Y<W?Y:W,b=O>z?O>X?O:X:z>X?z:X,Q=V>Y?V>W?V:W:Y>W?Y:W,j=G.next;j!==B;){if(j.x>=H&&j.x<=b&&j.y>=K&&j.y<=Q&&x(O,V,z,Y,X,W,j.x,j.y)&&y(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function r(D,B,L,G){var O=D.prev,z=D,X=D.next;if(y(O,z,X)>=0)return!1;for(var V=O.x,Y=z.x,W=X.x,H=O.y,K=z.y,b=X.y,Q=V<Y?V<W?V:W:Y<W?Y:W,j=H<K?H<b?H:b:K<b?K:b,J=V>Y?V>W?V:W:Y>W?Y:W,it=H>K?H>b?H:b:K>b?K:b,st=v(Q,j,B,L,G),nt=v(J,it,B,L,G),$=D.prevZ,_=D.nextZ;$&&$.z>=st&&_&&_.z<=nt;){if($.x>=Q&&$.x<=J&&$.y>=j&&$.y<=it&&$!==O&&$!==X&&x(V,H,Y,K,W,b,$.x,$.y)&&y($.prev,$,$.next)>=0||($=$.prevZ,_.x>=Q&&_.x<=J&&_.y>=j&&_.y<=it&&_!==O&&_!==X&&x(V,H,Y,K,W,b,_.x,_.y)&&y(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;$&&$.z>=st;){if($.x>=Q&&$.x<=J&&$.y>=j&&$.y<=it&&$!==O&&$!==X&&x(V,H,Y,K,W,b,$.x,$.y)&&y($.prev,$,$.next)>=0)return!1;$=$.prevZ}for(;_&&_.z<=nt;){if(_.x>=Q&&_.x<=J&&_.y>=j&&_.y<=it&&_!==O&&_!==X&&x(V,H,Y,K,W,b,_.x,_.y)&&y(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function n(D,B,L){var G=D;do{var O=G.prev,z=G.next.next;!T(O,z)&&C(O,G,G.next,z)&&A(O,z)&&A(z,O)&&(B.push(O.i/L|0),B.push(G.i/L|0),B.push(z.i/L|0),I(G),I(G.next),G=D=z),G=G.next}while(G!==D);return d(G)}function e(D,B,L,G,O,z){var X=D;do{for(var V=X.next.next;V!==X.prev;){if(X.i!==V.i&&g(X,V)){var Y=F(X,V);X=d(X,X.next),Y=d(Y,Y.next),c(X,B,L,G,O,z,0),c(Y,B,L,G,O,z,0);return}V=V.next}X=X.next}while(X!==D)}function s(D,B,L,G){var O=[],z,X,V,Y,W;for(z=0,X=B.length;z<X;z++)V=B[z]*G,Y=z<X-1?B[z+1]*G:D.length,W=t(D,V,Y,G,!1),W===W.next&&(W.steiner=!0),O.push(m(W));for(O.sort(o),z=0;z<O.length;z++)L=i(O[z],L);return L}function o(D,B){return D.x-B.x}function i(D,B){var L=a(D,B);if(!L)return B;var G=F(L,D);return d(G,G.next),d(L,L.next)}function a(D,B){var L=B,G=D.x,O=D.y,z=-1/0,X;do{if(O<=L.y&&O>=L.next.y&&L.next.y!==L.y){var V=L.x+(O-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(V<=G&&V>z&&(z=V,X=L.x<L.next.x?L:L.next,V===G))return X}L=L.next}while(L!==B);if(!X)return null;var Y=X,W=X.x,H=X.y,K=1/0,b;L=X;do G>=L.x&&L.x>=W&&G!==L.x&&x(O<H?G:z,O,W,H,O<H?z:G,O,L.x,L.y)&&(b=Math.abs(O-L.y)/(G-L.x),A(L,D)&&(b<K||b===K&&(L.x>X.x||L.x===X.x&&l(X,L)))&&(X=L,K=b)),L=L.next;while(L!==Y);return X}function l(D,B){return y(D.prev,D,B.prev)<0&&y(B.next,D,D.next)<0}function f(D,B,L,G){var O=D;do O.z===0&&(O.z=v(O.x,O.y,B,L,G)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==D);O.prevZ.nextZ=null,O.prevZ=null,u(O)}function u(D){var B,L,G,O,z,X,V,Y,W=1;do{for(L=D,D=null,z=null,X=0;L;){for(X++,G=L,V=0,B=0;B<W&&(V++,G=G.nextZ,!!G);B++);for(Y=W;V>0||Y>0&&G;)V!==0&&(Y===0||!G||L.z<=G.z)?(O=L,L=L.nextZ,V--):(O=G,G=G.nextZ,Y--),z?z.nextZ=O:D=O,O.prevZ=z,z=O;L=G}z.nextZ=null,W*=2}while(X>1);return D}function v(D,B,L,G,O){return D=(D-L)*O|0,B=(B-G)*O|0,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,D|B<<1}function m(D){var B=D,L=D;do(B.x<L.x||B.x===L.x&&B.y<L.y)&&(L=B),B=B.next;while(B!==D);return L}function x(D,B,L,G,O,z,X,V){return(O-X)*(B-V)>=(D-X)*(z-V)&&(D-X)*(G-V)>=(L-X)*(B-V)&&(L-X)*(z-V)>=(O-X)*(G-V)}function g(D,B){return D.next.i!==B.i&&D.prev.i!==B.i&&!P(D,B)&&(A(D,B)&&A(B,D)&&R(D,B)&&(y(D.prev,D,B.prev)||y(D,B.prev,B))||T(D,B)&&y(D.prev,D,D.next)>0&&y(B.prev,B,B.next)>0)}function y(D,B,L){return(B.y-D.y)*(L.x-B.x)-(B.x-D.x)*(L.y-B.y)}function T(D,B){return D.x===B.x&&D.y===B.y}function C(D,B,L,G){var O=M(y(D,B,L)),z=M(y(D,B,G)),X=M(y(L,G,D)),V=M(y(L,G,B));return!!(O!==z&&X!==V||O===0&&E(D,L,B)||z===0&&E(D,G,B)||X===0&&E(L,D,G)||V===0&&E(L,B,G))}function E(D,B,L){return B.x<=Math.max(D.x,L.x)&&B.x>=Math.min(D.x,L.x)&&B.y<=Math.max(D.y,L.y)&&B.y>=Math.min(D.y,L.y)}function M(D){return D>0?1:D<0?-1:0}function P(D,B){var L=D;do{if(L.i!==D.i&&L.next.i!==D.i&&L.i!==B.i&&L.next.i!==B.i&&C(L,L.next,D,B))return!0;L=L.next}while(L!==D);return!1}function A(D,B){return y(D.prev,D,D.next)<0?y(D,B,D.next)>=0&&y(D,D.prev,B)>=0:y(D,B,D.prev)<0||y(D,D.next,B)<0}function R(D,B){var L=D,G=!1,O=(D.x+B.x)/2,z=(D.y+B.y)/2;do L.y>z!=L.next.y>z&&L.next.y!==L.y&&O<(L.next.x-L.x)*(z-L.y)/(L.next.y-L.y)+L.x&&(G=!G),L=L.next;while(L!==D);return G}function F(D,B){var L=new U(D.i,D.x,D.y),G=new U(B.i,B.x,B.y),O=D.next,z=B.prev;return D.next=B,B.prev=D,L.next=O,O.prev=L,G.next=L,L.prev=G,z.next=G,G.prev=z,G}function w(D,B,L,G){var O=new U(D,B,L);return G?(O.next=G.next,O.prev=G,G.next.prev=O,G.next=O):(O.prev=O,O.next=O),O}function I(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function U(D,B,L){this.i=D,this.x=B,this.y=L,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}S.deviation=function(D,B,L,G){var O=B&&B.length,z=O?B[0]*L:D.length,X=Math.abs(N(D,0,z,L));if(O)for(var V=0,Y=B.length;V<Y;V++){var W=B[V]*L,H=V<Y-1?B[V+1]*L:D.length;X-=Math.abs(N(D,W,H,L))}var K=0;for(V=0;V<G.length;V+=3){var b=G[V]*L,Q=G[V+1]*L,j=G[V+2]*L;K+=Math.abs((D[b]-D[j])*(D[Q+1]-D[b+1])-(D[b]-D[Q])*(D[j+1]-D[b+1]))}return X===0&&K===0?0:Math.abs((K-X)/X)};function N(D,B,L,G){for(var O=0,z=B,X=L-G;z<L;z+=G)O+=(D[X]-D[z])*(D[z+1]+D[X+1]),X=z;return O}S.flatten=function(D){for(var B=D[0][0].length,L={vertices:[],holes:[],dimensions:B},G=0,O=0;O<D.length;O++){for(var z=0;z<D[O].length;z++)for(var X=0;X<B;X++)L.vertices.push(D[O][z][X]);O>0&&(G+=D[O-1].length,L.holes.push(G))}return L},p.exports=S},13829:(p,S,t)=>{/**
 */var d=t(83419),c=t(25836),h=1e-6,r=new d({initialize:function(l){this.val=new Float32Array(16),l?this.copy(l):this.identity()},clone:function(){return new r(this)},set:function(a){return this.copy(a)},setValues:function(a,l,f,u,v,m,x,g,y,T,C,E,M,P,A,R){var F=this.val;return F[0]=a,F[1]=l,F[2]=f,F[3]=u,F[4]=v,F[5]=m,F[6]=x,F[7]=g,F[8]=y,F[9]=T,F[10]=C,F[11]=E,F[12]=M,F[13]=P,F[14]=A,F[15]=R,this},copy:function(a){var l=a.val;return this.setValues(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},fromArray:function(a){return this.setValues(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(a,l,f){var u=n.fromQuat(f),v=u.val,m=l.x,x=l.y,g=l.z;return this.setValues(v[0]*m,v[1]*m,v[2]*m,0,v[4]*x,v[5]*x,v[6]*x,0,v[8]*g,v[9]*g,v[10]*g,0,a.x,a.y,a.z,1)},xyz:function(a,l,f){this.identity();var u=this.val;return u[12]=a,u[13]=l,u[14]=f,this},scaling:function(a,l,f){this.zero();var u=this.val;return u[0]=a,u[5]=l,u[10]=f,u[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var a=this.val,l=a[1],f=a[2],u=a[3],v=a[6],m=a[7],x=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=l,a[6]=a[9],a[7]=a[13],a[8]=f,a[9]=v,a[11]=a[14],a[12]=u,a[13]=m,a[14]=x,this},getInverse:function(a){return this.copy(a),this.invert()},invert:function(){var a=this.val,l=a[0],f=a[1],u=a[2],v=a[3],m=a[4],x=a[5],g=a[6],y=a[7],T=a[8],C=a[9],E=a[10],M=a[11],P=a[12],A=a[13],R=a[14],F=a[15],w=l*x-f*m,I=l*g-u*m,U=l*y-v*m,N=f*g-u*x,D=f*y-v*x,B=u*y-v*g,L=T*A-C*P,G=T*R-E*P,O=T*F-M*P,z=C*R-E*A,X=C*F-M*A,V=E*F-M*R,Y=w*V-I*X+U*z+N*O-D*G+B*L;return Y?(Y=1/Y,this.setValues((x*V-g*X+y*z)*Y,(u*X-f*V-v*z)*Y,(A*B-R*D+F*N)*Y,(E*D-C*B-M*N)*Y,(g*O-m*V-y*G)*Y,(l*V-u*O+v*G)*Y,(R*U-P*B-F*I)*Y,(T*B-E*U+M*I)*Y,(m*X-x*O+y*L)*Y,(f*O-l*X-v*L)*Y,(P*D-A*U+F*w)*Y,(C*U-T*D-M*w)*Y,(x*G-m*z-g*L)*Y,(l*z-f*G+u*L)*Y,(A*I-P*N-R*w)*Y,(T*N-C*I+E*w)*Y)):this},adjoint:function(){var a=this.val,l=a[0],f=a[1],u=a[2],v=a[3],m=a[4],x=a[5],g=a[6],y=a[7],T=a[8],C=a[9],E=a[10],M=a[11],P=a[12],A=a[13],R=a[14],F=a[15];return this.setValues(x*(E*F-M*R)-C*(g*F-y*R)+A*(g*M-y*E),-(f*(E*F-M*R)-C*(u*F-v*R)+A*(u*M-v*E)),f*(g*F-y*R)-x*(u*F-v*R)+A*(u*y-v*g),-(f*(g*M-y*E)-x*(u*M-v*E)+C*(u*y-v*g)),-(m*(E*F-M*R)-T*(g*F-y*R)+P*(g*M-y*E)),l*(E*F-M*R)-T*(u*F-v*R)+P*(u*M-v*E),-(l*(g*F-y*R)-m*(u*F-v*R)+P*(u*y-v*g)),l*(g*M-y*E)-m*(u*M-v*E)+T*(u*y-v*g),m*(C*F-M*A)-T*(x*F-y*A)+P*(x*M-y*C),-(l*(C*F-M*A)-T*(f*F-v*A)+P*(f*M-v*C)),l*(x*F-y*A)-m*(f*F-v*A)+P*(f*y-v*x),-(l*(x*M-y*C)-m*(f*M-v*C)+T*(f*y-v*x)),-(m*(C*R-E*A)-T*(x*R-g*A)+P*(x*E-g*C)),l*(C*R-E*A)-T*(f*R-u*A)+P*(f*E-u*C),-(l*(x*R-g*A)-m*(f*R-u*A)+P*(f*g-u*x)),l*(x*E-g*C)-m*(f*E-u*C)+T*(f*g-u*x))},determinant:function(){var a=this.val,l=a[0],f=a[1],u=a[2],v=a[3],m=a[4],x=a[5],g=a[6],y=a[7],T=a[8],C=a[9],E=a[10],M=a[11],P=a[12],A=a[13],R=a[14],F=a[15],w=l*x-f*m,I=l*g-u*m,U=l*y-v*m,N=f*g-u*x,D=f*y-v*x,B=u*y-v*g,L=T*A-C*P,G=T*R-E*P,O=T*F-M*P,z=C*R-E*A,X=C*F-M*A,V=E*F-M*R;return w*V-I*X+U*z+N*O-D*G+B*L},multiply:function(a){var l=this.val,f=l[0],u=l[1],v=l[2],m=l[3],x=l[4],g=l[5],y=l[6],T=l[7],C=l[8],E=l[9],M=l[10],P=l[11],A=l[12],R=l[13],F=l[14],w=l[15],I=a.val,U=I[0],N=I[1],D=I[2],B=I[3];return l[0]=U*f+N*x+D*C+B*A,l[1]=U*u+N*g+D*E+B*R,l[2]=U*v+N*y+D*M+B*F,l[3]=U*m+N*T+D*P+B*w,U=I[4],N=I[5],D=I[6],B=I[7],l[4]=U*f+N*x+D*C+B*A,l[5]=U*u+N*g+D*E+B*R,l[6]=U*v+N*y+D*M+B*F,l[7]=U*m+N*T+D*P+B*w,U=I[8],N=I[9],D=I[10],B=I[11],l[8]=U*f+N*x+D*C+B*A,l[9]=U*u+N*g+D*E+B*R,l[10]=U*v+N*y+D*M+B*F,l[11]=U*m+N*T+D*P+B*w,U=I[12],N=I[13],D=I[14],B=I[15],l[12]=U*f+N*x+D*C+B*A,l[13]=U*u+N*g+D*E+B*R,l[14]=U*v+N*y+D*M+B*F,l[15]=U*m+N*T+D*P+B*w,this},multiplyLocal:function(a){var l=this.val,f=a.val;return this.setValues(l[0]*f[0]+l[1]*f[4]+l[2]*f[8]+l[3]*f[12],l[0]*f[1]+l[1]*f[5]+l[2]*f[9]+l[3]*f[13],l[0]*f[2]+l[1]*f[6]+l[2]*f[10]+l[3]*f[14],l[0]*f[3]+l[1]*f[7]+l[2]*f[11]+l[3]*f[15],l[4]*f[0]+l[5]*f[4]+l[6]*f[8]+l[7]*f[12],l[4]*f[1]+l[5]*f[5]+l[6]*f[9]+l[7]*f[13],l[4]*f[2]+l[5]*f[6]+l[6]*f[10]+l[7]*f[14],l[4]*f[3]+l[5]*f[7]+l[6]*f[11]+l[7]*f[15],l[8]*f[0]+l[9]*f[4]+l[10]*f[8]+l[11]*f[12],l[8]*f[1]+l[9]*f[5]+l[10]*f[9]+l[11]*f[13],l[8]*f[2]+l[9]*f[6]+l[10]*f[10]+l[11]*f[14],l[8]*f[3]+l[9]*f[7]+l[10]*f[11]+l[11]*f[15],l[12]*f[0]+l[13]*f[4]+l[14]*f[8]+l[15]*f[12],l[12]*f[1]+l[13]*f[5]+l[14]*f[9]+l[15]*f[13],l[12]*f[2]+l[13]*f[6]+l[14]*f[10]+l[15]*f[14],l[12]*f[3]+l[13]*f[7]+l[14]*f[11]+l[15]*f[15])},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,l){var f=a.val,u=l.val,v=f[0],m=f[4],x=f[8],g=f[12],y=f[1],T=f[5],C=f[9],E=f[13],M=f[2],P=f[6],A=f[10],R=f[14],F=f[3],w=f[7],I=f[11],U=f[15],N=u[0],D=u[4],B=u[8],L=u[12],G=u[1],O=u[5],z=u[9],X=u[13],V=u[2],Y=u[6],W=u[10],H=u[14],K=u[3],b=u[7],Q=u[11],j=u[15];return this.setValues(v*N+m*G+x*V+g*K,y*N+T*G+C*V+E*K,M*N+P*G+A*V+R*K,F*N+w*G+I*V+U*K,v*D+m*O+x*Y+g*b,y*D+T*O+C*Y+E*b,M*D+P*O+A*Y+R*b,F*D+w*O+I*Y+U*b,v*B+m*z+x*W+g*Q,y*B+T*z+C*W+E*Q,M*B+P*z+A*W+R*Q,F*B+w*z+I*W+U*Q,v*L+m*X+x*H+g*j,y*L+T*X+C*H+E*j,M*L+P*X+A*H+R*j,F*L+w*X+I*H+U*j)},translate:function(a){return this.translateXYZ(a.x,a.y,a.z)},translateXYZ:function(a,l,f){var u=this.val;return u[12]=u[0]*a+u[4]*l+u[8]*f+u[12],u[13]=u[1]*a+u[5]*l+u[9]*f+u[13],u[14]=u[2]*a+u[6]*l+u[10]*f+u[14],u[15]=u[3]*a+u[7]*l+u[11]*f+u[15],this},scale:function(a){return this.scaleXYZ(a.x,a.y,a.z)},scaleXYZ:function(a,l,f){var u=this.val;return u[0]=u[0]*a,u[1]=u[1]*a,u[2]=u[2]*a,u[3]=u[3]*a,u[4]=u[4]*l,u[5]=u[5]*l,u[6]=u[6]*l,u[7]=u[7]*l,u[8]=u[8]*f,u[9]=u[9]*f,u[10]=u[10]*f,u[11]=u[11]*f,this},makeRotationAxis:function(a,l){var f=Math.cos(l),u=Math.sin(l),v=1-f,m=a.x,x=a.y,g=a.z,y=v*m,T=v*x;return this.setValues(y*m+f,y*x-u*g,y*g+u*x,0,y*x+u*g,T*x+f,T*g-u*m,0,y*g-u*x,T*g+u*m,v*g*g+f,0,0,0,0,1)},rotate:function(a,l){var f=this.val,u=l.x,v=l.y,m=l.z,x=Math.sqrt(u*u+v*v+m*m);if(Math.abs(x)<h)return this;x=1/x,u*=x,v*=x,m*=x;var g=Math.sin(a),y=Math.cos(a),T=1-y,C=f[0],E=f[1],M=f[2],P=f[3],A=f[4],R=f[5],F=f[6],w=f[7],I=f[8],U=f[9],N=f[10],D=f[11],B=f[12],L=f[13],G=f[14],O=f[15],z=u*u*T+y,X=v*u*T+m*g,V=m*u*T-v*g,Y=u*v*T-m*g,W=v*v*T+y,H=m*v*T+u*g,K=u*m*T+v*g,b=v*m*T-u*g,Q=m*m*T+y;return this.setValues(C*z+A*X+I*V,E*z+R*X+U*V,M*z+F*X+N*V,P*z+w*X+D*V,C*Y+A*W+I*H,E*Y+R*W+U*H,M*Y+F*W+N*H,P*Y+w*W+D*H,C*K+A*b+I*Q,E*K+R*b+U*Q,M*K+F*b+N*Q,P*K+w*b+D*Q,B,L,G,O)},rotateX:function(a){var l=this.val,f=Math.sin(a),u=Math.cos(a),v=l[4],m=l[5],x=l[6],g=l[7],y=l[8],T=l[9],C=l[10],E=l[11];return l[4]=v*u+y*f,l[5]=m*u+T*f,l[6]=x*u+C*f,l[7]=g*u+E*f,l[8]=y*u-v*f,l[9]=T*u-m*f,l[10]=C*u-x*f,l[11]=E*u-g*f,this},rotateY:function(a){var l=this.val,f=Math.sin(a),u=Math.cos(a),v=l[0],m=l[1],x=l[2],g=l[3],y=l[8],T=l[9],C=l[10],E=l[11];return l[0]=v*u-y*f,l[1]=m*u-T*f,l[2]=x*u-C*f,l[3]=g*u-E*f,l[8]=v*f+y*u,l[9]=m*f+T*u,l[10]=x*f+C*u,l[11]=g*f+E*u,this},rotateZ:function(a){var l=this.val,f=Math.sin(a),u=Math.cos(a),v=l[0],m=l[1],x=l[2],g=l[3],y=l[4],T=l[5],C=l[6],E=l[7];return l[0]=v*u+y*f,l[1]=m*u+T*f,l[2]=x*u+C*f,l[3]=g*u+E*f,l[4]=y*u-v*f,l[5]=T*u-m*f,l[6]=C*u-x*f,l[7]=E*u-g*f,this},fromRotationTranslation:function(a,l){var f=a.x,u=a.y,v=a.z,m=a.w,x=f+f,g=u+u,y=v+v,T=f*x,C=f*g,E=f*y,M=u*g,P=u*y,A=v*y,R=m*x,F=m*g,w=m*y;return this.setValues(1-(M+A),C+w,E-F,0,C-w,1-(T+A),P+R,0,E+F,P-R,1-(T+M),0,l.x,l.y,l.z,1)},fromQuat:function(a){var l=a.x,f=a.y,u=a.z,v=a.w,m=l+l,x=f+f,g=u+u,y=l*m,T=l*x,C=l*g,E=f*x,M=f*g,P=u*g,A=v*m,R=v*x,F=v*g;return this.setValues(1-(E+P),T+F,C-R,0,T-F,1-(y+P),M+A,0,C+R,M-A,1-(y+E),0,0,0,0,1)},frustum:function(a,l,f,u,v,m){var x=1/(l-a),g=1/(u-f),y=1/(v-m);return this.setValues(v*2*x,0,0,0,0,v*2*g,0,0,(l+a)*x,(u+f)*g,(m+v)*y,-1,0,0,m*v*2*y,0)},perspective:function(a,l,f,u){var v=1/Math.tan(a/2),m=1/(f-u);return this.setValues(v/l,0,0,0,0,v,0,0,0,0,(u+f)*m,-1,0,0,2*u*f*m,0)},perspectiveLH:function(a,l,f,u){return this.setValues(2*f/a,0,0,0,0,2*f/l,0,0,0,0,-u/(f-u),1,0,0,f*u/(f-u),0)},ortho:function(a,l,f,u,v,m){var x=a-l,g=f-u,y=v-m;return x=x===0?x:1/x,g=g===0?g:1/g,y=y===0?y:1/y,this.setValues(-2*x,0,0,0,0,-2*g,0,0,0,0,2*y,0,(a+l)*x,(u+f)*g,(m+v)*y,1)},lookAtRH:function(a,l,f){var u=this.val;return i.subVectors(a,l),i.lengthSq()===0&&(i.z=1),i.normalize(),s.crossVectors(f,i),s.lengthSq()===0&&(Math.abs(f.z)===1?i.x+=1e-4:i.z+=1e-4,i.normalize(),s.crossVectors(f,i)),s.normalize(),o.crossVectors(i,s),u[0]=s.x,u[1]=s.y,u[2]=s.z,u[4]=o.x,u[5]=o.y,u[6]=o.z,u[8]=i.x,u[9]=i.y,u[10]=i.z,this},lookAt:function(a,l,f){var u=a.x,v=a.y,m=a.z,x=f.x,g=f.y,y=f.z,T=l.x,C=l.y,E=l.z;if(Math.abs(u-T)<h&&Math.abs(v-C)<h&&Math.abs(m-E)<h)return this.identity();var M=u-T,P=v-C,A=m-E,R=1/Math.sqrt(M*M+P*P+A*A);M*=R,P*=R,A*=R;var F=g*A-y*P,w=y*M-x*A,I=x*P-g*M;R=Math.sqrt(F*F+w*w+I*I),R?(R=1/R,F*=R,w*=R,I*=R):(F=0,w=0,I=0);var U=P*I-A*w,N=A*F-M*I,D=M*w-P*F;return R=Math.sqrt(U*U+N*N+D*D),R?(R=1/R,U*=R,N*=R,D*=R):(U=0,N=0,D=0),this.setValues(F,U,M,0,w,N,P,0,I,D,A,0,-(F*u+w*v+I*m),-(U*u+N*v+D*m),-(M*u+P*v+A*m),1)},yawPitchRoll:function(a,l,f){this.zero(),n.zero(),e.zero();var u=this.val,v=n.val,m=e.val,x=Math.sin(f),g=Math.cos(f);return u[10]=1,u[15]=1,u[0]=g,u[1]=x,u[4]=-x,u[5]=g,x=Math.sin(l),g=Math.cos(l),v[0]=1,v[15]=1,v[5]=g,v[10]=g,v[9]=-x,v[6]=x,x=Math.sin(a),g=Math.cos(a),m[5]=1,m[15]=1,m[0]=g,m[2]=-x,m[8]=x,m[10]=g,this.multiplyLocal(n),this.multiplyLocal(e),this},setWorldMatrix:function(a,l,f,u,v){return this.yawPitchRoll(a.y,a.x,a.z),n.scaling(f.x,f.y,f.z),e.xyz(l.x,l.y,l.z),this.multiplyLocal(n),this.multiplyLocal(e),u&&this.multiplyLocal(u),v&&this.multiplyLocal(v),this},multiplyToMat4:function(a,l){var f=this.val,u=a.val,v=f[0],m=f[1],x=f[2],g=f[3],y=f[4],T=f[5],C=f[6],E=f[7],M=f[8],P=f[9],A=f[10],R=f[11],F=f[12],w=f[13],I=f[14],U=f[15],N=u[0],D=u[1],B=u[2],L=u[3],G=u[4],O=u[5],z=u[6],X=u[7],V=u[8],Y=u[9],W=u[10],H=u[11],K=u[12],b=u[13],Q=u[14],j=u[15];return l.setValues(N*v+D*y+B*M+L*F,D*m+D*T+B*P+L*w,B*x+D*C+B*A+L*I,L*g+D*E+B*R+L*U,G*v+O*y+z*M+X*F,G*m+O*T+z*P+X*w,G*x+O*C+z*A+X*I,G*g+O*E+z*R+X*U,V*v+Y*y+W*M+H*F,V*m+Y*T+W*P+H*w,V*x+Y*C+W*A+H*I,V*g+Y*E+W*R+H*U,K*v+b*y+Q*M+j*F,K*m+b*T+Q*P+j*w,K*x+b*C+Q*A+j*I,K*g+b*E+Q*R+j*U)},fromRotationXYTranslation:function(a,l,f){var u=l.x,v=l.y,m=l.z,x=Math.sin(a.x),g=Math.cos(a.x),y=Math.sin(a.y),T=Math.cos(a.y),C=u,E=v,M=m,P=-x,A=0-P*y,R=0-g*y,F=P*T,w=g*T;return f||(C=T*u+y*m,E=A*u+g*v+F*m,M=R*u+x*v+w*m),this.setValues(T,A,R,0,0,g,x,0,y,F,w,0,C,E,M,1)},getMaxScaleOnAxis:function(){var a=this.val,l=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],f=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],u=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return Math.sqrt(Math.max(l,f,u))}}),n=new r,e=new r,s=new c,o=new c,i=new c;p.exports=r},86883:p=>{/**
 */var d=t(55495),c=t(37742),h=t(45319),r=t(83419),n=t(79342),e=t(37747),s=t(20339),o=t(52816),i=t(50792),a=t(63012),l=t(43855),f=t(5470),u=t(94977),v=t(64897),m=t(45170),x=t(96523),g=t(35154),y=t(36383),T=t(25774),C=t(96602),E=t(87841),M=t(59542),P=t(40012),A=t(14087),R=t(89936),F=t(35072),w=t(72624),I=t(2483),U=t(61340),N=t(26099),D=t(15994),B=new r({Extends:i,initialize:function(G,O){i.call(this),this.scene=G,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new T,this.gravity=new N(g(O,"gravity.x",0),g(O,"gravity.y",0)),this.bounds=new E(g(O,"x",0),g(O,"y",0),g(O,"width",G.sys.scale.width),g(O,"height",G.sys.scale.height)),this.checkCollision={up:g(O,"checkCollision.up",!0),down:g(O,"checkCollision.down",!0),left:g(O,"checkCollision.left",!0),right:g(O,"checkCollision.right",!0)},this.fps=g(O,"fps",60),this.fixedStep=g(O,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=g(O,"timeScale",1),this.OVERLAP_BIAS=g(O,"overlapBias",4),this.TILE_BIAS=g(O,"tileBias",16),this.forceX=g(O,"forceX",!1),this.isPaused=g(O,"isPaused",!1),this._total=0,this.drawDebug=g(O,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:g(O,"debugShowBody",!0),debugShowStaticBody:g(O,"debugShowStaticBody",!0),debugShowVelocity:g(O,"debugShowVelocity",!0),bodyDebugColor:g(O,"debugBodyColor",16711935),staticBodyDebugColor:g(O,"debugStaticBodyColor",255),velocityDebugColor:g(O,"debugVelocityColor",65280)},this.maxEntries=g(O,"maxEntries",16),this.useTree=g(O,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(L,G){G===void 0&&(G=e.DYNAMIC_BODY),Array.isArray(L)||(L=[L]);for(var O=0;O<L.length;O++){var z=L[O];if(z.isParent)for(var X=z.getChildren(),V=0;V<X.length;V++){var Y=X[V];Y.isParent?this.enable(Y,G):this.enableBody(Y,G)}else this.enableBody(z,G)}},enableBody:function(L,G){return G===void 0&&(G=e.DYNAMIC_BODY),L.hasTransformComponent&&(L.body||(G===e.DYNAMIC_BODY?L.body=new c(this,L):G===e.STATIC_BODY&&(L.body=new w(this,L))),this.add(L.body)),L},add:function(L){return L.physicsType===e.DYNAMIC_BODY?this.bodies.set(L):L.physicsType===e.STATIC_BODY&&(this.staticBodies.set(L),this.staticTree.insert(L)),L.enable=!0,L},disable:function(L){Array.isArray(L)||(L=[L]);for(var G=0;G<L.length;G++){var O=L[G];if(O.isParent)for(var z=O.getChildren(),X=0;X<z.length;X++){var V=z[X];V.isParent?this.disable(V):this.disableBody(V.body)}else this.disableBody(O.body)}},disableBody:function(L){this.remove(L),L.enable=!1},remove:function(L){L.physicsType===e.DYNAMIC_BODY?(this.tree.remove(L),this.bodies.delete(L)):L.physicsType===e.STATIC_BODY&&(this.staticBodies.delete(L),this.staticTree.remove(L))},createDebugGraphic:function(){var L=this.scene.sys.add.graphics({x:0,y:0});return L.setDepth(Number.MAX_VALUE),this.debugGraphic=L,this.drawDebug=!0,L},setBounds:function(L,G,O,z,X,V,Y,W){return this.bounds.setTo(L,G,O,z),X!==void 0&&this.setBoundsCollision(X,V,Y,W),this},setBoundsCollision:function(L,G,O,z){return L===void 0&&(L=!0),G===void 0&&(G=!0),O===void 0&&(O=!0),z===void 0&&(z=!0),this.checkCollision.left=L,this.checkCollision.right=G,this.checkCollision.up=O,this.checkCollision.down=z,this},pause:function(){return this.isPaused=!0,this.emit(a.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(a.RESUME),this},addCollider:function(L,G,O,z,X){O===void 0&&(O=null),z===void 0&&(z=null),X===void 0&&(X=O);var V=new n(this,!1,L,G,O,z,X);return this.colliders.add(V),V},addOverlap:function(L,G,O,z,X){O===void 0&&(O=null),z===void 0&&(z=null),X===void 0&&(X=O);var V=new n(this,!0,L,G,O,z,X);return this.colliders.add(V),V},removeCollider:function(L){return this.colliders.remove(L),this},setFPS:function(L){return this.fps=L,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(L,G){if(!(this.isPaused||this.bodies.size===0)){var O,z=this._frameTime,X=this._frameTimeMS*this.timeScale;this._elapsed+=G;var V,Y=this.bodies.entries,W=this._elapsed>=X;for(this.fixedStep||(z=G*.001,W=!0,this._elapsed=0),O=0;O<Y.length;O++)V=Y[O],V.enable&&V.preUpdate(W,z);if(W){this._elapsed-=X,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Y));var H=this.colliders.update();for(O=0;O<H.length;O++){var K=H[O];K.active&&K.update()}this.emit(a.WORLD_STEP,z)}for(;this._elapsed>=X;)this._elapsed-=X,this.step(z)}},step:function(L){var G,O,z=this.bodies.entries,X=z.length;for(G=0;G<X;G++)O=z[G],O.enable&&O.update(L);this.useTree&&(this.tree.clear(),this.tree.load(z));var V=this.colliders.update();for(G=0;G<V.length;G++){var Y=V[G];Y.active&&Y.update()}this.emit(a.WORLD_STEP,L),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var L,G,O=this.bodies.entries,z=O.length,X=this.bodies,V=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,L=0;L<z;L++)G=O[L],G.enable&&G.postUpdate();if(this.drawDebug){var Y=this.debugGraphic;for(Y.clear(),L=0;L<z;L++)G=O[L],G.willDrawDebug()&&G.drawDebug(Y);for(O=V.entries,z=O.length,L=0;L<z;L++)G=O[L],G.willDrawDebug()&&G.drawDebug(Y)}var W=this.pendingDestroy;if(W.size>0){var H=this.tree,K=this.staticTree;for(O=W.entries,z=O.length,L=0;L<z;L++)G=O[L],G.physicsType===e.DYNAMIC_BODY?(H.remove(G),X.delete(G)):G.physicsType===e.STATIC_BODY&&(K.remove(G),V.delete(G)),G.world=void 0,G.gameObject=void 0;W.clear()}},updateMotion:function(L,G){L.allowRotation&&this.computeAngularVelocity(L,G),this.computeVelocity(L,G)},computeAngularVelocity:function(L,G){var O=L.angularVelocity,z=L.angularAcceleration,X=L.angularDrag,V=L.maxAngular;z?O+=z*G:L.allowDrag&&X&&(X*=G,f(O-X,0,.1)?O-=X:u(O+X,0,.1)?O+=X:O=0),O=h(O,-V,V);var Y=O-L.angularVelocity;L.angularVelocity+=Y,L.rotation+=L.angularVelocity*G},computeVelocity:function(L,G){var O=L.velocity.x,z=L.acceleration.x,X=L.drag.x,V=L.maxVelocity.x,Y=L.velocity.y,W=L.acceleration.y,H=L.drag.y,K=L.maxVelocity.y,b=L.speed,Q=L.maxSpeed,j=L.allowDrag,J=L.useDamping;L.allowGravity&&(O+=(this.gravity.x+L.gravity.x)*G,Y+=(this.gravity.y+L.gravity.y)*G),z?O+=z*G:j&&X&&(J?(X=Math.pow(X,G),O*=X,b=Math.sqrt(O*O+Y*Y),l(b,0,.001)&&(O=0)):(X*=G,f(O-X,0,.01)?O-=X:u(O+X,0,.01)?O+=X:O=0)),W?Y+=W*G:j&&H&&(J?(H=Math.pow(H,G),Y*=H,b=Math.sqrt(O*O+Y*Y),l(b,0,.001)&&(Y=0)):(H*=G,f(Y-H,0,.01)?Y-=H:u(Y+H,0,.01)?Y+=H:Y=0)),O=h(O,-V,V),Y=h(Y,-K,K),L.velocity.set(O,Y),Q>-1&&L.velocity.length()>Q&&(L.velocity.normalize().scale(Q),b=Q),L.speed=b},separate:function(L,G,O,z,X){var V,Y,W=!1,H=!0;if(!L.enable||!G.enable||L.checkCollision.none||G.checkCollision.none||!this.intersects(L,G)||!(L.collisionMask&G.collisionCategory)||!(G.collisionMask&L.collisionCategory)||O&&O.call(z,L.gameObject||L,G.gameObject||G)===!1)return W;if(L.isCircle||G.isCircle){var K=this.separateCircle(L,G,X);K.result?(W=!0,H=!1):(V=K.x,Y=K.y,H=!0)}if(H){var b=!1,Q=!1,j=this.OVERLAP_BIAS;X?(b=A(L,G,X,j,V),Q=R(L,G,X,j,Y)):this.forceX||Math.abs(this.gravity.y+L.gravity.y)<Math.abs(this.gravity.x+L.gravity.x)?(b=A(L,G,X,j,V),this.intersects(L,G)&&(Q=R(L,G,X,j,Y))):(Q=R(L,G,X,j,Y),this.intersects(L,G)&&(b=A(L,G,X,j,V))),W=b||Q}return W&&(X?(L.onOverlap||G.onOverlap)&&this.emit(a.OVERLAP,L.gameObject,G.gameObject,L,G):(L.onCollide||G.onCollide)&&this.emit(a.COLLIDE,L.gameObject,G.gameObject,L,G)),W},separateCircle:function(L,G,O){v(L,G,!1,0),m(L,G,!1,0);var z=L.isCircle,X=G.isCircle,V=L.center,Y=G.center,W=L.immovable,H=G.immovable,K=L.velocity,b=G.velocity,Q=0,j=!0;if(z!==X){j=!1;var J=V.x,it=V.y,st=L.halfWidth,nt=G.position.x,$=G.position.y,_=G.right,tt=G.bottom;X&&(J=Y.x,it=Y.y,st=G.halfWidth,nt=L.position.x,$=L.position.y,_=L.right,tt=L.bottom),it<$?J<nt?Q=s(J,it,nt,$)-st:J>_&&(Q=s(J,it,_,$)-st):it>tt&&(J<nt?Q=s(J,it,nt,tt)-st:J>_&&(Q=s(J,it,_,tt)-st)),Q*=-1}else Q=L.halfWidth+G.halfWidth-o(V,Y);L.overlapR=Q,G.overlapR=Q;var rt=d(V,Y),ht=(Q+y.EPSILON)*Math.cos(rt),ut=(Q+y.EPSILON)*Math.sin(rt),at={overlap:Q,result:!1,x:ht,y:ut};if(O&&(!j||j&&Q!==0))return at.result=!0,at;if(!j&&Q===0||W&&H||L.customSeparateX||G.customSeparateX)return at.x=void 0,at.y=void 0,at;var ot=!L.pushable&&!G.pushable;if(j){var dt=V.x-Y.x,mt=V.y-Y.y,lt=Math.sqrt(Math.pow(dt,2)+Math.pow(mt,2)),vt=(Y.x-V.x)/lt||0,ct=(Y.y-V.y)/lt||0,gt=2*(K.x*vt+K.y*ct-b.x*vt-b.y*ct)/(L.mass+G.mass);(W||H||!L.pushable||!G.pushable)&&(gt*=2),!W&&L.pushable&&(K.x=K.x-gt/L.mass*vt,K.y=K.y-gt/L.mass*ct,K.multiply(L.bounce)),!H&&G.pushable&&(b.x=b.x+gt/G.mass*vt,b.y=b.y+gt/G.mass*ct,b.multiply(G.bounce)),!W&&!H&&(ht*=.5,ut*=.5),(!W||L.pushable||ot)&&(L.x-=ht,L.y-=ut,L.updateCenter()),(!H||G.pushable||ot)&&(G.x+=ht,G.y+=ut,G.updateCenter()),at.result=!0}else!W&&(L.pushable||ot)&&(L.x-=ht,L.y-=ut,L.updateCenter()),!H&&(G.pushable||ot)&&(G.x+=ht,G.y+=ut,G.updateCenter()),at.x=void 0,at.y=void 0;return at},intersects:function(L,G){return L===G?!1:!L.isCircle&&!G.isCircle?!(L.right<=G.left||L.bottom<=G.top||L.left>=G.right||L.top>=G.bottom):L.isCircle?G.isCircle?o(L.center,G.center)<=L.halfWidth+G.halfWidth:this.circleBodyIntersects(L,G):this.circleBodyIntersects(G,L)},circleBodyIntersects:function(L,G){var O=h(L.center.x,G.left,G.right),z=h(L.center.y,G.top,G.bottom),X=(L.center.x-O)*(L.center.x-O),V=(L.center.y-z)*(L.center.y-z);return X+V<=L.halfWidth*L.halfWidth},overlap:function(L,G,O,z,X){return O===void 0&&(O=null),z===void 0&&(z=null),X===void 0&&(X=O),this.collideObjects(L,G,O,z,X,!0)},collide:function(L,G,O,z,X){return O===void 0&&(O=null),z===void 0&&(z=null),X===void 0&&(X=O),this.collideObjects(L,G,O,z,X,!1)},collideObjects:function(L,G,O,z,X,V){var Y,W;L.isParent&&(L.physicsType===void 0||G===void 0||L===G)&&(L=L.children.entries),G&&G.isParent&&G.physicsType===void 0&&(G=G.children.entries);var H=Array.isArray(L),K=Array.isArray(G);if(this._total=0,!H&&!K)this.collideHandler(L,G,O,z,X,V);else if(!H&&K)for(Y=0;Y<G.length;Y++)this.collideHandler(L,G[Y],O,z,X,V);else if(H&&!K)if(G)for(Y=0;Y<L.length;Y++)this.collideHandler(L[Y],G,O,z,X,V);else for(Y=0;Y<L.length;Y++){var b=L[Y];for(W=Y+1;W<L.length;W++)Y!==W&&this.collideHandler(b,L[W],O,z,X,V)}else for(Y=0;Y<L.length;Y++)for(W=0;W<G.length;W++)this.collideHandler(L[Y],G[W],O,z,X,V);return this._total>0},collideHandler:function(L,G,O,z,X,V){if(G===void 0&&L.isParent)return this.collideGroupVsGroup(L,L,O,z,X,V);if(!L||!G)return!1;if(L.body||L.isBody){if(G.body||G.isBody)return this.collideSpriteVsSprite(L,G,O,z,X,V);if(G.isParent)return this.collideSpriteVsGroup(L,G,O,z,X,V);if(G.isTilemap)return this.collideSpriteVsTilemapLayer(L,G,O,z,X,V)}else if(L.isParent){if(G.body||G.isBody)return this.collideSpriteVsGroup(G,L,O,z,X,V);if(G.isParent)return this.collideGroupVsGroup(L,G,O,z,X,V);if(G.isTilemap)return this.collideGroupVsTilemapLayer(L,G,O,z,X,V)}else if(L.isTilemap){if(G.body||G.isBody)return this.collideSpriteVsTilemapLayer(G,L,O,z,X,V);if(G.isParent)return this.collideGroupVsTilemapLayer(G,L,O,z,X,V)}},canCollide:function(L,G){return L&&G&&(L.collisionMask&G.collisionCategory)!==0&&(G.collisionMask&L.collisionCategory)!==0},collideSpriteVsSprite:function(L,G,O,z,X,V){var Y=L.isBody?L:L.body,W=G.isBody?G:G.body;return this.canCollide(Y,W)?(this.separate(Y,W,z,X,V)&&(O&&O.call(X,L,G),this._total++),!0):!1},collideSpriteVsGroup:function(L,G,O,z,X,V){var Y=L.isBody?L:L.body;if(!(G.getLength()===0||!Y||!Y.enable||Y.checkCollision.none||!this.canCollide(Y,G))){var W,H,K;if(this.useTree||G.physicsType===e.STATIC_BODY){var b=this.treeMinMax;b.minX=Y.left,b.minY=Y.top,b.maxX=Y.right,b.maxY=Y.bottom;var Q=G.physicsType===e.DYNAMIC_BODY?this.tree.search(b):this.staticTree.search(b);for(H=Q.length,W=0;W<H;W++)K=Q[W],!(Y===K||!K.enable||K.checkCollision.none||!G.contains(K.gameObject))&&this.separate(Y,K,z,X,V)&&(O&&O.call(X,Y.gameObject,K.gameObject),this._total++)}else{var j=G.getChildren(),J=G.children.entries.indexOf(L);for(H=j.length,W=0;W<H;W++)K=j[W].body,!(!K||W===J||!K.enable)&&this.separate(Y,K,z,X,V)&&(O&&O.call(X,Y.gameObject,K.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(L,G,O,z,X,V){if(!this.canCollide(L,G))return!1;var Y=L.getChildren();if(Y.length===0)return!1;for(var W=!1,H=0;H<Y.length;H++)(Y[H].body||Y[H].isBody)&&this.collideSpriteVsTilemapLayer(Y[H],G,O,z,X,V)&&(W=!0);return W},collideTiles:function(L,G,O,z,X){return G.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,G,O,z,X,!1,!1)},overlapTiles:function(L,G,O,z,X){return G.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,G,O,z,X,!0,!1)},collideSpriteVsTilemapLayer:function(L,G,O,z,X,V){var Y=L.isBody?L:L.body;if(!Y.enable||Y.checkCollision.none||!this.canCollide(Y,G))return!1;var W=G.layer,H=Y.x-W.tileWidth*G.scaleX,K=Y.y-W.tileHeight*G.scaleY,b=Y.width+W.tileWidth*G.scaleX,Q=Y.height+W.tileHeight*G.scaleY,j=V?null:this.tileFilterOptions,J=x(H,K,b,Q,j,G.scene.cameras.main,G.layer);return J.length===0?!1:this.collideSpriteVsTilesHandler(L,J,O,z,X,V,!0)},collideSpriteVsTilesHandler:function(L,G,O,z,X,V,Y){for(var W=L.isBody?L:L.body,H,K={left:0,right:0,top:0,bottom:0},b,Q=!1,j=0;j<G.length;j++){H=G[j],b=H.tilemapLayer;var J=b.tileToWorldXY(H.x,H.y);K.left=J.x,K.top=J.y,K.right=K.left+H.width*b.scaleX,K.bottom=K.top+H.height*b.scaleY,I(K,W)&&(!z||z.call(X,L,H))&&C(H,L)&&(V||P(j,W,H,K,b,this.TILE_BIAS,Y))&&(this._total++,Q=!0,O&&O.call(X,L,H),V&&W.onOverlap?this.emit(a.TILE_OVERLAP,L,H,W):W.onCollide&&this.emit(a.TILE_COLLIDE,L,H,W))}return Q},collideGroupVsGroup:function(L,G,O,z,X,V){if(!(L.getLength()===0||G.getLength()===0||!this.canCollide(L,G)))for(var Y=L.getChildren(),W=0;W<Y.length;W++)this.collideSpriteVsGroup(Y[W],G,O,z,X,V)},wrap:function(L,G){L.body?this.wrapObject(L,G):L.getChildren?this.wrapArray(L.getChildren(),G):Array.isArray(L)?this.wrapArray(L,G):this.wrapObject(L,G)},wrapArray:function(L,G){for(var O=0;O<L.length;O++)this.wrapObject(L[O],G)},wrapObject:function(L,G){G===void 0&&(G=0),L.x=D(L.x,this.bounds.left-G,this.bounds.right+G),L.y=D(L.y,this.bounds.top-G,this.bounds.bottom+G)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});p.exports=B},1093:p=>{/**
 */p.exports={BodyBounds:t(68174),Components:t(31884),Events:t(1121),Factory:t(28137),MatterGameObject:t(75803),Image:t(23181),Matter:t(19933),MatterPhysics:t(42045),PolyDecomp:t(55973),Sprite:t(34803),TileBody:t(73834),PhysicsEditorParser:t(19496),PhysicsJSONParser:t(85791),PointerConstraint:t(98713),World:t(68243)}},22562:(p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(31725),r=t(53614),n=t(53402),e=t(15647),s=t(66615);(function(){d._timeCorrection=!0,d._inertiaScale=4,d._nextCollidingGroupId=1,d._nextNonCollidingGroupId=-1,d._nextCategory=1,d._baseDelta=16.666666666666668,d.create=function(i){var a={id:n.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:i.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!i.hasOwnProperty("position")&&i.hasOwnProperty("vertices")?i.position=c.centre(i.vertices):i.hasOwnProperty("vertices")||(a.vertices=c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var l=n.extend(a,i);return o(l,i),l.setOnCollideWith=function(f,u){return u?this.onCollideWith[f.id]=u:delete this.onCollideWith[f.id],this},l},d.nextGroup=function(i){return i?d._nextNonCollidingGroupId--:d._nextCollidingGroupId++},d.nextCategory=function(){return d._nextCategory=d._nextCategory<<1,d._nextCategory};var o=function(i,a){if(a=a||{},d.set(i,{bounds:i.bounds||e.create(i.vertices),positionPrev:i.positionPrev||h.clone(i.position),anglePrev:i.anglePrev||i.angle,vertices:i.vertices,parts:i.parts||[i],isStatic:i.isStatic,isSleeping:i.isSleeping,parent:i.parent||i}),c.rotate(i.vertices,i.angle,i.position),s.rotate(i.axes,i.angle),e.update(i.bounds,i.vertices,i.velocity),d.set(i,{axes:a.axes||i.axes,area:a.area||i.area,mass:a.mass||i.mass,inertia:a.inertia||i.inertia}),i.parts.length===1){var l=i.bounds,f=i.centerOfMass,u=i.centerOffset,v=l.max.x-l.min.x,m=l.max.y-l.min.y;f.x=-(l.min.x-i.position.x)/v,f.y=-(l.min.y-i.position.y)/m,u.x=v*f.x,u.y=m*f.y}};d.set=function(i,a,l){var f;typeof a=="string"&&(f=a,a={},a[f]=l);for(f in a)if(Object.prototype.hasOwnProperty.call(a,f))switch(l=a[f],f){case"isStatic":d.setStatic(i,l);break;case"isSleeping":r.set(i,l);break;case"mass":d.setMass(i,l);break;case"density":d.setDensity(i,l);break;case"inertia":d.setInertia(i,l);break;case"vertices":d.setVertices(i,l);break;case"position":d.setPosition(i,l);break;case"angle":d.setAngle(i,l);break;case"velocity":d.setVelocity(i,l);break;case"angularVelocity":d.setAngularVelocity(i,l);break;case"speed":d.setSpeed(i,l);break;case"angularSpeed":d.setAngularSpeed(i,l);break;case"parts":d.setParts(i,l);break;case"centre":d.setCentre(i,l);break;default:i[f]=l}},d.setStatic=function(i,a){for(var l=0;l<i.parts.length;l++){var f=i.parts[l];a?(f.isStatic||(f._original={restitution:f.restitution,friction:f.friction,mass:f.mass,inertia:f.inertia,density:f.density,inverseMass:f.inverseMass,inverseInertia:f.inverseInertia}),f.restitution=0,f.friction=1,f.mass=f.inertia=f.density=1/0,f.inverseMass=f.inverseInertia=0,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.anglePrev=f.angle,f.angularVelocity=0,f.speed=0,f.angularSpeed=0,f.motion=0):f._original&&(f.restitution=f._original.restitution,f.friction=f._original.friction,f.mass=f._original.mass,f.inertia=f._original.inertia,f.density=f._original.density,f.inverseMass=f._original.inverseMass,f.inverseInertia=f._original.inverseInertia,f._original=null),f.isStatic=a}},d.setMass=function(i,a){var l=i.inertia/(i.mass/6);i.inertia=l*(a/6),i.inverseInertia=1/i.inertia,i.mass=a,i.inverseMass=1/i.mass,i.density=i.mass/i.area},d.setDensity=function(i,a){d.setMass(i,a*i.area),i.density=a},d.setInertia=function(i,a){i.inertia=a,i.inverseInertia=1/i.inertia},d.setVertices=function(i,a){a[0].body===i?i.vertices=a:i.vertices=c.create(a,i),i.axes=s.fromVertices(i.vertices),i.area=c.area(i.vertices),d.setMass(i,i.density*i.area);var l=c.centre(i.vertices);c.translate(i.vertices,l,-1),d.setInertia(i,d._inertiaScale*c.inertia(i.vertices,i.mass)),c.translate(i.vertices,i.position),e.update(i.bounds,i.vertices,i.velocity)},d.setParts=function(i,a,l){var f;for(a=a.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,f=0;f<a.length;f++){var u=a[f];u!==i&&(u.parent=i,i.parts.push(u))}if(i.parts.length!==1){if(l=typeof l<"u"?l:!0,l){var v=[];for(f=0;f<a.length;f++)v=v.concat(a[f].vertices);c.clockwiseSort(v);var m=c.hull(v),x=c.centre(m);d.setVertices(i,m),c.translate(i.vertices,x)}var g=d._totalProperties(i),y=g.centre.x,T=g.centre.y,C=i.bounds,E=i.centerOfMass,M=i.centerOffset;e.update(C,i.vertices,i.velocity),E.x=-(C.min.x-y)/(C.max.x-C.min.x),E.y=-(C.min.y-T)/(C.max.y-C.min.y),M.x=y,M.y=T,i.area=g.area,i.parent=i,i.position.x=y,i.position.y=T,i.positionPrev.x=y,i.positionPrev.y=T,d.setMass(i,g.mass),d.setInertia(i,g.inertia),d.setPosition(i,g.centre)}},d.setCentre=function(i,a,l){l?(i.positionPrev.x+=a.x,i.positionPrev.y+=a.y,i.position.x+=a.x,i.position.y+=a.y):(i.positionPrev.x=a.x-(i.position.x-i.positionPrev.x),i.positionPrev.y=a.y-(i.position.y-i.positionPrev.y),i.position.x=a.x,i.position.y=a.y)},d.setPosition=function(i,a,l){var f=h.sub(a,i.position);l?(i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.velocity.x=f.x,i.velocity.y=f.y,i.speed=h.magnitude(f)):(i.positionPrev.x+=f.x,i.positionPrev.y+=f.y);for(var u=0;u<i.parts.length;u++){var v=i.parts[u];v.position.x+=f.x,v.position.y+=f.y,c.translate(v.vertices,f),e.update(v.bounds,v.vertices,i.velocity)}},d.setAngle=function(i,a,l){var f=a-i.angle;l?(i.anglePrev=i.angle,i.angularVelocity=f,i.angularSpeed=Math.abs(f)):i.anglePrev+=f;for(var u=0;u<i.parts.length;u++){var v=i.parts[u];v.angle+=f,c.rotate(v.vertices,f,i.position),s.rotate(v.axes,f),e.update(v.bounds,v.vertices,i.velocity),u>0&&h.rotateAbout(v.position,f,i.position,v.position)}},d.setVelocity=function(i,a){var l=i.deltaTime/d._baseDelta;i.positionPrev.x=i.position.x-a.x*l,i.positionPrev.y=i.position.y-a.y*l,i.velocity.x=(i.position.x-i.positionPrev.x)/l,i.velocity.y=(i.position.y-i.positionPrev.y)/l,i.speed=h.magnitude(i.velocity)},d.getVelocity=function(i){var a=d._baseDelta/i.deltaTime;return{x:(i.position.x-i.positionPrev.x)*a,y:(i.position.y-i.positionPrev.y)*a}},d.getSpeed=function(i){return h.magnitude(d.getVelocity(i))},d.setSpeed=function(i,a){d.setVelocity(i,h.mult(h.normalise(d.getVelocity(i)),a))},d.setAngularVelocity=function(i,a){var l=i.deltaTime/d._baseDelta;i.anglePrev=i.angle-a*l,i.angularVelocity=(i.angle-i.anglePrev)/l,i.angularSpeed=Math.abs(i.angularVelocity)},d.getAngularVelocity=function(i){return(i.angle-i.anglePrev)*d._baseDelta/i.deltaTime},d.getAngularSpeed=function(i){return Math.abs(d.getAngularVelocity(i))},d.setAngularSpeed=function(i,a){d.setAngularVelocity(i,n.sign(d.getAngularVelocity(i))*a)},d.translate=function(i,a,l){d.setPosition(i,h.add(i.position,a),l)},d.rotate=function(i,a,l,f){if(!l)d.setAngle(i,i.angle+a,f);else{var u=Math.cos(a),v=Math.sin(a),m=i.position.x-l.x,x=i.position.y-l.y;d.setPosition(i,{x:l.x+(m*u-x*v),y:l.y+(m*v+x*u)},f),d.setAngle(i,i.angle+a,f)}},d.scale=function(i,a,l,f){var u=0,v=0;f=f||i.position;for(var m=i.inertia===1/0,x=0;x<i.parts.length;x++){var g=i.parts[x];g.scale.x=a,g.scale.y=l,c.scale(g.vertices,a,l,f),g.axes=s.fromVertices(g.vertices),g.area=c.area(g.vertices),d.setMass(g,i.density*g.area),c.translate(g.vertices,{x:-g.position.x,y:-g.position.y}),d.setInertia(g,d._inertiaScale*c.inertia(g.vertices,g.mass)),c.translate(g.vertices,{x:g.position.x,y:g.position.y}),x>0&&(u+=g.area,v+=g.inertia),g.position.x=f.x+(g.position.x-f.x)*a,g.position.y=f.y+(g.position.y-f.y)*l,e.update(g.bounds,g.vertices,i.velocity)}i.parts.length>1&&(i.area=u,i.isStatic||(d.setMass(i,i.density*u),d.setInertia(i,v))),i.circleRadius&&(a===l?i.circleRadius*=a:i.circleRadius=null),m&&d.setInertia(i,1/0)},d.update=function(i,a){a=(typeof a<"u"?a:16.666666666666668)*i.timeScale;var l=a*a,f=d._timeCorrection?a/(i.deltaTime||a):1,u=1-i.frictionAir*(a/n._baseDelta),v=(i.position.x-i.positionPrev.x)*f,m=(i.position.y-i.positionPrev.y)*f;i.velocity.x=v*u+i.force.x/i.mass*l,i.velocity.y=m*u+i.force.y/i.mass*l,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,i.deltaTime=a,i.angularVelocity=(i.angle-i.anglePrev)*u*f+i.torque/i.inertia*l,i.anglePrev=i.angle,i.angle+=i.angularVelocity,i.speed=h.magnitude(i.velocity),i.angularSpeed=Math.abs(i.angularVelocity);for(var x=0;x<i.parts.length;x++){var g=i.parts[x];c.translate(g.vertices,i.velocity),x>0&&(g.position.x+=i.velocity.x,g.position.y+=i.velocity.y),i.angularVelocity!==0&&(c.rotate(g.vertices,i.angularVelocity,i.position),s.rotate(g.axes,i.angularVelocity),x>0&&h.rotateAbout(g.position,i.angularVelocity,i.position,g.position)),e.update(g.bounds,g.vertices,i.velocity)}},d.updateVelocities=function(i){var a=d._baseDelta/i.deltaTime,l=i.velocity;l.x=(i.position.x-i.positionPrev.x)*a,l.y=(i.position.y-i.positionPrev.y)*a,i.speed=Math.sqrt(l.x*l.x+l.y*l.y),i.angularVelocity=(i.angle-i.anglePrev)*a,i.angularSpeed=Math.abs(i.angularVelocity)},d.applyForce=function(i,a,l){var f={x:a.x-i.position.x,y:a.y-i.position.y};i.force.x+=l.x,i.force.y+=l.y,i.torque+=f.x*l.y-f.y*l.x},d._totalProperties=function(i){for(var a={mass:0,area:0,inertia:0,centre:{x:0,y:0}},l=i.parts.length===1?0:1;l<i.parts.length;l++){var f=i.parts[l],u=f.mass!==1/0?f.mass:1;a.mass+=u,a.area+=f.area,a.inertia+=f.inertia,a.centre=h.add(a.centre,h.mult(f.position,u))}return a.centre=h.div(a.centre,a.mass),a},d.wrap=function(i,a){var l=e.wrap(i.bounds,a);return l&&d.translate(i,l),l}})()},69351:(p,S,t)=>{var d={};p.exports=d;var c=t(35810),h=t(53402),r=t(15647),n=t(22562);(function(){d.create=function(e){return h.extend({id:h.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},d.setModified=function(e,s,o,i){if(c.trigger(e,"compositeModified",e),e.isModified=s,s&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),o&&e.parent&&d.setModified(e.parent,s,o,i),i)for(var a=0;a<e.composites.length;a++){var l=e.composites[a];d.setModified(l,s,o,i)}},d.add=function(e,s){var o=[].concat(s);c.trigger(e,"beforeAdd",{object:s});for(var i=0;i<o.length;i++){var a=o[i];switch(a.type){case"body":if(a.parent!==a){h.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(e,a);break;case"constraint":d.addConstraint(e,a);break;case"composite":d.addComposite(e,a);break;case"mouseConstraint":d.addConstraint(e,a.constraint);break}}return c.trigger(e,"afterAdd",{object:s}),e},d.remove=function(e,s,o){var i=[].concat(s);c.trigger(e,"beforeRemove",{object:s});for(var a=0;a<i.length;a++){var l=i[a];switch(l.type){case"body":d.removeBody(e,l,o);break;case"constraint":d.removeConstraint(e,l,o);break;case"composite":d.removeComposite(e,l,o);break;case"mouseConstraint":d.removeConstraint(e,l.constraint);break}}return c.trigger(e,"afterRemove",{object:s}),e},d.addComposite=function(e,s){return e.composites.push(s),s.parent=e,d.setModified(e,!0,!0,!1),e},d.removeComposite=function(e,s,o){var i=h.indexOf(e.composites,s);if(i!==-1){var a=d.allBodies(s);d.removeCompositeAt(e,i);for(var l=0;l<a.length;l++)a[l].sleepCounter=0}if(o)for(var l=0;l<e.composites.length;l++)d.removeComposite(e.composites[l],s,!0);return e},d.removeCompositeAt=function(e,s){return e.composites.splice(s,1),d.setModified(e,!0,!0,!1),e},d.addBody=function(e,s){return e.bodies.push(s),d.setModified(e,!0,!0,!1),e},d.removeBody=function(e,s,o){var i=h.indexOf(e.bodies,s);if(i!==-1&&(d.removeBodyAt(e,i),s.sleepCounter=0),o)for(var a=0;a<e.composites.length;a++)d.removeBody(e.composites[a],s,!0);return e},d.removeBodyAt=function(e,s){return e.bodies.splice(s,1),d.setModified(e,!0,!0,!1),e},d.addConstraint=function(e,s){return e.constraints.push(s),d.setModified(e,!0,!0,!1),e},d.removeConstraint=function(e,s,o){var i=h.indexOf(e.constraints,s);if(i!==-1&&d.removeConstraintAt(e,i),o)for(var a=0;a<e.composites.length;a++)d.removeConstraint(e.composites[a],s,!0);return e},d.removeConstraintAt=function(e,s){return e.constraints.splice(s,1),d.setModified(e,!0,!0,!1),e},d.clear=function(e,s,o){if(o)for(var i=0;i<e.composites.length;i++)d.clear(e.composites[i],s,!0);return s?e.bodies=e.bodies.filter(function(a){return a.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,d.setModified(e,!0,!0,!1),e},d.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var s=[].concat(e.bodies),o=0;o<e.composites.length;o++)s=s.concat(d.allBodies(e.composites[o]));return e.cache&&(e.cache.allBodies=s),s},d.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var s=[].concat(e.constraints),o=0;o<e.composites.length;o++)s=s.concat(d.allConstraints(e.composites[o]));return e.cache&&(e.cache.allConstraints=s),s},d.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var s=[].concat(e.composites),o=0;o<e.composites.length;o++)s=s.concat(d.allComposites(e.composites[o]));return e.cache&&(e.cache.allComposites=s),s},d.get=function(e,s,o){var i,a;switch(o){case"body":i=d.allBodies(e);break;case"constraint":i=d.allConstraints(e);break;case"composite":i=d.allComposites(e).concat(e);break}return i?(a=i.filter(function(l){return l.id.toString()===s.toString()}),a.length===0?null:a[0]):null},d.move=function(e,s,o){return d.remove(e,s),d.add(o,s),e},d.rebase=function(e){for(var s=d.allBodies(e).concat(d.allConstraints(e)).concat(d.allComposites(e)),o=0;o<s.length;o++)s[o].id=h.nextId();return e},d.translate=function(e,s,o){for(var i=o?d.allBodies(e):e.bodies,a=0;a<i.length;a++)n.translate(i[a],s);return e},d.rotate=function(e,s,o,i){for(var a=Math.cos(s),l=Math.sin(s),f=i?d.allBodies(e):e.bodies,u=0;u<f.length;u++){var v=f[u],m=v.position.x-o.x,x=v.position.y-o.y;n.setPosition(v,{x:o.x+(m*a-x*l),y:o.y+(m*l+x*a)}),n.rotate(v,s)}return e},d.scale=function(e,s,o,i,a){for(var l=a?d.allBodies(e):e.bodies,f=0;f<l.length;f++){var u=l[f],v=u.position.x-i.x,m=u.position.y-i.y;n.setPosition(u,{x:i.x+v*s,y:i.y+m*o}),n.scale(u,s,o)}return e},d.bounds=function(e){for(var s=d.allBodies(e),o=[],i=0;i<s.length;i+=1){var a=s[i];o.push(a.bounds.min,a.bounds.max)}return r.create(o)},d.wrap=function(e,s){var o=r.wrap(d.bounds(e),s);return o&&d.translate(e,o),o}})()},4372:(p,S,t)=>{var d={};p.exports=d;var c=t(69351);(function(){d.create=c.create,d.add=c.add,d.remove=c.remove,d.clear=c.clear,d.addComposite=c.addComposite,d.addBody=c.addBody,d.addConstraint=c.addConstraint})()},52284:(p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(4506);(function(){var r=[],n={overlap:0,axis:null},e={overlap:0,axis:null};d.create=function(s,o){return{pair:null,collided:!1,bodyA:s,bodyB:o,parentA:s.parent,parentB:o.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},d.collides=function(s,o,i){if(d._overlapAxes(n,s.vertices,o.vertices,s.axes),n.overlap<=0||(d._overlapAxes(e,o.vertices,s.vertices,o.axes),e.overlap<=0))return null;var a=i&&i.table[h.id(s,o)],l;a?l=a.collision:(l=d.create(s,o),l.collided=!0,l.bodyA=s.id<o.id?s:o,l.bodyB=s.id<o.id?o:s,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent),s=l.bodyA,o=l.bodyB;var f;n.overlap<e.overlap?f=n:f=e;var u=l.normal,v=l.tangent,m=l.penetration,x=l.supports,g=f.overlap,y=f.axis,T=y.x,C=y.y,E=o.position.x-s.position.x,M=o.position.y-s.position.y;T*E+C*M>=0&&(T=-T,C=-C),u.x=T,u.y=C,v.x=-C,v.y=T,m.x=T*g,m.y=C*g,l.depth=g;var P=d._findSupports(s,o,u,1),A=0;if(c.contains(s.vertices,P[0])&&(x[A++]=P[0]),c.contains(s.vertices,P[1])&&(x[A++]=P[1]),A<2){var R=d._findSupports(o,s,u,-1);c.contains(o.vertices,R[0])&&(x[A++]=R[0]),A<2&&c.contains(o.vertices,R[1])&&(x[A++]=R[1])}return A===0&&(x[A++]=P[0]),l.supportCount=A,l},d._overlapAxes=function(s,o,i,a){var l=o.length,f=i.length,u=o[0].x,v=o[0].y,m=i[0].x,x=i[0].y,g=a.length,y=Number.MAX_VALUE,T=0,C,E,M,P,A,R;for(A=0;A<g;A++){var F=a[A],w=F.x,I=F.y,U=u*w+v*I,N=m*w+x*I,D=U,B=N;for(R=1;R<l;R+=1)P=o[R].x*w+o[R].y*I,P>D?D=P:P<U&&(U=P);for(R=1;R<f;R+=1)P=i[R].x*w+i[R].y*I,P>B?B=P:P<N&&(N=P);if(E=D-N,M=B-U,C=E<M?E:M,C<y&&(y=C,T=A,C<=0))break}s.axis=a[T],s.overlap=y},d._findSupports=function(s,o,i,a){var l=o.vertices,f=l.length,u=s.position.x,v=s.position.y,m=i.x*a,x=i.y*a,g=l[0],y=g,T=m*(u-y.x)+x*(v-y.y),C,E,M;for(M=1;M<f;M+=1)y=l[M],E=m*(u-y.x)+x*(v-y.y),E<T&&(T=E,g=y);return C=l[(f+g.index-1)%f],T=m*(u-C.x)+x*(v-C.y),y=l[(g.index+1)%f],m*(u-y.x)+x*(v-y.y)<T?(r[0]=g,r[1]=y,r):(r[0]=g,r[1]=C,r)}})()},43424:p=>{var S={};p.exports=S,function(){S.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}}()},81388:(p,S,t)=>{var d={};p.exports=d;var c=t(53402),h=t(52284);(function(){d.create=function(r){var n={bodies:[],collisions:[],pairs:null};return c.extend(n,r)},d.setBodies=function(r,n){r.bodies=n.slice(0)},d.clear=function(r){r.bodies=[],r.collisions=[]},d.collisions=function(r){var n=r.pairs,e=r.bodies,s=e.length,o=d.canCollide,i=h.collides,a=r.collisions,l=0,f,u;for(e.sort(d._compareBoundsX),f=0;f<s;f++){var v=e[f],m=v.bounds,x=v.bounds.max.x,g=v.bounds.max.y,y=v.bounds.min.y,T=v.isStatic||v.isSleeping,C=v.parts.length,E=C===1;for(u=f+1;u<s;u++){var M=e[u],P=M.bounds;if(P.min.x>x)break;if(!(g<P.min.y||y>P.max.y)&&!(T&&(M.isStatic||M.isSleeping))&&o(v.collisionFilter,M.collisionFilter)){var A=M.parts.length;if(E&&A===1){var R=i(v,M,n);R&&(a[l++]=R)}else for(var F=C>1?1:0,w=A>1?1:0,I=F;I<C;I++)for(var U=v.parts[I],m=U.bounds,N=w;N<A;N++){var D=M.parts[N],P=D.bounds;if(!(m.min.x>P.max.x||m.max.x<P.min.x||m.max.y<P.min.y||m.min.y>P.max.y)){var R=i(U,D,n);R&&(a[l++]=R)}}}}}return a.length!==l&&(a.length=l),a},d.canCollide=function(r,n){return r.group===n.group&&r.group!==0?r.group>0:(r.mask&n.category)!==0&&(n.mask&r.category)!==0},d._compareBoundsX=function(r,n){return r.bounds.min.x-n.bounds.min.x}})()},4506:(p,S,t)=>{var d={};p.exports=d;var c=t(43424);(function(){d.create=function(h,r){var n=h.bodyA,e=h.bodyB,s={id:d.id(n,e),bodyA:n,bodyB:e,collision:h,contacts:[c.create(),c.create()],contactCount:0,separation:0,isActive:!0,isSensor:n.isSensor||e.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return d.update(s,h,r),s},d.update=function(h,r,n){var e=r.supports,s=r.supportCount,o=h.contacts,i=r.parentA,a=r.parentB;h.isActive=!0,h.timeUpdated=n,h.collision=r,h.separation=r.depth,h.inverseMass=i.inverseMass+a.inverseMass,h.friction=i.friction<a.friction?i.friction:a.friction,h.frictionStatic=i.frictionStatic>a.frictionStatic?i.frictionStatic:a.frictionStatic,h.restitution=i.restitution>a.restitution?i.restitution:a.restitution,h.slop=i.slop>a.slop?i.slop:a.slop,h.contactCount=s,r.pair=h;var l=e[0],f=o[0],u=e[1],v=o[1];(v.vertex===l||f.vertex===u)&&(o[1]=f,o[0]=f=v,v=o[1]),f.vertex=l,v.vertex=u},d.setActive=function(h,r,n){r?(h.isActive=!0,h.timeUpdated=n):(h.isActive=!1,h.contactCount=0)},d.id=function(h,r){return h.id<r.id?h.id.toString(36)+":"+r.id.toString(36):r.id.toString(36)+":"+h.id.toString(36)}})()},99561:(p,S,t)=>{var d={};p.exports=d;var c=t(4506),h=t(53402);(function(){d.create=function(r){return h.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},d.update=function(r,n,e){var s=c.update,o=c.create,i=c.setActive,a=r.table,l=r.list,f=l.length,u=f,v=r.collisionStart,m=r.collisionEnd,x=r.collisionActive,g=n.length,y=0,T=0,C=0,E,M,P;for(P=0;P<g;P++)E=n[P],M=E.pair,M?(M.isActive&&(x[C++]=M),s(M,E,e)):(M=o(E,e),a[M.id]=M,v[y++]=M,l[u++]=M);for(u=0,f=l.length,P=0;P<f;P++)M=l[P],M.timeUpdated>=e?l[u++]=M:(i(M,!1,e),M.collision.bodyA.sleepCounter>0&&M.collision.bodyB.sleepCounter>0?l[u++]=M:(m[T++]=M,delete a[M.id]));l.length!==u&&(l.length=u),v.length!==y&&(v.length=y),m.length!==T&&(m.length=T),x.length!==C&&(x.length=C)},d.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()},73296:(p,S,t)=>{var d={};p.exports=d;var c=t(31725),h=t(52284),r=t(15647),n=t(66280),e=t(41598);(function(){d.collides=function(s,o){for(var i=[],a=o.length,l=s.bounds,f=h.collides,u=r.overlaps,v=0;v<a;v++){var m=o[v],x=m.parts.length,g=x===1?0:1;if(s!==m&&u(m.bounds,l))for(var y=g;y<x;y++){var T=m.parts[y];if(u(T.bounds,l)){var C=f(T,s);if(C){i.push(C);break}}}}return i},d.ray=function(s,o,i,a){a=a||1e-100;for(var l=c.angle(o,i),f=c.magnitude(c.sub(o,i)),u=(i.x+o.x)*.5,v=(i.y+o.y)*.5,m=n.rectangle(u,v,f,a,{angle:l}),x=d.collides(m,s),g=0;g<x.length;g+=1){var y=x[g];y.body=y.bodyB=y.bodyA}return x},d.region=function(s,o,i){for(var a=[],l=0;l<s.length;l++){var f=s[l],u=r.overlaps(f.bounds,o);(u&&!i||!u&&i)&&a.push(f)}return a},d.point=function(s,o){for(var i=[],a=0;a<s.length;a++){var l=s[a];if(r.contains(l.bounds,o))for(var f=l.parts.length===1?0:1;f<l.parts.length;f++){var u=l.parts[f];if(r.contains(u.bounds,o)&&e.contains(u.vertices,o)){i.push(l);break}}}return i}})()},66272:(p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(53402),r=t(15647);(function(){d._restingThresh=2,d._restingThreshTangent=Math.sqrt(6),d._positionDampen=.9,d._positionWarming=.8,d._frictionNormalMultiplier=5,d._frictionMaxStatic=Number.MAX_VALUE,d.preSolvePosition=function(n){var e,s,o,i=n.length;for(e=0;e<i;e++)s=n[e],s.isActive&&(o=s.contactCount,s.collision.parentA.totalContacts+=o,s.collision.parentB.totalContacts+=o)},d.solvePosition=function(n,e,s){var o,i,a,l,f,u,v,m,x=d._positionDampen*(s||1),g=h.clamp(e/h._baseDelta,0,1),y=n.length;for(o=0;o<y;o++)i=n[o],!(!i.isActive||i.isSensor)&&(a=i.collision,l=a.parentA,f=a.parentB,u=a.normal,i.separation=a.depth+u.x*(f.positionImpulse.x-l.positionImpulse.x)+u.y*(f.positionImpulse.y-l.positionImpulse.y));for(o=0;o<y;o++)i=n[o],!(!i.isActive||i.isSensor)&&(a=i.collision,l=a.parentA,f=a.parentB,u=a.normal,m=i.separation-i.slop*g,(l.isStatic||f.isStatic)&&(m*=2),l.isStatic||l.isSleeping||(v=x/l.totalContacts,l.positionImpulse.x+=u.x*m*v,l.positionImpulse.y+=u.y*m*v),f.isStatic||f.isSleeping||(v=x/f.totalContacts,f.positionImpulse.x-=u.x*m*v,f.positionImpulse.y-=u.y*m*v))},d.postSolvePosition=function(n){for(var e=d._positionWarming,s=n.length,o=c.translate,i=r.update,a=0;a<s;a++){var l=n[a],f=l.positionImpulse,u=f.x,v=f.y,m=l.velocity;if(l.totalContacts=0,u!==0||v!==0){for(var x=0;x<l.parts.length;x++){var g=l.parts[x];o(g.vertices,f),i(g.bounds,g.vertices,m),g.position.x+=u,g.position.y+=v}l.positionPrev.x+=u,l.positionPrev.y+=v,u*m.x+v*m.y<0?(f.x=0,f.y=0):(f.x*=e,f.y*=e)}}},d.preSolveVelocity=function(n){var e=n.length,s,o;for(s=0;s<e;s++){var i=n[s];if(!(!i.isActive||i.isSensor)){var a=i.contacts,l=i.contactCount,f=i.collision,u=f.parentA,v=f.parentB,m=f.normal,x=f.tangent;for(o=0;o<l;o++){var g=a[o],y=g.vertex,T=g.normalImpulse,C=g.tangentImpulse;if(T!==0||C!==0){var E=m.x*T+x.x*C,M=m.y*T+x.y*C;u.isStatic||u.isSleeping||(u.positionPrev.x+=E*u.inverseMass,u.positionPrev.y+=M*u.inverseMass,u.anglePrev+=u.inverseInertia*((y.x-u.position.x)*M-(y.y-u.position.y)*E)),v.isStatic||v.isSleeping||(v.positionPrev.x-=E*v.inverseMass,v.positionPrev.y-=M*v.inverseMass,v.anglePrev-=v.inverseInertia*((y.x-v.position.x)*M-(y.y-v.position.y)*E))}}}}},d.solveVelocity=function(n,e){var s=e/h._baseDelta,o=s*s,i=o*s,a=-d._restingThresh*s,l=d._restingThreshTangent,f=d._frictionNormalMultiplier*s,u=d._frictionMaxStatic,v=n.length,m,x,g,y;for(g=0;g<v;g++){var T=n[g];if(!(!T.isActive||T.isSensor)){var C=T.collision,E=C.parentA,M=C.parentB,P=C.normal.x,A=C.normal.y,R=C.tangent.x,F=C.tangent.y,w=T.inverseMass,I=T.friction*T.frictionStatic*f,U=T.contacts,N=T.contactCount,D=1/N,B=E.position.x-E.positionPrev.x,L=E.position.y-E.positionPrev.y,G=E.angle-E.anglePrev,O=M.position.x-M.positionPrev.x,z=M.position.y-M.positionPrev.y,X=M.angle-M.anglePrev;for(y=0;y<N;y++){var V=U[y],Y=V.vertex,W=Y.x-E.position.x,H=Y.y-E.position.y,K=Y.x-M.position.x,b=Y.y-M.position.y,Q=B-H*G,j=L+W*G,J=O-b*X,it=z+K*X,st=Q-J,nt=j-it,$=P*st+A*nt,_=R*st+F*nt,tt=T.separation+$,rt=Math.min(tt,1);rt=tt<0?0:rt;var ht=rt*I;_<-ht||_>ht?(x=_>0?_:-_,m=T.friction*(_>0?1:-1)*i,m<-x?m=-x:m>x&&(m=x)):(m=_,x=u);var ut=W*A-H*P,at=K*A-b*P,ot=D/(w+E.inverseInertia*ut*ut+M.inverseInertia*at*at),dt=(1+T.restitution)*$*ot;if(m*=ot,$<a)V.normalImpulse=0;else{var mt=V.normalImpulse;V.normalImpulse+=dt,V.normalImpulse>0&&(V.normalImpulse=0),dt=V.normalImpulse-mt}if(_<-l||_>l)V.tangentImpulse=0;else{var lt=V.tangentImpulse;V.tangentImpulse+=m,V.tangentImpulse<-x&&(V.tangentImpulse=-x),V.tangentImpulse>x&&(V.tangentImpulse=x),m=V.tangentImpulse-lt}var vt=P*dt+R*m,ct=A*dt+F*m;E.isStatic||E.isSleeping||(E.positionPrev.x+=vt*E.inverseMass,E.positionPrev.y+=ct*E.inverseMass,E.anglePrev+=(W*ct-H*vt)*E.inverseInertia),M.isStatic||M.isSleeping||(M.positionPrev.x-=vt*M.inverseMass,M.positionPrev.y-=ct*M.inverseMass,M.anglePrev-=(K*ct-b*vt)*M.inverseInertia)}}}}})()},48140:(p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(31725),r=t(53614),n=t(15647),e=t(66615),s=t(53402);(function(){d._warming=.4,d._torqueDampen=1,d._minLength=1e-6,d.create=function(o){var i=o;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var a=i.bodyA?h.add(i.bodyA.position,i.pointA):i.pointA,l=i.bodyB?h.add(i.bodyB.position,i.pointB):i.pointB,f=h.magnitude(h.sub(a,l));i.length=typeof i.length<"u"?i.length:f,i.id=i.id||s.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var u={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return i.length===0&&i.stiffness>.1?(u.type="pin",u.anchors=!1):i.stiffness<.9&&(u.type="spring"),i.render=s.extend(u,i.render),i},d.preSolveAll=function(o){for(var i=0;i<o.length;i+=1){var a=o[i],l=a.constraintImpulse;a.isStatic||l.x===0&&l.y===0&&l.angle===0||(a.position.x+=l.x,a.position.y+=l.y,a.angle+=l.angle)}},d.solveAll=function(o,i){for(var a=s.clamp(i/s._baseDelta,0,1),l=0;l<o.length;l+=1){var f=o[l],u=!f.bodyA||f.bodyA&&f.bodyA.isStatic,v=!f.bodyB||f.bodyB&&f.bodyB.isStatic;(u||v)&&d.solve(o[l],a)}for(l=0;l<o.length;l+=1)f=o[l],u=!f.bodyA||f.bodyA&&f.bodyA.isStatic,v=!f.bodyB||f.bodyB&&f.bodyB.isStatic,!u&&!v&&d.solve(o[l],a)},d.solve=function(o,i){var a=o.bodyA,l=o.bodyB,f=o.pointA,u=o.pointB;if(!(!a&&!l)){a&&!a.isStatic&&(h.rotate(f,a.angle-o.angleA,f),o.angleA=a.angle),l&&!l.isStatic&&(h.rotate(u,l.angle-o.angleB,u),o.angleB=l.angle);var v=f,m=u;if(a&&(v=h.add(a.position,f)),l&&(m=h.add(l.position,u)),!(!v||!m)){var x=h.sub(v,m),g=h.magnitude(x);g<d._minLength&&(g=d._minLength);var y=(g-o.length)/g,T=o.stiffness>=1||o.length===0,C=T?o.stiffness*i:o.stiffness*i*i,E=o.damping*i,M=h.mult(x,y*C),P=(a?a.inverseMass:0)+(l?l.inverseMass:0),A=(a?a.inverseInertia:0)+(l?l.inverseInertia:0),R=P+A,F,w,I,U,N;if(E>0){var D=h.create();I=h.div(x,g),N=h.sub(l&&h.sub(l.position,l.positionPrev)||D,a&&h.sub(a.position,a.positionPrev)||D),U=h.dot(I,N)}a&&!a.isStatic&&(w=a.inverseMass/P,a.constraintImpulse.x-=M.x*w,a.constraintImpulse.y-=M.y*w,a.position.x-=M.x*w,a.position.y-=M.y*w,E>0&&(a.positionPrev.x-=E*I.x*U*w,a.positionPrev.y-=E*I.y*U*w),F=h.cross(f,M)/R*d._torqueDampen*a.inverseInertia*(1-o.angularStiffness),a.constraintImpulse.angle-=F,a.angle-=F),l&&!l.isStatic&&(w=l.inverseMass/P,l.constraintImpulse.x+=M.x*w,l.constraintImpulse.y+=M.y*w,l.position.x+=M.x*w,l.position.y+=M.y*w,E>0&&(l.positionPrev.x+=E*I.x*U*w,l.positionPrev.y+=E*I.y*U*w),F=h.cross(u,M)/R*d._torqueDampen*l.inverseInertia*(1-o.angularStiffness),l.constraintImpulse.angle+=F,l.angle+=F)}}},d.postSolveAll=function(o){for(var i=0;i<o.length;i++){var a=o[i],l=a.constraintImpulse;if(!(a.isStatic||l.x===0&&l.y===0&&l.angle===0)){r.set(a,!1);for(var f=0;f<a.parts.length;f++){var u=a.parts[f];c.translate(u.vertices,l),f>0&&(u.position.x+=l.x,u.position.y+=l.y),l.angle!==0&&(c.rotate(u.vertices,l.angle,a.position),e.rotate(u.axes,l.angle),f>0&&h.rotateAbout(u.position,l.angle,a.position,u.position)),n.update(u.bounds,u.vertices,a.velocity)}l.angle*=d._warming,l.x*=d._warming,l.y*=d._warming}}},d.pointAWorld=function(o){return{x:(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),y:(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0)}},d.pointBWorld=function(o){return{x:(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),y:(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0)}},d.currentLength=function(o){var i=(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),a=(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0),l=(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),f=(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0),u=i-l,v=a-f;return Math.sqrt(u*u+v*v)}})()},53402:(p,S,t)=>{var d={};p.exports=d,function(){d._baseDelta=16.666666666666668,d._nextId=0,d._seed=0,d._nowStartTime=+new Date,d._warnedOnce={},d._decomp=null,d.extend=function(h,r){var n,e;typeof r=="boolean"?(n=2,e=r):(n=1,e=!0);for(var s=n;s<arguments.length;s++){var o=arguments[s];if(o)for(var i in o)e&&o[i]&&o[i].constructor===Object&&(!h[i]||h[i].constructor===Object)?(h[i]=h[i]||{},d.extend(h[i],e,o[i])):h[i]=o[i]}return h},d.clone=function(h,r){return d.extend({},r,h)},d.keys=function(h){if(Object.keys)return Object.keys(h);var r=[];for(var n in h)r.push(n);return r},d.values=function(h){var r=[];if(Object.keys){for(var n=Object.keys(h),e=0;e<n.length;e++)r.push(h[n[e]]);return r}for(var s in h)r.push(h[s]);return r},d.get=function(h,r,n,e){r=r.split(".").slice(n,e);for(var s=0;s<r.length;s+=1)h=h[r[s]];return h},d.set=function(h,r,n,e,s){var o=r.split(".").slice(e,s);return d.get(h,r,0,-1)[o[o.length-1]]=n,n},d.shuffle=function(h){for(var r=h.length-1;r>0;r--){var n=Math.floor(d.random()*(r+1)),e=h[r];h[r]=h[n],h[n]=e}return h},d.choose=function(h){return h[Math.floor(d.random()*h.length)]},d.isElement=function(h){return typeof HTMLElement<"u"?h instanceof HTMLElement:!!(h&&h.nodeType&&h.nodeName)},d.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"},d.isFunction=function(h){return typeof h=="function"},d.isPlainObject=function(h){return typeof h=="object"&&h.constructor===Object},d.isString=function(h){return toString.call(h)==="[object String]"},d.clamp=function(h,r,n){return h<r?r:h>n?n:h},d.sign=function(h){return h<0?-1:1},d.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-d._nowStartTime},d.random=function(h,r){return h=typeof h<"u"?h:0,r=typeof r<"u"?r:1,h+c()*(r-h)};var c=function(){return d._seed=(d._seed*9301+49297)%233280,d._seed/233280};d.colorToNumber=function(h){return h=h.replace("#",""),h.length==3&&(h=h.charAt(0)+h.charAt(0)+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2)),parseInt(h,16)},d.logLevel=1,d.log=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&d.logLevel>0&&d.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warnOnce=function(){var h=Array.prototype.slice.call(arguments).join(" ");d._warnedOnce[h]||(d.warn(h),d._warnedOnce[h]=!0)},d.deprecated=function(h,r,n){h[r]=d.chain(function(){d.warnOnce("🔅 deprecated 🔅",n)},h[r])},d.nextId=function(){return d._nextId++},d.indexOf=function(h,r){if(h.indexOf)return h.indexOf(r);for(var n=0;n<h.length;n++)if(h[n]===r)return n;return-1},d.map=function(h,r){if(h.map)return h.map(r);for(var n=[],e=0;e<h.length;e+=1)n.push(r(h[e]));return n},d.topologicalSort=function(h){var r=[],n=[],e=[];for(var s in h)!n[s]&&!e[s]&&d._topologicalSort(s,n,e,h,r);return r},d._topologicalSort=function(h,r,n,e,s){var o=e[h]||[];n[h]=!0;for(var i=0;i<o.length;i+=1){var a=o[i];n[a]||r[a]||d._topologicalSort(a,r,n,e,s)}n[h]=!1,r[h]=!0,s.push(h)},d.chain=function(){for(var h=[],r=0;r<arguments.length;r+=1){var n=arguments[r];n._chained?h.push.apply(h,n._chained):h.push(n)}var e=function(){for(var s,o=new Array(arguments.length),i=0,a=arguments.length;i<a;i++)o[i]=arguments[i];for(i=0;i<h.length;i+=1){var l=h[i].apply(s,o);typeof l<"u"&&(s=l)}return s};return e._chained=h,e},d.chainPathBefore=function(h,r,n){return d.set(h,r,d.chain(n,d.get(h,r)))},d.chainPathAfter=function(h,r,n){return d.set(h,r,d.chain(d.get(h,r),n))},d.setDecomp=function(h){d._decomp=h},d.getDecomp=function(){var h=d._decomp;try{!h&&typeof window<"u"&&(h=window.decomp),!h&&typeof t.g<"u"&&(h=t.g.decomp)}catch{h=null}return h}}()},48413:(p,S,t)=>{var d={};p.exports=d;var c=t(53614),h=t(66272),r=t(81388),n=t(99561),e=t(35810),s=t(69351),o=t(48140),i=t(53402),a=t(22562);(function(){d._deltaMax=16.666666666666668,d.create=function(l){l=l||{};var f={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},u=i.extend(f,l);return u.world=l.world||s.create({label:"World"}),u.pairs=l.pairs||n.create(),u.detector=l.detector||r.create(),u.detector.pairs=u.pairs,u.grid={buckets:[]},u.world.gravity=u.gravity,u.broadphase=u.grid,u.metrics={},u},d.update=function(l,f){var u=i.now(),v=l.world,m=l.detector,x=l.pairs,g=l.timing,y=g.timestamp,T;f>d._deltaMax&&i.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",d._deltaMax.toFixed(3),"ms."),f=typeof f<"u"?f:i._baseDelta,f*=g.timeScale,g.timestamp+=f,g.lastDelta=f;var C={timestamp:g.timestamp,delta:f};e.trigger(l,"beforeUpdate",C);var E=s.allBodies(v),M=s.allConstraints(v),P=s.allComposites(v);for(v.isModified&&(r.setBodies(m,E),s.setModified(v,!1,!1,!0)),l.enableSleeping&&c.update(E,f),d._bodiesApplyGravity(E,l.gravity),d.wrap(E,P),d.attractors(E),f>0&&d._bodiesUpdate(E,f),e.trigger(l,"beforeSolve",C),o.preSolveAll(E),T=0;T<l.constraintIterations;T++)o.solveAll(M,f);o.postSolveAll(E);var A=r.collisions(m);n.update(x,A,y),l.enableSleeping&&c.afterCollisions(x.list),x.collisionStart.length>0&&e.trigger(l,"collisionStart",{pairs:x.collisionStart,timestamp:g.timestamp,delta:f});var R=i.clamp(20/l.positionIterations,0,1);for(h.preSolvePosition(x.list),T=0;T<l.positionIterations;T++)h.solvePosition(x.list,f,R);for(h.postSolvePosition(E),o.preSolveAll(E),T=0;T<l.constraintIterations;T++)o.solveAll(M,f);for(o.postSolveAll(E),h.preSolveVelocity(x.list),T=0;T<l.velocityIterations;T++)h.solveVelocity(x.list,f);return d._bodiesUpdateVelocities(E),x.collisionActive.length>0&&e.trigger(l,"collisionActive",{pairs:x.collisionActive,timestamp:g.timestamp,delta:f}),x.collisionEnd.length>0&&e.trigger(l,"collisionEnd",{pairs:x.collisionEnd,timestamp:g.timestamp,delta:f}),d._bodiesClearForces(E),e.trigger(l,"afterUpdate",C),l.timing.lastElapsed=i.now()-u,l},d.merge=function(l,f){if(i.extend(l,f),f.world){l.world=f.world,d.clear(l);for(var u=s.allBodies(l.world),v=0;v<u.length;v++){var m=u[v];c.set(m,!1),m.id=i.nextId()}}},d.clear=function(l){n.clear(l.pairs),r.clear(l.detector)},d._bodiesClearForces=function(l){for(var f=l.length,u=0;u<f;u++){var v=l[u];v.force.x=0,v.force.y=0,v.torque=0}},d._bodiesApplyGravity=function(l,f){var u=typeof f.scale<"u"?f.scale:.001,v=l.length;if(!(f.x===0&&f.y===0||u===0))for(var m=0;m<v;m++){var x=l[m];x.ignoreGravity||x.isStatic||x.isSleeping||(x.force.y+=x.mass*f.y*u,x.force.x+=x.mass*f.x*u)}},d._bodiesUpdate=function(l,f){for(var u=l.length,v=0;v<u;v++){var m=l[v];m.isStatic||m.isSleeping||a.update(m,f)}},d._bodiesUpdateVelocities=function(l){for(var f=l.length,u=0;u<f;u++)a.updateVelocities(l[u])},d.wrap=function(l,f){for(var u=0;u<l.length;u+=1){var v=l[u];v.wrapBounds!==null&&a.wrap(v,v.wrapBounds)}for(u=0;u<f.length;u+=1){var m=f[u];m.wrapBounds!==null&&s.wrap(m,m.wrapBounds)}},d.attractors=function(l){for(var f=0;f<l.length;f++){var u=l[f],v=u.attractors;if(v&&v.length>0)for(var m=0;m<l.length;m++){var x=l[m];if(f!==m)for(var g=0;g<v.length;g++){var y=v[g],T=y;i.isFunction(y)&&(T=y(u,x)),T&&a.applyForce(x,x.position,T)}}}}})()},35810:(p,S,t)=>{var d={};p.exports=d;var c=t(53402);(function(){d.on=function(h,r,n){for(var e=r.split(" "),s,o=0;o<e.length;o++)s=e[o],h.events=h.events||{},h.events[s]=h.events[s]||[],h.events[s].push(n);return n},d.off=function(h,r,n){if(!r){h.events={};return}typeof r=="function"&&(n=r,r=c.keys(h.events).join(" "));for(var e=r.split(" "),s=0;s<e.length;s++){var o=h.events[e[s]],i=[];if(n&&o)for(var a=0;a<o.length;a++)o[a]!==n&&i.push(o[a]);h.events[e[s]]=i}},d.trigger=function(h,r,n){var e,s,o,i,a=h.events;if(a&&c.keys(a).length>0){n||(n={}),e=r.split(" ");for(var l=0;l<e.length;l++)if(s=e[l],o=a[s],o){i=c.clone(n,!1),i.name=s,i.source=h;for(var f=0;f<o.length;f++)o[f].apply(h,[i])}}}})()},6790:(p,S,t)=>{var d={};p.exports=d;var c=t(73832),h=t(53402);(function(){d.name="matter-js",d.version="0.20.0",d.uses=[],d.used=[],d.use=function(){c.use(d,Array.prototype.slice.call(arguments))},d.before=function(r,n){return r=r.replace(/^Matter./,""),h.chainPathBefore(d,r,n)},d.after=function(r,n){return r=r.replace(/^Matter./,""),h.chainPathAfter(d,r,n)}})()},73832:(p,S,t)=>{var d={};p.exports=d;var c=t(53402);(function(){d._registry={},d.register=function(h){if(d.isPlugin(h)||c.warn("Plugin.register:",d.toString(h),"does not implement all required fields."),h.name in d._registry){var r=d._registry[h.name],n=d.versionParse(h.version).number,e=d.versionParse(r.version).number;n>e?(c.warn("Plugin.register:",d.toString(r),"was upgraded to",d.toString(h)),d._registry[h.name]=h):n<e?c.warn("Plugin.register:",d.toString(r),"can not be downgraded to",d.toString(h)):h!==r&&c.warn("Plugin.register:",d.toString(h),"is already registered to different plugin object")}else d._registry[h.name]=h;return h},d.resolve=function(h){return d._registry[d.dependencyParse(h).name]},d.toString=function(h){return typeof h=="string"?h:(h.name||"anonymous")+"@"+(h.version||h.range||"0.0.0")},d.isPlugin=function(h){return h&&h.name&&h.version&&h.install},d.isUsed=function(h,r){return h.used.indexOf(r)>-1},d.isFor=function(h,r){var n=h.for&&d.dependencyParse(h.for);return!h.for||r.name===n.name&&d.versionSatisfies(r.version,n.range)},d.use=function(h,r){if(h.uses=(h.uses||[]).concat(r||[]),h.uses.length===0){c.warn("Plugin.use:",d.toString(h),"does not specify any dependencies to install.");return}for(var n=d.dependencies(h),e=c.topologicalSort(n),s=[],o=0;o<e.length;o+=1)if(e[o]!==h.name){var i=d.resolve(e[o]);if(!i){s.push("❌ "+e[o]);continue}d.isUsed(h,i.name)||(d.isFor(i,h)||(c.warn("Plugin.use:",d.toString(i),"is for",i.for,"but installed on",d.toString(h)+"."),i._warned=!0),i.install?i.install(h):(c.warn("Plugin.use:",d.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(s.push("🔶 "+d.toString(i)),delete i._warned):s.push("✅ "+d.toString(i)),h.used.push(i.name))}s.length>0&&!i.silent&&c.info(s.join("  "))},d.dependencies=function(h,r){var n=d.dependencyParse(h),e=n.name;if(r=r||{},!(e in r)){h=d.resolve(h)||h,r[e]=c.map(h.uses||[],function(o){d.isPlugin(o)&&d.register(o);var i=d.dependencyParse(o),a=d.resolve(o);return a&&!d.versionSatisfies(a.version,i.range)?(c.warn("Plugin.dependencies:",d.toString(a),"does not satisfy",d.toString(i),"used by",d.toString(n)+"."),a._warned=!0,h._warned=!0):a||(c.warn("Plugin.dependencies:",d.toString(o),"used by",d.toString(n),"could not be resolved."),h._warned=!0),i.name});for(var s=0;s<r[e].length;s+=1)d.dependencies(r[e][s],r);return r}},d.dependencyParse=function(h){if(c.isString(h)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(h)||c.warn("Plugin.dependencyParse:",h,"is not a valid dependency string."),{name:h.split("@")[0],range:h.split("@")[1]||"*"}}return{name:h.name,range:h.range||h.version}},d.versionParse=function(h){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(h)||c.warn("Plugin.versionParse:",h,"is not a valid version or range.");var n=r.exec(h),e=Number(n[4]),s=Number(n[5]),o=Number(n[6]);return{isRange:!!(n[1]||n[2]),version:n[3],range:h,operator:n[1]||n[2]||"",major:e,minor:s,patch:o,parts:[e,s,o],prerelease:n[7],number:e*1e8+s*1e4+o}},d.versionSatisfies=function(h,r){r=r||"*";var n=d.versionParse(r),e=d.versionParse(h);if(n.isRange){if(n.operator==="*"||h==="*")return!0;if(n.operator===">")return e.number>n.number;if(n.operator===">=")return e.number>=n.number;if(n.operator==="~")return e.major===n.major&&e.minor===n.minor&&e.patch>=n.patch;if(n.operator==="^")return n.major>0?e.major===n.major&&e.number>=n.number:n.minor>0?e.minor===n.minor&&e.patch>=n.patch:e.patch===n.patch}return h===r||h==="*"}})()},13037:(p,S,t)=>{var d={};p.exports=d;var c=t(35810),h=t(48413),r=t(53402);(function(){d._maxFrameDelta=66.66666666666667,d._frameDeltaFallback=16.666666666666668,d._timeBufferMargin=1.5,d._elapsedNextEstimate=1,d._smoothingLowerBound=.1,d._smoothingUpperBound=.9,d.create=function(e){var s={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},o=r.extend(s,e);return o.fps=0,o},d.run=function(e,s){return e.timeBuffer=d._frameDeltaFallback,function o(i){e.frameRequestId=d._onNextFrame(e,o),i&&e.enabled&&d.tick(e,s,i)}(),e},d.tick=function(e,s,o){var i=r.now(),a=e.delta,l=0,f=o-e.timeLastTick;if((!f||!e.timeLastTick||f>Math.max(d._maxFrameDelta,e.maxFrameTime))&&(f=e.frameDelta||d._frameDeltaFallback),e.frameDeltaSmoothing){e.frameDeltaHistory.push(f),e.frameDeltaHistory=e.frameDeltaHistory.slice(-e.frameDeltaHistorySize);var u=e.frameDeltaHistory.slice(0).sort(),v=e.frameDeltaHistory.slice(u.length*d._smoothingLowerBound,u.length*d._smoothingUpperBound),m=n(v);f=m||f}e.frameDeltaSnapping&&(f=1e3/Math.round(1e3/f)),e.frameDelta=f,e.timeLastTick=o,e.timeBuffer+=e.frameDelta,e.timeBuffer=r.clamp(e.timeBuffer,0,e.frameDelta+a*d._timeBufferMargin),e.lastUpdatesDeferred=0;var x=e.maxUpdates||Math.ceil(e.maxFrameTime/a),g={timestamp:s.timing.timestamp};c.trigger(e,"beforeTick",g),c.trigger(e,"tick",g);for(var y=r.now();a>0&&e.timeBuffer>=a*d._timeBufferMargin;){c.trigger(e,"beforeUpdate",g),h.update(s,a),c.trigger(e,"afterUpdate",g),e.timeBuffer-=a,l+=1;var T=r.now()-i,C=r.now()-y,E=T+d._elapsedNextEstimate*C/l;if(l>=x||E>e.maxFrameTime){e.lastUpdatesDeferred=Math.round(Math.max(0,e.timeBuffer/a-d._timeBufferMargin));break}}s.timing.lastUpdatesPerFrame=l,c.trigger(e,"afterTick",g),e.frameDeltaHistory.length>=100&&(e.lastUpdatesDeferred&&Math.round(e.frameDelta/a)>x?r.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):e.lastUpdatesDeferred&&r.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof e.isFixed<"u"&&r.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(e.deltaMin||e.deltaMax)&&r.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),e.fps!==0&&r.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},d.stop=function(e){d._cancelNextFrame(e)},d._onNextFrame=function(e,s){if(typeof window<"u"&&window.requestAnimationFrame)e.frameRequestId=window.requestAnimationFrame(s);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return e.frameRequestId},d._cancelNextFrame=function(e){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(e.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var n=function(e){for(var s=0,o=e.length,i=0;i<o;i+=1)s+=e[i];return s/o||0};d._mean=n})()},53614:(p,S,t)=>{var d={};p.exports=d;var c=t(22562),h=t(35810),r=t(53402);(function(){d._motionWakeThreshold=.18,d._motionSleepThreshold=.08,d._minBias=.9,d.update=function(n,e){for(var s=e/r._baseDelta,o=d._motionSleepThreshold,i=0;i<n.length;i++){var a=n[i],l=c.getSpeed(a),f=c.getAngularSpeed(a),u=l*l+f*f;if(a.force.x!==0||a.force.y!==0){d.set(a,!1);continue}var v=Math.min(a.motion,u),m=Math.max(a.motion,u);a.motion=d._minBias*v+(1-d._minBias)*m,a.sleepThreshold>0&&a.motion<o?(a.sleepCounter+=1,a.sleepCounter>=a.sleepThreshold/s&&d.set(a,!0)):a.sleepCounter>0&&(a.sleepCounter-=1)}},d.afterCollisions=function(n){for(var e=d._motionSleepThreshold,s=0;s<n.length;s++){var o=n[s];if(o.isActive){var i=o.collision,a=i.bodyA.parent,l=i.bodyB.parent;if(!(a.isSleeping&&l.isSleeping||a.isStatic||l.isStatic)&&(a.isSleeping||l.isSleeping)){var f=a.isSleeping&&!a.isStatic?a:l,u=f===a?l:a;!f.isStatic&&u.motion>e&&d.set(f,!1)}}}},d.set=function(n,e){var s=n.isSleeping;e?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,s||h.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,s&&h.trigger(n,"sleepEnd"))}})()},66280:(p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(53402),r=t(22562),n=t(15647),e=t(31725);(function(){d.rectangle=function(s,o,i,a,l){l=l||{};var f={label:"Rectangle Body",position:{x:s,y:o},vertices:c.fromPath("L 0 0 L "+i+" 0 L "+i+" "+a+" L 0 "+a)};if(l.chamfer){var u=l.chamfer;f.vertices=c.chamfer(f.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete l.chamfer}return r.create(h.extend({},f,l))},d.trapezoid=function(s,o,i,a,l,f){f=f||{},l>=1&&h.warn("Bodies.trapezoid: slope parameter must be < 1."),l*=.5;var u=(1-l*2)*i,v=i*l,m=v+u,x=m+v,g;l<.5?g="L 0 0 L "+v+" "+-a+" L "+m+" "+-a+" L "+x+" 0":g="L 0 0 L "+m+" "+-a+" L "+x+" 0";var y={label:"Trapezoid Body",position:{x:s,y:o},vertices:c.fromPath(g)};if(f.chamfer){var T=f.chamfer;y.vertices=c.chamfer(y.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete f.chamfer}return r.create(h.extend({},y,f))},d.circle=function(s,o,i,a,l){a=a||{};var f={label:"Circle Body",circleRadius:i};l=l||25;var u=Math.ceil(Math.max(10,Math.min(l,i)));return u%2===1&&(u+=1),d.polygon(s,o,u,i,h.extend({},f,a))},d.polygon=function(s,o,i,a,l){if(l=l||{},i<3)return d.circle(s,o,a,l);for(var f=2*Math.PI/i,u="",v=f*.5,m=0;m<i;m+=1){var x=v+m*f,g=Math.cos(x)*a,y=Math.sin(x)*a;u+="L "+g.toFixed(3)+" "+y.toFixed(3)+" "}var T={label:"Polygon Body",position:{x:s,y:o},vertices:c.fromPath(u)};if(l.chamfer){var C=l.chamfer;T.vertices=c.chamfer(T.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete l.chamfer}return r.create(h.extend({},T,l))},d.fromVertices=function(s,o,i,a,l,f,u,v){var m=h.getDecomp(),x,g,y,T,C,E,M,P,A,R,F;for(x=!!(m&&m.quickDecomp),a=a||{},y=[],l=typeof l<"u"?l:!1,f=typeof f<"u"?f:.01,u=typeof u<"u"?u:10,v=typeof v<"u"?v:.01,h.isArray(i[0])||(i=[i]),R=0;R<i.length;R+=1)if(E=i[R],T=c.isConvex(E),C=!T,C&&!x&&h.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),T||!x)T?E=c.clockwiseSort(E):E=c.hull(E),y.push({position:{x:s,y:o},vertices:E});else{var w=E.map(function(V){return[V.x,V.y]});m.makeCCW(w),f!==!1&&m.removeCollinearPoints(w,f),v!==!1&&m.removeDuplicatePoints&&m.removeDuplicatePoints(w,v);var I=m.quickDecomp(w);for(M=0;M<I.length;M++){var U=I[M],N=U.map(function(V){return{x:V[0],y:V[1]}});u>0&&c.area(N)<u||y.push({position:c.centre(N),vertices:N})}}for(M=0;M<y.length;M++)y[M]=r.create(h.extend(y[M],a));if(l){var D=5;for(M=0;M<y.length;M++){var B=y[M];for(P=M+1;P<y.length;P++){var L=y[P];if(n.overlaps(B.bounds,L.bounds)){var G=B.vertices,O=L.vertices;for(A=0;A<B.vertices.length;A++)for(F=0;F<L.vertices.length;F++){var z=e.magnitudeSquared(e.sub(G[(A+1)%G.length],O[F])),X=e.magnitudeSquared(e.sub(G[A],O[(F+1)%O.length]));z<D&&X<D&&(G[A].isInternal=!0,O[F].isInternal=!0)}}}}}return y.length>1?(g=r.create(h.extend({parts:y.slice(0)},a)),r.setPosition(g,{x:s,y:o}),g):y[0]},d.flagCoincidentParts=function(s,o){o===void 0&&(o=5);for(var i=0;i<s.length;i++)for(var a=s[i],l=i+1;l<s.length;l++){var f=s[l];if(n.overlaps(a.bounds,f.bounds))for(var u=a.vertices,v=f.vertices,m=0;m<a.vertices.length;m++)for(var x=0;x<f.vertices.length;x++){var g=e.magnitudeSquared(e.sub(u[(m+1)%u.length],v[x])),y=e.magnitudeSquared(e.sub(u[m],v[(x+1)%v.length]));g<o&&y<o&&(u[m].isInternal=!0,v[x].isInternal=!0)}}return s}})()},74116:(p,S,t)=>{var d={};p.exports=d;var c=t(69351),h=t(48140),r=t(53402),n=t(22562),e=t(66280);(function(){d.stack=function(s,o,i,a,l,f,u){for(var v=c.create({label:"Stack"}),m=s,x=o,g,y=0,T=0;T<a;T++){for(var C=0,E=0;E<i;E++){var M=u(m,x,E,T,g,y);if(M){var P=M.bounds.max.y-M.bounds.min.y,A=M.bounds.max.x-M.bounds.min.x;P>C&&(C=P),n.translate(M,{x:A*.5,y:P*.5}),m=M.bounds.max.x+l,c.addBody(v,M),g=M,y+=1}else m+=l}x+=C+f,m=s}return v},d.chain=function(s,o,i,a,l,f){for(var u=s.bodies,v=1;v<u.length;v++){var m=u[v-1],x=u[v],g=m.bounds.max.y-m.bounds.min.y,y=m.bounds.max.x-m.bounds.min.x,T=x.bounds.max.y-x.bounds.min.y,C=x.bounds.max.x-x.bounds.min.x,E={bodyA:m,pointA:{x:y*o,y:g*i},bodyB:x,pointB:{x:C*a,y:T*l}},M=r.extend(E,f);c.addConstraint(s,h.create(M))}return s.label+=" Chain",s},d.mesh=function(s,o,i,a,l){var f=s.bodies,u,v,m,x,g;for(u=0;u<i;u++){for(v=1;v<o;v++)m=f[v-1+u*o],x=f[v+u*o],c.addConstraint(s,h.create(r.extend({bodyA:m,bodyB:x},l)));if(u>0)for(v=0;v<o;v++)m=f[v+(u-1)*o],x=f[v+u*o],c.addConstraint(s,h.create(r.extend({bodyA:m,bodyB:x},l))),a&&v>0&&(g=f[v-1+(u-1)*o],c.addConstraint(s,h.create(r.extend({bodyA:g,bodyB:x},l)))),a&&v<o-1&&(g=f[v+1+(u-1)*o],c.addConstraint(s,h.create(r.extend({bodyA:g,bodyB:x},l))))}return s.label+=" Mesh",s},d.pyramid=function(s,o,i,a,l,f,u){return d.stack(s,o,i,a,l,f,function(v,m,x,g,y,T){var C=Math.min(a,Math.ceil(i/2)),E=y?y.bounds.max.x-y.bounds.min.x:0;if(!(g>C)){g=C-g;var M=g,P=i-1-g;if(!(x<M||x>P)){T===1&&n.translate(y,{x:(x+(i%2===1?1:-1))*E,y:0});var A=y?x*E:0;return u(s+A+x*l,m,x,g,y,T)}}})},d.newtonsCradle=function(s,o,i,a,l){for(var f=c.create({label:"Newtons Cradle"}),u=0;u<i;u++){var v=1.9,m=e.circle(s+u*(a*v),o+l,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=h.create({pointA:{x:s+u*(a*v),y:o},bodyB:m});c.addBody(f,m),c.addConstraint(f,x)}return f},d.car=function(s,o,i,a,l){var f=n.nextGroup(!0),u=20,v=-i*.5+u,m=i*.5-u,x=0,g=c.create({label:"Car"}),y=e.rectangle(s,o,i,a,{collisionFilter:{group:f},chamfer:{radius:a*.5},density:2e-4}),T=e.circle(s+v,o+x,l,{collisionFilter:{group:f},friction:.8}),C=e.circle(s+m,o+x,l,{collisionFilter:{group:f},friction:.8}),E=h.create({bodyB:y,pointB:{x:v,y:x},bodyA:T,stiffness:1,length:0}),M=h.create({bodyB:y,pointB:{x:m,y:x},bodyA:C,stiffness:1,length:0});return c.addBody(g,y),c.addBody(g,T),c.addBody(g,C),c.addConstraint(g,E),c.addConstraint(g,M),g},d.softBody=function(s,o,i,a,l,f,u,v,m,x){m=r.extend({inertia:1/0},m),x=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var g=d.stack(s,o,i,a,l,f,function(y,T){return e.circle(y,T,v,m)});return d.mesh(g,i,a,u,x),g.label="Soft Body",g}})()},66615:(p,S,t)=>{var d={};p.exports=d;var c=t(31725),h=t(53402);(function(){d.fromVertices=function(r){for(var n={},e=0;e<r.length;e++){var s=(e+1)%r.length,o=c.normalise({x:r[s].y-r[e].y,y:r[e].x-r[s].x}),i=o.y===0?1/0:o.x/o.y;i=i.toFixed(3).toString(),n[i]=o}return h.values(n)},d.rotate=function(r,n){if(n!==0)for(var e=Math.cos(n),s=Math.sin(n),o=0;o<r.length;o++){var i=r[o],a;a=i.x*e-i.y*s,i.y=i.x*s+i.y*e,i.x=a}}})()},15647:p=>{var S={};p.exports=S,function(){S.create=function(t){var d={min:{x:0,y:0},max:{x:0,y:0}};return t&&S.update(d,t),d},S.update=function(t,d,c){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var h=0;h<d.length;h++){var r=d[h];r.x>t.max.x&&(t.max.x=r.x),r.x<t.min.x&&(t.min.x=r.x),r.y>t.max.y&&(t.max.y=r.y),r.y<t.min.y&&(t.min.y=r.y)}c&&(c.x>0?t.max.x+=c.x:t.min.x+=c.x,c.y>0?t.max.y+=c.y:t.min.y+=c.y)},S.contains=function(t,d){return d.x>=t.min.x&&d.x<=t.max.x&&d.y>=t.min.y&&d.y<=t.max.y},S.overlaps=function(t,d){return t.min.x<=d.max.x&&t.max.x>=d.min.x&&t.max.y>=d.min.y&&t.min.y<=d.max.y},S.translate=function(t,d){t.min.x+=d.x,t.max.x+=d.x,t.min.y+=d.y,t.max.y+=d.y},S.shift=function(t,d){var c=t.max.x-t.min.x,h=t.max.y-t.min.y;t.min.x=d.x,t.max.x=d.x+c,t.min.y=d.y,t.max.y=d.y+h},S.wrap=function(t,d,c){var h=null,r=null;if(typeof d.min.x<"u"&&typeof d.max.x<"u"&&(t.min.x>d.max.x?h=d.min.x-t.max.x:t.max.x<d.min.x&&(h=d.max.x-t.min.x)),typeof d.min.y<"u"&&typeof d.max.y<"u"&&(t.min.y>d.max.y?r=d.min.y-t.max.y:t.max.y<d.min.y&&(r=d.max.y-t.min.y)),h!==null||r!==null)return{x:h||0,y:r||0}}}()},74058:(p,S,t)=>{var d={};p.exports=d,t(15647);var c=t(53402);(function(){d.pathToVertices=function(h,r){typeof window<"u"&&!("SVGPathSeg"in window)&&c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,e,s,o,i,a,l,f,u,v,m=[],x,g,y=0,T=0,C=0;r=r||15;var E=function(P,A,R){var F=R%2===1&&R>1;if(!u||P!=u.x||A!=u.y){u&&F?(x=u.x,g=u.y):(x=0,g=0);var w={x:x+P,y:g+A};(F||!u)&&(u=w),m.push(w),T=x+P,C=g+A}},M=function(P){var A=P.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":T=P.x,C=P.y;break;case"H":T=P.x;break;case"V":C=P.y;break}E(T,C,P.pathSegType)}};for(d._svgPathToAbsolute(h),s=h.getTotalLength(),a=[],n=0;n<h.pathSegList.numberOfItems;n+=1)a.push(h.pathSegList.getItem(n));for(l=a.concat();y<s;){if(v=h.getPathSegAtLength(y),i=a[v],i!=f){for(;l.length&&l[0]!=i;)M(l.shift());f=i}switch(i.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":o=h.getPointAtLength(y),E(o.x,o.y,0);break}y+=r}for(n=0,e=l.length;n<e;++n)M(l[n]);return m},d._svgPathToAbsolute=function(h){for(var r,n,e,s,o,i,a=h.pathSegList,l=0,f=0,u=a.numberOfItems,v=0;v<u;++v){var m=a.getItem(v),x=m.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(x))"x"in m&&(l=m.x),"y"in m&&(f=m.y);else switch("x1"in m&&(e=l+m.x1),"x2"in m&&(o=l+m.x2),"y1"in m&&(s=f+m.y1),"y2"in m&&(i=f+m.y2),"x"in m&&(l+=m.x),"y"in m&&(f+=m.y),x){case"m":a.replaceItem(h.createSVGPathSegMovetoAbs(l,f),v);break;case"l":a.replaceItem(h.createSVGPathSegLinetoAbs(l,f),v);break;case"h":a.replaceItem(h.createSVGPathSegLinetoHorizontalAbs(l),v);break;case"v":a.replaceItem(h.createSVGPathSegLinetoVerticalAbs(f),v);break;case"c":a.replaceItem(h.createSVGPathSegCurvetoCubicAbs(l,f,e,s,o,i),v);break;case"s":a.replaceItem(h.createSVGPathSegCurvetoCubicSmoothAbs(l,f,o,i),v);break;case"q":a.replaceItem(h.createSVGPathSegCurvetoQuadraticAbs(l,f,e,s),v);break;case"t":a.replaceItem(h.createSVGPathSegCurvetoQuadraticSmoothAbs(l,f),v);break;case"a":a.replaceItem(h.createSVGPathSegArcAbs(l,f,m.r1,m.r2,m.angle,m.largeArcFlag,m.sweepFlag),v);break;case"z":case"Z":l=r,f=n;break}(x=="M"||x=="m")&&(r=l,n=f)}}})()},31725:p=>{var S={};p.exports=S,function(){S.create=function(t,d){return{x:t||0,y:d||0}},S.clone=function(t){return{x:t.x,y:t.y}},S.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},S.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},S.rotate=function(t,d,c){var h=Math.cos(d),r=Math.sin(d);c||(c={});var n=t.x*h-t.y*r;return c.y=t.x*r+t.y*h,c.x=n,c},S.rotateAbout=function(t,d,c,h){var r=Math.cos(d),n=Math.sin(d);h||(h={});var e=c.x+((t.x-c.x)*r-(t.y-c.y)*n);return h.y=c.y+((t.x-c.x)*n+(t.y-c.y)*r),h.x=e,h},S.normalise=function(t){var d=S.magnitude(t);return d===0?{x:0,y:0}:{x:t.x/d,y:t.y/d}},S.dot=function(t,d){return t.x*d.x+t.y*d.y},S.cross=function(t,d){return t.x*d.y-t.y*d.x},S.cross3=function(t,d,c){return(d.x-t.x)*(c.y-t.y)-(d.y-t.y)*(c.x-t.x)},S.add=function(t,d,c){return c||(c={}),c.x=t.x+d.x,c.y=t.y+d.y,c},S.sub=function(t,d,c){return c||(c={}),c.x=t.x-d.x,c.y=t.y-d.y,c},S.mult=function(t,d){return{x:t.x*d,y:t.y*d}},S.div=function(t,d){return{x:t.x/d,y:t.y/d}},S.perp=function(t,d){return d=d===!0?-1:1,{x:d*-t.y,y:d*t.x}},S.neg=function(t){return{x:-t.x,y:-t.y}},S.angle=function(t,d){return Math.atan2(d.y-t.y,d.x-t.x)},S._temp=[S.create(),S.create(),S.create(),S.create(),S.create(),S.create()]}()},41598:(p,S,t)=>{var d={};p.exports=d;var c=t(31725),h=t(53402);(function(){d.create=function(r,n){for(var e=[],s=0;s<r.length;s++){var o=r[s],i={x:o.x,y:o.y,index:s,body:n,isInternal:!1};e.push(i)}return e},d.fromPath=function(r,n){var e=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,s=[];return r.replace(e,function(o,i,a){s.push({x:parseFloat(i),y:parseFloat(a)})}),d.create(s,n)},d.centre=function(r){for(var n=d.area(r,!0),e={x:0,y:0},s,o,i,a=0;a<r.length;a++)i=(a+1)%r.length,s=c.cross(r[a],r[i]),o=c.mult(c.add(r[a],r[i]),s),e=c.add(e,o);return c.div(e,6*n)},d.mean=function(r){for(var n={x:0,y:0},e=0;e<r.length;e++)n.x+=r[e].x,n.y+=r[e].y;return c.div(n,r.length)},d.area=function(r,n){for(var e=0,s=r.length-1,o=0;o<r.length;o++)e+=(r[s].x-r[o].x)*(r[s].y+r[o].y),s=o;return n?e/2:Math.abs(e)/2},d.inertia=function(r,n){for(var e=0,s=0,o=r,i,a,l=0;l<o.length;l++)a=(l+1)%o.length,i=Math.abs(c.cross(o[a],o[l])),e+=i*(c.dot(o[a],o[a])+c.dot(o[a],o[l])+c.dot(o[l],o[l])),s+=i;return n/6*(e/s)},d.translate=function(r,n,e){e=typeof e<"u"?e:1;var s=r.length,o=n.x*e,i=n.y*e,a;for(a=0;a<s;a++)r[a].x+=o,r[a].y+=i;return r},d.rotate=function(r,n,e){if(n!==0){var s=Math.cos(n),o=Math.sin(n),i=e.x,a=e.y,l=r.length,f,u,v,m;for(m=0;m<l;m++)f=r[m],u=f.x-i,v=f.y-a,f.x=i+(u*s-v*o),f.y=a+(u*o+v*s);return r}},d.contains=function(r,n){for(var e=n.x,s=n.y,o=r.length,i=r[o-1],a,l=0;l<o;l++){if(a=r[l],(e-i.x)*(a.y-i.y)+(s-i.y)*(i.x-a.x)>0)return!1;i=a}return!0},d.scale=function(r,n,e,s){if(n===1&&e===1)return r;s=s||d.centre(r);for(var o,i,a=0;a<r.length;a++)o=r[a],i=c.sub(o,s),r[a].x=s.x+i.x*n,r[a].y=s.y+i.y*e;return r},d.chamfer=function(r,n,e,s,o){typeof n=="number"?n=[n]:n=n||[8],e=typeof e<"u"?e:-1,s=s||2,o=o||14;for(var i=[],a=0;a<r.length;a++){var l=r[a-1>=0?a-1:r.length-1],f=r[a],u=r[(a+1)%r.length],v=n[a<n.length?a:n.length-1];if(v===0){i.push(f);continue}var m=c.normalise({x:f.y-l.y,y:l.x-f.x}),x=c.normalise({x:u.y-f.y,y:f.x-u.x}),g=Math.sqrt(2*Math.pow(v,2)),y=c.mult(h.clone(m),v),T=c.normalise(c.mult(c.add(m,x),.5)),C=c.sub(f,c.mult(T,g)),E=e;e===-1&&(E=Math.pow(v,.32)*1.75),E=h.clamp(E,s,o),E%2===1&&(E+=1);for(var M=Math.acos(c.dot(m,x)),P=M/E,A=0;A<E;A++)i.push(c.add(c.rotate(y,P*A),C))}return i},d.clockwiseSort=function(r){var n=d.mean(r);return r.sort(function(e,s){return c.angle(n,e)-c.angle(n,s)}),r},d.isConvex=function(r){var n=0,e=r.length,s,o,i,a;if(e<3)return null;for(s=0;s<e;s++)if(o=(s+1)%e,i=(s+2)%e,a=(r[o].x-r[s].x)*(r[i].y-r[o].y),a-=(r[o].y-r[s].y)*(r[i].x-r[o].x),a<0?n|=1:a>0&&(n|=2),n===3)return!1;return n!==0?!0:null},d.hull=function(r){var n=[],e=[],s,o;for(r=r.slice(0),r.sort(function(i,a){var l=i.x-a.x;return l!==0?l:i.y-a.y}),o=0;o<r.length;o+=1){for(s=r[o];e.length>=2&&c.cross3(e[e.length-2],e[e.length-1],s)<=0;)e.pop();e.push(s)}for(o=r.length-1;o>=0;o-=1){for(s=r[o];n.length>=2&&c.cross3(n[n.length-2],n[n.length-1],s)<=0;)n.pop();n.push(s)}return n.pop(),e.pop(),n.concat(e)}})()},55973:p=>{/**
 */p.exports={decomp:M,quickDecomp:F,isSimple:A,removeCollinearPoints:w,removeDuplicatePoints:I,makeCCW:u};function S(D,B,L){L=L||0;var G=[0,0],O,z,X,V,Y,W,H;return O=D[1][1]-D[0][1],z=D[0][0]-D[1][0],X=O*D[0][0]+z*D[0][1],V=B[1][1]-B[0][1],Y=B[0][0]-B[1][0],W=V*B[0][0]+Y*B[0][1],H=O*Y-V*z,U(H,0,L)||(G[0]=(Y*X-z*W)/H,G[1]=(O*W-V*X)/H),G}function t(D,B,L,G){var O=B[0]-D[0],z=B[1]-D[1],X=G[0]-L[0],V=G[1]-L[1];if(X*z-V*O===0)return!1;var Y=(O*(L[1]-D[1])+z*(D[0]-L[0]))/(X*z-V*O),W=(X*(D[1]-L[1])+V*(L[0]-D[0]))/(V*O-X*z);return Y>=0&&Y<=1&&W>=0&&W<=1}function d(D,B,L){return(B[0]-D[0])*(L[1]-D[1])-(L[0]-D[0])*(B[1]-D[1])}function c(D,B,L){return d(D,B,L)>0}function h(D,B,L){return d(D,B,L)>=0}function r(D,B,L){return d(D,B,L)<0}function n(D,B,L){return d(D,B,L)<=0}var e=[],s=[];function o(D,B,L,G){if(G){var O=e,z=s;O[0]=B[0]-D[0],O[1]=B[1]-D[1],z[0]=L[0]-B[0],z[1]=L[1]-B[1];var X=O[0]*z[0]+O[1]*z[1],V=Math.sqrt(O[0]*O[0]+O[1]*O[1]),Y=Math.sqrt(z[0]*z[0]+z[1]*z[1]),W=Math.acos(X/(V*Y));return W<G}else return d(D,B,L)===0}function i(D,B){var L=B[0]-D[0],G=B[1]-D[1];return L*L+G*G}function a(D,B){var L=D.length;return D[B<0?B%L+L:B%L]}function l(D){D.length=0}function f(D,B,L,G){for(var O=L;O<G;O++)D.push(B[O])}function u(D){for(var B=0,L=D,G=1;G<D.length;++G)(L[G][1]<L[B][1]||L[G][1]===L[B][1]&&L[G][0]>L[B][0])&&(B=G);return c(a(D,B-1),a(D,B),a(D,B+1))?!1:(v(D),!0)}function v(D){for(var B=[],L=D.length,G=0;G!==L;G++)B.push(D.pop());for(var G=0;G!==L;G++)D[G]=B[G]}function m(D,B){return r(a(D,B-1),a(D,B),a(D,B+1))}var x=[],g=[];function y(D,B,L){var G,O,z=x,X=g;if(h(a(D,B+1),a(D,B),a(D,L))&&n(a(D,B-1),a(D,B),a(D,L)))return!1;O=i(a(D,B),a(D,L));for(var V=0;V!==D.length;++V)if(!((V+1)%D.length===B||V===B)&&h(a(D,B),a(D,L),a(D,V+1))&&n(a(D,B),a(D,L),a(D,V))&&(z[0]=a(D,B),z[1]=a(D,L),X[0]=a(D,V),X[1]=a(D,V+1),G=S(z,X),i(a(D,B),G)<O))return!1;return!0}function T(D,B,L){for(var G=0;G!==D.length;++G)if(!(G===B||G===L||(G+1)%D.length===B||(G+1)%D.length===L)&&t(a(D,B),a(D,L),a(D,G),a(D,G+1)))return!1;return!0}function C(D,B,L,G){var O=G||[];if(l(O),B<L)for(var z=B;z<=L;z++)O.push(D[z]);else{for(var z=0;z<=L;z++)O.push(D[z]);for(var z=B;z<D.length;z++)O.push(D[z])}return O}function E(D){for(var B=[],L=[],G=[],O=[],z=Number.MAX_VALUE,X=0;X<D.length;++X)if(m(D,X)){for(var V=0;V<D.length;++V)if(y(D,X,V)){L=E(C(D,X,V,O)),G=E(C(D,V,X,O));for(var Y=0;Y<G.length;Y++)L.push(G[Y]);L.length<z&&(B=L,z=L.length,B.push([a(D,X),a(D,V)]))}}return B}function M(D){var B=E(D);return B.length>0?P(D,B):[D]}function P(D,B){if(B.length===0)return[D];if(B instanceof Array&&B.length&&B[0]instanceof Array&&B[0].length===2&&B[0][0]instanceof Array){for(var L=[D],G=0;G<B.length;G++)for(var O=B[G],z=0;z<L.length;z++){var X=L[z],V=P(X,O);if(V){L.splice(z,1),L.push(V[0],V[1]);break}}return L}else{var O=B,G=D.indexOf(O[0]),z=D.indexOf(O[1]);return G!==-1&&z!==-1?[C(D,G,z),C(D,z,G)]:!1}}function A(D){var B=D,L;for(L=0;L<B.length-1;L++)for(var G=0;G<L-1;G++)if(t(B[L],B[L+1],B[G],B[G+1]))return!1;for(L=1;L<B.length-2;L++)if(t(B[0],B[B.length-1],B[L],B[L+1]))return!1;return!0}function R(D,B,L,G,O){O=O||0;var z=B[1]-D[1],X=D[0]-B[0],V=z*D[0]+X*D[1],Y=G[1]-L[1],W=L[0]-G[0],H=Y*L[0]+W*L[1],K=z*W-Y*X;return U(K,0,O)?[0,0]:[(W*V-X*H)/K,(z*H-Y*V)/K]}function F(D,B,L,G,O,z,X){z=z||100,X=X||0,O=O||25,B=typeof B<"u"?B:[],L=L||[],G=G||[];var V=[0,0],Y=[0,0],W=[0,0],H=0,K=0,b=0,Q=0,j=0,J=0,it=0,st=[],nt=[],$=D,_=D;if(_.length<3)return B;if(X++,X>z)return console.warn("quickDecomp: max level ("+z+") reached."),B;for(var tt=0;tt<D.length;++tt)if(m($,tt)){L.push($[tt]),H=K=Number.MAX_VALUE;for(var rt=0;rt<D.length;++rt)c(a($,tt-1),a($,tt),a($,rt))&&n(a($,tt-1),a($,tt),a($,rt-1))&&(W=R(a($,tt-1),a($,tt),a($,rt),a($,rt-1)),r(a($,tt+1),a($,tt),W)&&(b=i($[tt],W),b<K&&(K=b,Y=W,J=rt))),c(a($,tt+1),a($,tt),a($,rt+1))&&n(a($,tt+1),a($,tt),a($,rt))&&(W=R(a($,tt+1),a($,tt),a($,rt),a($,rt+1)),c(a($,tt-1),a($,tt),W)&&(b=i($[tt],W),b<H&&(H=b,V=W,j=rt)));if(J===(j+1)%D.length)W[0]=(Y[0]+V[0])/2,W[1]=(Y[1]+V[1])/2,G.push(W),tt<j?(f(st,$,tt,j+1),st.push(W),nt.push(W),J!==0&&f(nt,$,J,$.length),f(nt,$,0,tt+1)):(tt!==0&&f(st,$,tt,$.length),f(st,$,0,j+1),st.push(W),nt.push(W),f(nt,$,J,tt+1));else{if(J>j&&(j+=D.length),Q=Number.MAX_VALUE,j<J)return B;for(var rt=J;rt<=j;++rt)h(a($,tt-1),a($,tt),a($,rt))&&n(a($,tt+1),a($,tt),a($,rt))&&(b=i(a($,tt),a($,rt)),b<Q&&T($,tt,rt)&&(Q=b,it=rt%D.length));tt<it?(f(st,$,tt,it+1),it!==0&&f(nt,$,it,_.length),f(nt,$,0,tt+1)):(tt!==0&&f(st,$,tt,_.length),f(st,$,0,it+1),f(nt,$,it,tt+1))}return st.length<nt.length?(F(st,B,L,G,O,z,X),F(nt,B,L,G,O,z,X)):(F(nt,B,L,G,O,z,X),F(st,B,L,G,O,z,X)),B}return B.push(D),B}function w(D,B){for(var L=0,G=D.length-1;D.length>3&&G>=0;--G)o(a(D,G-1),a(D,G),a(D,G+1),B)&&(D.splice(G%D.length,1),L++);return L}function I(D,B){for(var L=D.length-1;L>=1;--L)for(var G=D[L],O=L-1;O>=0;--O)if(N(G,D[O],B)){D.splice(L,1);continue}}function U(D,B,L){return L=L||0,Math.abs(D-B)<=L}function N(D,B,L){return U(D[0],B[0],L)&&U(D[1],B[1],L)}},52018:(p,S,t)=>{/**
 */var d=t(83419),c=t(94811),h=t(95540),r=t(98840),n=t(44667),e=t(61340),s=t(70554),o=t(14500),i=t(29100),a=new d({Extends:i,initialize:function(f){var u=f.game.renderer,v=h(f,"fragShader",r);f.fragShader=s.parseFragmentShaderMaxTextures(v,u.maxTextures),f.vertShader=h(f,"vertShader",n),f.attributes=h(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:o.UNSIGNED_BYTE,normalized:!0}]),f.resizeUniform="uResolution",i.call(this,f),this._tempMatrix1=new e,this._tempMatrix2=new e,this._tempMatrix3=new e,this.calcMatrix=new e,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){i.prototype.boot.call(this);var l=this.renderer;this.set1iv("uMainSampler",l.textureIndexes),this.set2f("uResolution",l.width,l.height)},batchSprite:function(l,f,u){this.manager.set(this,l);var v=this._tempMatrix1,m=this._tempMatrix2,x=this._tempMatrix3,g=l.frame,y=g.glTexture,T=g.u0,C=g.v0,E=g.u1,M=g.v1,P=g.x,A=g.y,R=g.cutWidth,F=g.cutHeight,w=g.customPivot,I=l.displayOriginX,U=l.displayOriginY,N=-I+P,D=-U+A;if(l.isCropped){var B=l._crop;(B.flipX!==l.flipX||B.flipY!==l.flipY)&&g.updateCropUVs(B,l.flipX,l.flipY),T=B.u0,C=B.v0,E=B.u1,M=B.v1,R=B.width,F=B.height,P=B.x,A=B.y,N=-I+P,D=-U+A}var L=1,G=1;l.flipX&&(w||(N+=-g.realWidth+I*2),L=-1),l.flipY&&(w||(D+=-g.realHeight+U*2),G=-1);var O=l.x,z=l.y;f.roundPixels&&(O=Math.floor(O),z=Math.floor(z)),m.applyITRS(O,z,l.rotation,l.scaleX*L,l.scaleY*G),v.copyFrom(f.matrix),u?(v.multiplyWithOffset(u,-f.scrollX*l.scrollFactorX,-f.scrollY*l.scrollFactorY),m.e=O,m.f=z):(m.e-=f.scrollX*l.scrollFactorX,m.f-=f.scrollY*l.scrollFactorY),v.multiply(m,x);var X=x.setQuad(N,D,N+R,D+F,f.renderRoundPixels),V=s.getTintAppendFloatAlpha,Y=f.alpha,W=V(l.tintTopLeft,Y*l._alphaTL),H=V(l.tintTopRight,Y*l._alphaTR),K=V(l.tintBottomLeft,Y*l._alphaBL),b=V(l.tintBottomRight,Y*l._alphaBR);this.shouldFlush(6)&&this.flush();var Q=this.setGameObject(l,g);this.manager.preBatch(l),this.batchQuad(l,X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],T,C,E,M,W,H,K,b,l.tintFill,y,Q),this.manager.postBatch(l)},batchTexture:function(l,f,u,v,m,x,g,y,T,C,E,M,P,A,R,F,w,I,U,N,D,B,L,G,O,z,X,V,Y,W,H,K,b){b===void 0&&(b=!1),this.manager.set(this,l);var Q=this._tempMatrix1,j=this._tempMatrix2,J=this._tempMatrix3,it=I/u+X,st=U/v+V,nt=(I+N)/u+X,$=(U+D)/v+V,_=g,tt=y,rt=-F,ht=-w;if(l.isCropped){var ut=l._crop,at=ut.width,ot=ut.height;_=at,tt=ot,g=at,y=ot,I=ut.x,U=ut.y;var dt=I,mt=U;M&&(dt=N-ut.x-at),P&&(mt=D-ut.y-ot),it=dt/u+X,st=mt/v+V,nt=(dt+at)/u+X,$=(mt+ot)/v+V,rt=-F+I,ht=-w+U}P=P^(!H&&f.isRenderTexture?1:0),M&&(_*=-1,rt+=g),P&&(tt*=-1,ht+=y),Y.roundPixels&&(m=Math.floor(m),x=Math.floor(x)),j.applyITRS(m,x,E,T,C),Q.copyFrom(Y.matrix),W?(Q.multiplyWithOffset(W,-Y.scrollX*A,-Y.scrollY*R),j.e=m,j.f=x):(j.e-=Y.scrollX*A,j.f-=Y.scrollY*R),Q.multiply(j,J);var lt=J.setQuad(rt,ht,rt+_,ht+tt,Y.renderRoundPixels);K==null&&(K=this.setTexture2D(f)),l&&!b&&this.manager.preBatch(l),this.batchQuad(l,lt[0],lt[1],lt[2],lt[3],lt[4],lt[5],lt[6],lt[7],it,st,nt,$,B,L,G,O,z,f,K),l&&!b&&this.manager.postBatch(l)},batchTextureFrame:function(l,f,u,v,m,x,g){this.manager.set(this);var y=this._tempMatrix1.copyFrom(x),T=this._tempMatrix2;g?y.multiply(g,T):T=y;var C=T.setQuad(f,u,f+l.width,u+l.height),E=this.setTexture2D(l.source.glTexture);v=s.getTintAppendFloatAlpha(v,m),this.batchQuad(null,C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],l.u0,l.v0,l.u1,l.v1,v,v,v,v,0,l.glTexture,E)},batchFillRect:function(l,f,u,v,m,x){this.renderer.pipelines.set(this);var g=this.calcMatrix;x&&x.multiply(m,g);var y=g.setQuad(l,f,l+u,f+v),T=this.fillTint;this.batchQuad(null,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],0,0,1,1,T.TL,T.TR,T.BL,T.BR,2)},batchFillTriangle:function(l,f,u,v,m,x,g,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(g,T);var C=T.getX(l,f),E=T.getY(l,f),M=T.getX(u,v),P=T.getY(u,v),A=T.getX(m,x),R=T.getY(m,x),F=this.fillTint;this.batchTri(null,C,E,M,P,A,R,0,0,1,1,F.TL,F.TR,F.BL,2)},batchStrokeTriangle:function(l,f,u,v,m,x,g,y,T){var C=this.tempTriangle;C[0].x=l,C[0].y=f,C[0].width=g,C[1].x=u,C[1].y=v,C[1].width=g,C[2].x=m,C[2].y=x,C[2].width=g,C[3].x=l,C[3].y=f,C[3].width=g,this.batchStrokePath(C,g,!1,y,T)},batchFillPath:function(l,f,u){this.renderer.pipelines.set(this);var v=this.calcMatrix;u&&u.multiply(f,v);for(var m=l.length,x=this.polygonCache,g,y,T=this.fillTint.TL,C=this.fillTint.TR,E=this.fillTint.BL,M=0;M<m;++M)y=l[M],x.push(y.x,y.y);g=c(x),m=g.length;for(var P=0;P<m;P+=3){var A=g[P+0]*2,R=g[P+1]*2,F=g[P+2]*2,w=x[A+0],I=x[A+1],U=x[R+0],N=x[R+1],D=x[F+0],B=x[F+1],L=v.getX(w,I),G=v.getY(w,I),O=v.getX(U,N),z=v.getY(U,N),X=v.getX(D,B),V=v.getY(D,B);this.batchTri(null,L,G,O,z,X,V,0,0,1,1,T,C,E,2)}x.length=0},batchStrokePath:function(l,f,u,v,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var x=l.length-1,g=0;g<x;g++){var y=l[g],T=l[g+1];this.batchLine(y.x,y.y,T.x,T.y,y.width/2,T.width/2,f,g,!u&&g===x-1,v,m)}},batchLine:function(l,f,u,v,m,x,g,y,T,C,E){this.renderer.pipelines.set(this);var M=this.calcMatrix;E&&E.multiply(C,M);var P=u-l,A=v-f,R=Math.sqrt(P*P+A*A);if(R!==0){var F=m*(v-f)/R,w=m*(l-u)/R,I=x*(v-f)/R,U=x*(l-u)/R,N=u-I,D=v-U,B=l-F,L=f-w,G=u+I,O=v+U,z=l+F,X=f+w,V=M.getX(N,D),Y=M.getY(N,D),W=M.getX(B,L),H=M.getY(B,L),K=M.getX(G,O),b=M.getY(G,O),Q=M.getX(z,X),j=M.getY(z,X),J=this.strokeTint,it=J.TL,st=J.TR,nt=J.BL,$=J.BR;if(this.batchQuad(null,Q,j,W,H,V,Y,K,b,0,0,1,1,it,st,nt,$,2),!(g<=2)){var _=this.prevQuad,tt=this.firstQuad;y>0&&_[4]?this.batchQuad(null,Q,j,W,H,_[0],_[1],_[2],_[3],0,0,1,1,it,st,nt,$,2):(tt[0]=Q,tt[1]=j,tt[2]=W,tt[3]=H,tt[4]=1),T&&tt[4]?this.batchQuad(null,V,Y,K,b,tt[0],tt[1],tt[2],tt[3],0,0,1,1,it,st,nt,$,2):(_[0]=V,_[1]=Y,_[2]=K,_[3]=b,_[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,i.prototype.destroy.call(this),this}});p.exports=a},43439:(p,S,t)=>{/**
 */var d=t(10312),c=t(67502),h=t(83419),r=t(96293),n=t(95540),e=t(57516),s=t(27681),o=t(87841),i=t(32302),a=t(45561),l=t(60722),f=t(29100),u=new h({Extends:e,initialize:function(m){var x=n(m,"fragShader",s),g=n(m,"vertShader",l),y=n(m,"drawShader",s),T=[{name:"DrawSprite",fragShader:a,vertShader:l},{name:"CopySprite",fragShader:x,vertShader:g},{name:"DrawGame",fragShader:y,vertShader:l},{name:"ColorMatrix",fragShader:r}],C=n(m,"shaders",[]);m.shaders=T.concat(C),m.vertShader||(m.vertShader=g),m.batchSize=1,e.call(this,m),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new o,this.targetBounds=new o,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){f.prototype.boot.call(this);var v=this.shaders,m=this.renderer;this.drawSpriteShader=v[0],this.copyShader=v[1],this.gameShader=v[2],this.colorMatrixShader=v[3],this.fsTarget=new i(m,m.width,m.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var x=new ArrayBuffer(168);this.quadVertexData=x,this.quadVertexViewF32=new Float32Array(x),this.quadVertexBuffer=m.createVertexBuffer(x,this.gl.STATIC_DRAW),this.onResize(m.width,m.height),this.currentShader=this.copyShader,this.set2f("uResolution",m.width,m.height)},onResize:function(v,m){var x=this.quadVertexViewF32;x[1]=m,x[22]=m,x[14]=v,x[28]=v,x[35]=v,x[36]=m},batchQuad:function(v,m,x,g,y,T,C,E,M,P,A,R,F,w,I,U,N,D,B){var L=Math.min(m,g,T,E),G=Math.min(x,y,C,M),O=Math.max(m,g,T,E),z=Math.max(x,y,C,M),X=O-L,V=z-G,Y=this.spriteBounds.setTo(L,G,X,V),W=v?v.preFX.padding:0,H=X+W*2,K=V+W*2,b=Math.abs(Math.max(H,K)),Q=this.manager.getRenderTarget(b),j=this.targetBounds.setTo(0,0,Q.width,Q.height);c(j,Math.round(Y.centerX),Math.round(Y.centerY)),this.tempSprite=v;var J=this.gl,it=this.renderer;it.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",it.width,it.height),this.flipProjectionMatrix(!0),v&&(this.onDrawSprite(v,Q),v.preFX.onFX(this));var st=this.fsTarget;return this.flush(),J.viewport(0,0,it.width,it.height),J.bindFramebuffer(J.FRAMEBUFFER,st.framebuffer.webGLFramebuffer),J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,st.texture.webGLTexture,0),J.clearColor(0,0,0,0),J.clear(J.COLOR_BUFFER_BIT),this.setTexture2D(B),this.batchVert(m,x,P,A,0,D,w),this.batchVert(g,y,P,F,0,D,U),this.batchVert(T,C,R,F,0,D,N),this.batchVert(m,x,P,A,0,D,w),this.batchVert(T,C,R,F,0,D,N),this.batchVert(E,M,R,A,0,D,I),this.flush(),this.flipProjectionMatrix(!1),J.activeTexture(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,Q.texture.webGLTexture),J.copyTexSubImage2D(J.TEXTURE_2D,0,0,0,j.x,j.y,j.width,j.height),J.bindFramebuffer(J.FRAMEBUFFER,null),J.bindTexture(J.TEXTURE_2D,null),this.onBatch(v),this.currentShader=this.copyShader,this.onDraw(Q,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(v,m,x,g,y,T,C){x===void 0&&(x=!0),g===void 0&&(g=!0),y===void 0&&(y=!1),C===void 0&&(C=this.copyShader);var E=this.gl,M=this.tempSprite;T&&(C=this.colorMatrixShader),this.currentShader=C;var P=this.setVertexBuffer(this.quadVertexBuffer);C.bind(P,!1);var A=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",A.width,A.height),M.preFX.onFXCopy(this),this.onCopySprite(v,m,M),T&&(this.set1fv("uColorMatrix",T.getData()),this.set1f("uAlpha",T.alpha)),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,v.texture.webGLTexture),v.height>m.height)E.viewport(0,0,v.width,v.height),this.setTargetUVs(v,m);else{var R=m.height-v.height;E.viewport(0,R,v.width,v.height),this.resetUVs()}if(E.bindFramebuffer(E.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,m.texture.webGLTexture,0),x&&(E.clearColor(0,0,0,+!g),E.clear(E.COLOR_BUFFER_BIT)),y){var F=this.renderer.currentBlendMode;this.renderer.setBlendMode(d.ERASE)}E.bufferData(E.ARRAY_BUFFER,this.quadVertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),y&&this.renderer.setBlendMode(F),E.bindFramebuffer(E.FRAMEBUFFER,null)},copy:function(v,m){var x=this.gl;this.set1i("uMainSampler",0),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,v.texture.webGLTexture),x.viewport(0,0,v.width,v.height),this.setUVs(0,0,0,1,1,1,1,0),x.bindFramebuffer(x.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,m.texture.webGLTexture,0),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT),x.bufferData(x.ARRAY_BUFFER,this.quadVertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),x.bindFramebuffer(x.FRAMEBUFFER,null)},blendFrames:function(v,m,x,g,y){this.manager.blendFrames(v,m,x,g,y)},blendFramesAdditive:function(v,m,x,g,y){this.manager.blendFramesAdditive(v,m,x,g,y)},drawToGame:function(v){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(v)},copyToGame:function(v){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(v)},bindAndDraw:function(v){var m=this.gl,x=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(v.texture);var g=this._tempMatrix1.loadIdentity(),y=this.targetBounds.x,T=this.targetBounds.y,C=y+v.width,E=T+v.height,M=g.getX(y,T),P=g.getX(y,E),A=g.getX(C,E),R=g.getX(C,T),F=g.getY(y,T),w=g.getY(y,E),I=g.getY(C,E),U=g.getY(C,T),N=16777215;this.batchVert(M,F,0,0,0,0,N),this.batchVert(P,w,0,1,0,0,N),this.batchVert(A,I,1,1,0,0,N),this.batchVert(M,F,0,0,0,0,N),this.batchVert(A,I,1,1,0,0,N),this.batchVert(R,U,1,0,0,0,N),x.restoreFramebuffer(!1,!0),x.currentFramebuffer||m.viewport(0,0,x.width,x.height),x.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(v){this.drawToGame(v)},setUVs:function(v,m,x,g,y,T,C,E){var M=this.quadVertexViewF32;M[2]=v,M[3]=m,M[9]=x,M[10]=g,M[16]=y,M[17]=T,M[23]=v,M[24]=m,M[30]=y,M[31]=T,M[37]=C,M[38]=E},setTargetUVs:function(v,m){var x=m.height/v.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,e.prototype.destroy.call(this),this}});p.exports=u},81041:(p,S,t)=>{/**
 */var d=t(70402),c=t(69902),h=t(23568),r=t(57355),n=t(6113),e=t(95540),s=t(91389),o=t(55292),i=t(82985),a=t(62329),l=t(35154),f=t(17777),u=t(269),v=t(86081),m=function(x,g,y){if(g instanceof v)return g.parent=x,g;y===void 0?y=c:y=u(c,y);var T=a(g);!T&&y.targets&&(T=y.targets);for(var C=i(g),E=e(g,"delay",y.delay),M=e(g,"duration",y.duration),P=e(g,"easeParams",y.easeParams),A=e(g,"ease",y.ease),R=e(g,"hold",y.hold),F=e(g,"repeat",y.repeat),w=e(g,"repeatDelay",y.repeatDelay),I=r(g,"yoyo",y.yoyo),U=r(g,"flipX",y.flipX),N=r(g,"flipY",y.flipY),D=e(g,"interpolation",y.interpolation),B=function(b,Q,j,J){if(j==="texture"){var it=J,st=void 0;Array.isArray(J)?(it=J[0],st=J[1]):J.hasOwnProperty("value")?(it=J.value,Array.isArray(J.value)?(it=J.value[0],st=J.value[1]):typeof J.value=="string"&&(it=J.value)):typeof J=="string"&&(it=J),b.addFrame(Q,it,st,o(J,"delay",E),e(J,"duration",M),e(J,"hold",R),e(J,"repeat",F),e(J,"repeatDelay",w),r(J,"flipX",U),r(J,"flipY",N))}else{var nt=f(j,J),$=s(e(J,"interpolation",D));b.add(Q,j,nt.getEnd,nt.getStart,nt.getActive,n(e(J,"ease",A),e(J,"easeParams",P)),o(J,"delay",E),e(J,"duration",M),r(J,"yoyo",I),e(J,"hold",R),e(J,"repeat",F),e(J,"repeatDelay",w),r(J,"flipX",U),r(J,"flipY",N),$,$?J:null)}},L=new v(x,T),G=0;G<C.length;G++)for(var O=C[G].key,z=C[G].value,X=0;X<T.length;X++)O==="scale"&&!T[X].hasOwnProperty("scale")?(B(L,X,"scaleX",z),B(L,X,"scaleY",z)):B(L,X,O,z);L.completeDelay=h(g,"completeDelay",0),L.loop=Math.round(h(g,"loop",0)),L.loopDelay=Math.round(h(g,"loopDelay",0)),L.paused=r(g,"paused",!1),L.persist=r(g,"persist",!1),L.callbackScope=e(g,"callbackScope",L);for(var V=d.TYPES,Y=0;Y<V.length;Y++){var W=V[Y],H=l(g,W,!1);if(H){var K=l(g,W+"Params",[]);L.setCallback(W,H,K)}}return L};p.exports=m},26012:(p,S,t)=>{/**
 */p.exports={Format:t(27902),Pad:t(41836),RemoveAt:t(33628),Reverse:t(27671),UppercaseFirst:t(35355),UUID:t(45650)}}},k={};function q(p){var S=k[p];if(S!==void 0)return S.exports;var t=k[p]={exports:{}};return Z[p](t,t.exports,q),t.exports}q.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var et=q(85454);return et})())})(At);var Ot=At.exports;const Pt=Lt(Ot);function Dt(ft,pt){const Z=Math.abs(ft.pos.x-pt.pos.x),k=Math.abs(ft.pos.y-pt.pos.y);return Z+k===1}function wt(ft){const pt=ft.placed.filter(k=>k.id==="power_cube"),Z=ft.placed.filter(k=>k.id!=="power_cube");for(const k of Z)k.powered=pt.some(q=>Dt(q,k))}function Bt(ft,pt,Z){for(const k of ft.placed)k.id==="ceb_press"&&k.powered&&(k._t=(k._t??0)+pt,k._t>1.5&&(k._t=0,ft.inventory.brick_ceb=(ft.inventory.brick_ceb??0)+1,Z==null||Z("CEB Press produced 1 brick")))}class It extends Pt.Scene{constructor(){super("game");xt(this,"state",{gridSize:32,width:20,height:12,placed:[],player:{pos:{x:15,y:10},health:100,thirst:100,energy:100},resources:[],inventory:{brick_ceb:0,clay:0,water:0,stone:0},selected:"power_cube",buildables:[{id:"power_cube",name:"Power Cube",description:"Provides hydraulic power to adjacent machines",requirements:{stone:10,clay:5},buildTime:30,unlocked:!0},{id:"ceb_press",name:"CEB Press",description:"Compresses earth into building blocks",requirements:{stone:20,clay:15,brick_ceb:5},buildTime:120,unlocked:!1},{id:"water_well",name:"Water Well",description:"Extracts water from underground",requirements:{stone:15,clay:10},buildTime:60,unlocked:!0},{id:"storage_shed",name:"Storage Shed",description:"Increases inventory capacity",requirements:{stone:25,clay:20},buildTime:90,unlocked:!0}],buildQueue:[]});xt(this,"hotbar");xt(this,"eventLog");xt(this,"buildablesList");xt(this,"buildQueue");xt(this,"inventoryList");xt(this,"overlaysCollapsed",!1);xt(this,"overlayElements",[]);xt(this,"overlayToggleButton");xt(this,"modeToggleButton");xt(this,"interactionMode","build");xt(this,"movementPath",[]);xt(this,"movementAccum",0)}preload(){this.load.image("tiles","/tilesets/placeholder-tiles.png"),this.load.json("map","/maps/desert-map.json")}create(){var q,et,p,S,t,d;const Z=this.cache.json.get("map");this.state.width=Z.width,this.state.height=Z.height,this.state.gridSize=Z.tileSize,this.cameras.main.setBackgroundColor(724754),this.cameras.main.setZoom(1.5),this.cameras.main.centerOn(Z.width*Z.tileSize/2,Z.height*Z.tileSize/2);const k=this.add.graphics();k.lineStyle(1,2634298,1);for(let c=0;c<=Z.width;c++)k.lineBetween(c*Z.tileSize,0,c*Z.tileSize,Z.height*Z.tileSize);for(let c=0;c<=Z.height;c++)k.lineBetween(0,c*Z.tileSize,Z.width*Z.tileSize,c*Z.tileSize);this.setupPointerInput(),(q=this.input.keyboard)==null||q.on("keydown-W",()=>this.movePlayer(0,-1)),(et=this.input.keyboard)==null||et.on("keydown-S",()=>this.movePlayer(0,1)),(p=this.input.keyboard)==null||p.on("keydown-A",()=>this.movePlayer(-1,0)),(S=this.input.keyboard)==null||S.on("keydown-D",()=>this.movePlayer(1,0)),(t=this.input.keyboard)==null||t.on("keydown-SPACE",()=>this.collectResource()),(d=this.input.keyboard)==null||d.on("keydown-E",()=>this.drinkWater()),this.time.addEvent({loop:!0,delay:250,callback:()=>this.updateHUD()}),this.buildHotbar(),this.buildEventLog(),this.buildBuildablesList(),this.buildBuildQueue(),this.buildInventoryList(),this.setupOverlayToggle(),this.setupInteractionModeToggle(),this.add.layer(),this.initializeResources(),this.redrawEntities(),this.redrawPlayer(),this.addEvent("Welcome to the desert! Collect resources and survive.")}buildHotbar(){this.hotbar=document.getElementById("hotbar"),this.updateHotbar()}updateHotbar(){const Z=[{id:"power_cube",label:"PC",name:"Power Cube"},{id:"ceb_press",label:"CEB",name:"CEB Press"},{id:"water_well",label:"WW",name:"Water Well"},{id:"storage_shed",label:"SS",name:"Storage Shed"}].filter(q=>(this.state.inventory[q.id]||0)>0),k=q=>{const et=document.createElement("div");return et.className="slot"+(this.state.selected===q.id?" active":""),et.innerHTML=`
      `,et.title=`${q.name} (${this.state.inventory[q.id]||0} available)`,et.onclick=()=>{this.state.selected=q.id;for(const p of Array.from(this.hotbar.children))p.classList.remove("active");et.classList.add("active")},et};this.hotbar.replaceChildren(...Z.map(k))}buildEventLog(){this.eventLog=document.getElementById("event-log"),this.eventLog.innerHTML='<div class="event-log-content"></div>'}addEvent(Z){const k=this.eventLog.querySelector(".event-log-content"),q=document.createElement("div");for(q.className="event-item",q.textContent=`[${new Date().toLocaleTimeString()}] ${Z}`,k.appendChild(q);k.children.length>20;)k.removeChild(k.firstChild);k.scrollTop=k.scrollHeight}setupPointerInput(){this.input.on("pointerdown",Z=>{const k=Z.positionToCamera(this.cameras.main),q=Math.floor(k.x/this.state.gridSize),et=Math.floor(k.y/this.state.gridSize);if(this.isWithinBounds(q,et)){if(this.shouldMoveOnPointer(Z)){this.setMovementTarget(q,et);return}this.handleTileInteraction(q,et)}})}shouldMoveOnPointer(Z){if(this.interactionMode==="move"||Z.rightButtonDown())return!0;const k=Z.pointerType;return(k==="touch"||k==="pen")&&this.interactionMode==="move"}handleTileInteraction(Z,k){if(this.movementPath=[],this.movementAccum=0,Z===this.state.player.pos.x&&k===this.state.player.pos.y&&this.collectResourceAt(Z,k))return;const q=this.state.placed.find(et=>et.pos.x===Z&&et.pos.y===k);if(q){this.state.placed=this.state.placed.filter(et=>et!==q),this.addEvent(`Removed ${q.id} at (${Z}, ${k})`),this.redrawEntities();return}(this.state.inventory[this.state.selected]||0)>0?(this.state.placed.push({id:this.state.selected,pos:{x:Z,y:k},powered:!1}),this.state.inventory[this.state.selected]=(this.state.inventory[this.state.selected]||0)-1,this.addEvent(`Placed ${this.state.selected} at (${Z}, ${k})`),this.redrawEntities(),this.updateAllUI()):this.addEvent(`Cannot place ${this.state.selected} - not in inventory`)}buildBuildablesList(){this.buildablesList=document.getElementById("buildables-list"),this.updateBuildablesList()}updateBuildablesList(){this.checkUnlocks(),this.buildablesList.innerHTML="";for(const Z of this.state.buildables){const k=this.canBuildItem(Z),q=document.createElement("div");q.className=`buildable-item ${k?"available":"unavailable"}`;const et=Object.entries(Z.requirements).map(([p,S])=>`${p}: ${S}`).join(", ");q.innerHTML=`
        <div class="buildable-name">${Z.name}</div>
        <div class="buildable-desc">${Z.description}</div>
        <div class="buildable-req">${et}</div>
        <div class="buildable-time">${Z.buildTime}s</div>
      `,k&&(q.onclick=()=>this.startBuilding(Z)),this.buildablesList.appendChild(q)}}checkUnlocks(){const Z=this.state.buildables.find(k=>k.id==="ceb_press");Z&&!Z.unlocked&&(this.state.inventory.brick_ceb||0)>=5&&(Z.unlocked=!0,this.addEvent("CEB Press blueprint unlocked!"))}canBuildItem(Z){if(!Z.unlocked)return!1;for(const[k,q]of Object.entries(Z.requirements))if((this.state.inventory[k]||0)<q)return!1;return!0}startBuilding(Z){if(!this.canBuildItem(Z)){this.addEvent(`Cannot build ${Z.name} - insufficient resources`);return}for(const[k,q]of Object.entries(Z.requirements))this.state.inventory[k]=(this.state.inventory[k]||0)-q;this.state.buildQueue.push({id:Z.id,name:Z.name,timeRemaining:Z.buildTime,totalTime:Z.buildTime}),this.addEvent(`Queued ${Z.name} for building (${Z.buildTime}s)`),this.updateAllUI()}buildBuildQueue(){this.buildQueue=document.getElementById("build-queue"),this.updateBuildQueue()}updateBuildQueue(){if(this.buildQueue.innerHTML="",this.state.buildQueue.length===0){this.buildQueue.innerHTML='<div class="queue-empty">No items building</div>';return}for(let Z=0;Z<this.state.buildQueue.length;Z++){const k=this.state.buildQueue[Z],q=document.createElement("div"),et=Z===0;q.className=`queue-item ${et?"building":"queued"}`;const p=(k.totalTime-k.timeRemaining)/k.totalTime*100;q.innerHTML=`
        <div class="queue-name">${et?"🔨 ":"⏳ "}${k.name}</div>
          <button class="cancel-btn" onclick="window.gameScene?.cancelBuilding(${Z})">×</button>
      `,this.buildQueue.appendChild(q)}}buildInventoryList(){this.inventoryList=document.getElementById("inventory-list"),this.updateInventoryList()}updateInventoryList(){this.inventoryList.innerHTML="";const Z=[{id:"clay",name:"Clay",type:"resource"},{id:"water",name:"Water",type:"resource"},{id:"stone",name:"Stone",type:"resource"},{id:"brick_ceb",name:"Bricks",type:"resource"},{id:"power_cube",name:"Power Cube",type:"item"},{id:"ceb_press",name:"CEB Press",type:"item"},{id:"water_well",name:"Water Well",type:"item"},{id:"storage_shed",name:"Storage Shed",type:"item"}];for(const k of Z){const q=this.state.inventory[k.id]||0;if(q>0){const et=document.createElement("div");et.className=`inventory-item ${k.type}`,et.innerHTML=`
        `,this.inventoryList.appendChild(et)}}}cancelBuilding(Z){if(Z>=0&&Z<this.state.buildQueue.length){const k=this.state.buildQueue[Z],q=this.state.buildables.find(et=>et.id===k.id);if(q)for(const[et,p]of Object.entries(q.requirements))this.state.inventory[et]=(this.state.inventory[et]||0)+p;this.state.buildQueue.splice(Z,1),this.addEvent(`Cancelled building ${k.name}`),this.updateAllUI()}}initializeResources(){const Z=this.cache.json.get("map"),k=Z.layers.find(q=>q.name==="resources");if(k)for(let q=0;q<Z.height;q++)for(let et=0;et<Z.width;et++){const p=k.data[q][et];if(p>0){const S=["","clay","stone","water"];this.state.resources.push({pos:{x:et,y:q},type:S[p],amount:50,maxAmount:50})}}}redrawEntities(){this.children.list.filter(Z=>Z.isEntity).forEach(Z=>Z.destroy()),this.children.list.filter(Z=>Z.isResource).forEach(Z=>Z.destroy());for(const Z of this.state.placed){const q={power_cube:1190,ceb_press:1130,water_well:1695,storage_shed:2214}[Z.id]||1638,et=this.add.circle(Z.pos.x*this.state.gridSize+16,Z.pos.y*this.state.gridSize+16,12,q);et.isEntity=!0}for(const Z of this.state.resources)if(Z.amount>0){const q={clay:9127187,stone:6908265,water:4286945}[Z.type]||16777215,et=Math.max(4,Z.amount/Z.maxAmount*12),p=this.add.circle(Z.pos.x*this.state.gridSize+16,Z.pos.y*this.state.gridSize+16,et,q);p.isResource=!0}}movePlayer(Z,k){this.movementPath=[],this.movementAccum=0;const q=this.state.player.pos.x+Z,et=this.state.player.pos.y+k;q>=0&&q<this.state.width&&et>=0&&et<this.state.height&&(this.state.player.pos.x=q,this.state.player.pos.y=et,this.redrawPlayer())}collectResource(){this.collectResourceAt(this.state.player.pos.x,this.state.player.pos.y)}collectResourceAt(Z,k){const q=this.state.resources.find(p=>p.pos.x===Z&&p.pos.y===k&&p.amount>0);if(!q)return!1;const et=Math.min(5,q.amount);return q.amount-=et,this.state.inventory[q.type]=(this.state.inventory[q.type]||0)+et,this.addEvent(`Collected ${et} ${q.type} (${q.amount} remaining)`),q.amount<=0&&(this.state.resources=this.state.resources.filter(p=>p!==q),this.addEvent(`${q.type} deposit depleted`)),this.redrawEntities(),this.updateAllUI(),!0}drinkWater(){this.state.inventory.water>0?(this.state.inventory.water--,this.state.player.thirst=Math.min(100,this.state.player.thirst+25),this.addEvent(`Drank water! Thirst restored to ${Math.round(this.state.player.thirst)}%`)):this.addEvent("No water available!")}redrawPlayer(){this.children.list.filter(k=>k.isPlayer).forEach(k=>k.destroy());const Z=this.add.circle(this.state.player.pos.x*this.state.gridSize+16,this.state.player.pos.y*this.state.gridSize+16,8,65280);Z.isPlayer=!0}updateHUD(){const Z=document.querySelector(".hud"),k=this.state.inventory.brick_ceb??0,q=this.state.inventory.clay??0,et=this.state.inventory.water??0,p=this.state.inventory.stone??0,S=Math.round(this.state.player.health),t=Math.round(this.state.player.thirst);Z.textContent=`ecology.click — Health: ${S} | Thirst: ${t} | Clay: ${q} | Water: ${et} | Stone: ${p} | Bricks: ${k}`,this.updateAllUI()}updateAllUI(){this.updateBuildablesList(),this.updateBuildQueue(),this.updateInventoryList(),this.updateHotbar()}update(Z,k){wt(this.state),Bt(this.state,k/1e3,q=>this.addEvent(q)),this.updateSurvival(k/1e3),this.processBuildQueue(k/1e3),this.updateMovement(k/1e3);for(const q of this.children.list)if(q.isEntity){const et=q,p=Math.floor(et.x/this.state.gridSize),S=Math.floor(et.y/this.state.gridSize),t=this.state.placed.find(d=>d.pos.x===p&&d.pos.y===S);if(t){const c={power_cube:1190,ceb_press:1130,water_well:1695,storage_shed:2214}[t.id]||1638;et.setFillStyle(t.powered?11063551:c)}}}processBuildQueue(Z){if(this.state.buildQueue.length>0){const k=this.state.buildQueue[0];k.timeRemaining-=Z,k.timeRemaining<=0&&(this.addEvent(`${k.name} construction completed!`),k.id==="power_cube"||k.id==="ceb_press"?this.state.inventory[k.id]=(this.state.inventory[k.id]||0)+1:this.state.inventory[k.id]=(this.state.inventory[k.id]||0)+1,this.state.buildQueue.shift(),this.updateAllUI())}}updateSurvival(Z){this.state.player.thirst=Math.max(0,this.state.player.thirst-Z*.2),this.state.player.thirst<50&&this.state.inventory.water>0&&(this.state.inventory.water--,this.state.player.thirst=Math.min(100,this.state.player.thirst+25),this.addEvent(`Auto-drank water! Thirst: ${Math.round(this.state.player.thirst)}%`)),this.state.player.thirst<20&&(this.state.player.health=Math.max(0,this.state.player.health-Z*5)),this.state.player.energy=Math.max(0,this.state.player.energy-Z*.1),this.state.player.health<=0&&this.addEvent("Game Over! You died of thirst.")}setMovementTarget(Z,k){if(!this.isWithinBounds(Z,k))return;const q=this.state.player.pos;if(q.x===Z&&q.y===k){this.movementPath=[],this.movementAccum=0,this.collectResourceAt(Z,k);return}const et=[];let p=q.x,S=q.y;const t=Math.sign(Z-p),d=Math.sign(k-S);for(;p!==Z;)p+=t,et.push({x:p,y:S});for(;S!==k;)S+=d,et.push({x:p,y:S});this.movementPath=et.filter(c=>this.isWithinBounds(c.x,c.y)),this.movementAccum=0}updateMovement(Z){if(this.movementPath.length===0)return;const q=1/4;this.movementAccum+=Z;let et=!1;for(;this.movementAccum>=q&&this.movementPath.length>0;){this.movementAccum-=q;const p=this.movementPath.shift();this.state.player.pos.x=p.x,this.state.player.pos.y=p.y,et=!0}et&&this.redrawPlayer(),this.movementPath.length===0&&(et&&this.collectResource(),this.movementAccum=0)}setupOverlayToggle(){this.overlayElements=[document.querySelector(".hud"),this.hotbar,this.eventLog,this.buildablesList,this.buildQueue,this.inventoryList].filter(k=>!!k);const Z=document.getElementById("overlay-toggle");this.overlayToggleButton=Z instanceof HTMLButtonElement?Z:void 0,this.applyOverlayVisibility(),this.overlayToggleButton&&this.overlayToggleButton.addEventListener("click",()=>{this.overlaysCollapsed=!this.overlaysCollapsed,this.applyOverlayVisibility()})}applyOverlayVisibility(){for(const Z of this.overlayElements)this.overlaysCollapsed?Z.classList.add("overlay-hidden"):Z.classList.remove("overlay-hidden");this.overlayToggleButton&&(this.overlayToggleButton.textContent=this.overlaysCollapsed?"Show UI":"Hide UI",this.overlayToggleButton.setAttribute("aria-expanded",(!this.overlaysCollapsed).toString()))}setupInteractionModeToggle(){const Z=document.getElementById("mode-toggle");if(this.modeToggleButton=Z instanceof HTMLButtonElement?Z:void 0,!this.modeToggleButton)return;const k=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)").matches:!1;this.interactionMode=k?"move":"build",this.updateModeToggleButton(),this.modeToggleButton.addEventListener("click",()=>{this.interactionMode=this.interactionMode==="move"?"build":"move",this.updateModeToggleButton()})}updateModeToggleButton(){this.modeToggleButton&&(this.modeToggleButton.dataset.mode=this.interactionMode,this.modeToggleButton.textContent=this.interactionMode==="move"?"Move Mode":"Build Mode",this.modeToggleButton.setAttribute("aria-pressed",this.interactionMode==="move"?"true":"false"),this.modeToggleButton.title=this.interactionMode==="move"?"Tap tiles to walk the player. Tap to switch back to building.":"Tap tiles to place or remove builds. Tap to switch back to movement.")}isWithinBounds(Z,k){return Z>=0&&k>=0&&Z<this.state.width&&k<this.state.height}}const Gt={type:Pt.AUTO,parent:"app",backgroundColor:"#0b0f12",scale:{mode:Pt.Scale.RESIZE},scene:[It],render:{pixelArt:!0}},Nt=new Pt.Game(Gt);window.gameScene=Nt.scene.getScene("game");
